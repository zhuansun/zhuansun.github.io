<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>张三的个人电脑</title>
  
  
  <link href="https://zhuansunpengcheng.gitee.io/atom.xml" rel="self"/>
  
  <link href="https://zhuansunpengcheng.gitee.io/"/>
  <updated>2022-10-31T10:57:46.524Z</updated>
  <id>https://zhuansunpengcheng.gitee.io/</id>
  
  <author>
    <name>zs</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>我的面试问题</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/WORKER/%E6%88%91%E7%9A%84%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/WORKER/%E6%88%91%E7%9A%84%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/</id>
    <published>2022-10-31T10:57:46.524Z</published>
    <updated>2022-10-31T10:57:46.524Z</updated>
    
    <content type="html"><![CDATA[<p>redis的基本类型有哪些？<br>redis的有哪些使用场景？<br>String类型里面有bitmap，了解过吗？<br>sorted_set的底层原理是什么？<br>    跳表<br>redis的事务<br>    如果A，B两个事务，A事务修改了k1的值，然后查询k1，B事务删了k1，如果B的exec先发送完，A的exec后发送，会出现什么现象<br>    怎么解决这个现象呢？<br>缓存穿透？布隆过滤器？<br>Redis的持久化？RDB和AOF的区别<br>    RDB的原理：父子进程fork 和 copy on write； 指针指向同一个key，如果这个key修改了怎么办？<br>Redis主从中怎么保证数据的一致性（主从复制怎么实现的）<br>    - 通过RDB文件进行同步的，同步有两种方式网络和磁盘<br>    redis的管道pipline用过吗<br>    redis的内存如果用完了，会怎么样？<br>    - Redis有哪几种数据淘汰策略？<br>    - LRU<br>    - 怎么保证都是热点数据<br>    redis的集群有了解吗?<br>    普通哈希，一致性哈希（哈希环），哈希槽</p><p>一条查询语句是怎么执行的？</p><p>事务的四个特性，Mysql是怎么实现这四个特性的<br>事务有哪些隔离级别？<br>RR是怎么解决脏读的？<br>生产使用的隔离级别是哪种？<br>MySQL日志有哪几种？区别呢？</p><p>如何强制使用某个索引？<br>如果有一个很长的url存到了库中，我要利用这个字段去精确查询某行记录，怎么创建索引更好？<br>前缀索引怎么确定长度？</p><p>mysql有哪些调优方案？<br>    - 索引，使用覆盖索引，索引下推；<br>mysql会不会选错索引？选错了怎么办？<br>    - sql中手动指定索引<br>    - 删除掉走错的索引<br>mysql为什么会选错索引？<br>    - 统计不准，可以anlize table；<br>analize table准确吗？<br>    - 不准确，抽样采集的；</p><p>涉及到财务的系统设计</p><ul><li><a href="http://confluence.sf-express.com/pages/viewpage.action?pageId=189135181">http://confluence.sf-express.com/pages/viewpage.action?pageId=189135181</a></li><li>快递  银行  商家</li><li>快递根据快递单生成账单，根据账单的金额，调用银行进行打款申请，打款给商家；</li><li>快递单号，发件人，发件人银行账号，收件人，快递金额</li><li>用户可能涉及的状态：</li></ul><p>DDD的一些基本概念：</p><ul><li>实体和值对象的区别是什么？</li><li>一个查询请求过来，打到DDD后台之后，你们的分层是怎么样的，这个请求的链路是什么样子的</li><li>防腐层是什么？</li></ul><p>mysql</p><ul><li>对一个字段创建索引，是选择普通索引，还是唯一索引（buffer）？</li><li>对一个很长的字段，想精确查询，怎么建立索引？</li><li>回表？ 怎么减少回表<ul><li>有没有可能经过索引优化，避免回表过程呢？（覆盖索引）</li></ul></li><li><h2 id="索引的B-树"><a href="#索引的B-树" class="headerlink" title="索引的B+树"></a>索引的B+树</h2></li><li>mysql的事务特性<ul><li>日志</li></ul></li></ul><p>分布式的基本概念：<br>    - 二阶段提交流程是什么？有什么问题？</p><p>JVM垃圾回收</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;redis的基本类型有哪些？&lt;br&gt;redis的有哪些使用场景？&lt;br&gt;String类型里面有bitmap，了解过吗？&lt;br&gt;sorted_set的底层原理是什么？&lt;br&gt;    跳表&lt;br&gt;redis的事务&lt;br&gt;    如果A，B两个事务，A事务修改了k1的值，然后查询</summary>
      
    
    
    
    <category term="WORKER" scheme="https://zhuansunpengcheng.gitee.io/categories/WORKER/"/>
    
    
    <category term="面试" scheme="https://zhuansunpengcheng.gitee.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://zhuansunpengcheng.gitee.io/note/TOOLS/idea/idea%E6%BF%80%E6%B4%BB/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/TOOLS/idea/idea%E6%BF%80%E6%B4%BB/</id>
    <published>2022-10-31T10:57:46.523Z</published>
    <updated>2022-10-31T10:57:46.523Z</updated>
    
    <content type="html"><![CDATA[<h1 id="idea激活"><a href="#idea激活" class="headerlink" title="idea激活"></a>idea激活</h1><p>激活使用的是无限试用的方法</p><p>下载插件包：<a href="idea%E6%BF%80%E6%B4%BB.assets/ide-eval-resetter-2.1.6.zip">ide-eval-resetter-2.1.6.zip</a></p><p>直接拖到IDEA或者DataGrip中安装</p><p>安装之后，在Help中就可以看到，点击就可以重置</p><img src="idea激活.assets/image-20221011163201374.png" alt="image-20221011163201374" style="zoom:80%;" />]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;idea激活&quot;&gt;&lt;a href=&quot;#idea激活&quot; class=&quot;headerlink&quot; title=&quot;idea激活&quot;&gt;&lt;/a&gt;idea激活&lt;/h1&gt;&lt;p&gt;激活使用的是无限试用的方法&lt;/p&gt;
&lt;p&gt;下载插件包：&lt;a href=&quot;idea%E6%BF%80%E6%B</summary>
      
    
    
    
    <category term="TOOLS" scheme="https://zhuansunpengcheng.gitee.io/categories/TOOLS/"/>
    
    <category term="idea" scheme="https://zhuansunpengcheng.gitee.io/categories/TOOLS/idea/"/>
    
    
    <category term="idea破解" scheme="https://zhuansunpengcheng.gitee.io/tags/idea%E7%A0%B4%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>docker+hexo+gitee部署完美个人博客</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/TOOLS/hexo/docker+hexo+gitee%E9%83%A8%E7%BD%B2%E5%AE%8C%E7%BE%8E%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/TOOLS/hexo/docker+hexo+gitee%E9%83%A8%E7%BD%B2%E5%AE%8C%E7%BE%8E%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</id>
    <published>2022-10-31T10:57:46.522Z</published>
    <updated>2022-10-31T10:57:46.522Z</updated>
    
    <content type="html"><![CDATA[<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>因为引用的文章在下面都说到了，可以先看看</p><p><a href="https://zhuanlan.zhihu.com/p/372398281">Docker + Git 部署Hexo发布</a></p><p><a href="https://www.cnblogs.com/moshuying/p/15801437.html">【hexo指南】hexo配置ER图流程图时序图插件</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>因为平时使用typora写文章，除了基本的MD语法之外，还使用了</p><ul><li>本地图片</li><li>mermaid</li></ul><p>就是上面两点，导致部署hexo比较麻烦，特别是第一点。</p><p>为什么呢？</p><p>hexo新版本不是支持了本地图片吗？</p><p>但是支持的前提是：图片的文件夹和MD文件名一致，像下面这样</p><ul><li>xxxxx.md</li><li>xxxxx</li></ul><p>而我的图片存储方式是：</p><ul><li>xxxxx.md</li><li>xxxxx.assets</li></ul><p>对应typora的设置就是：</p><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221030220722156.png" alt="image-20221030220722156" style="zoom:50%;" /><p>所以hexo就不支持了，我就很难受</p><h2 id="第一步：准备hexo文件"><a href="#第一步：准备hexo文件" class="headerlink" title="第一步：准备hexo文件"></a>第一步：准备hexo文件</h2><p>你需要准备你的所有笔记文件：比如我的是放在gitee的，大致有下面这些笔记</p><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221030220831563.png" alt="image-20221030220831563" style="zoom:50%;" /><p>然后需要准备一个hexo的主题，我推荐是 butterfly，把主题下载下来</p><p>然后需要准备hexo的配置文件_config.yml，配置好你所需要的所有内容</p><p>然后准备下面的脚本，命名为：hexo-img-move.js</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs-extra'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//note/xxx/xx.assets  2020/10/30/xxx/xx.assets</span><span class="token keyword">function</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token parameter">dir<span class="token punctuation">,</span>dest</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>fs<span class="token punctuation">.</span><span class="token function">pathExists</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> exists</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>exists<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fs<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> dest<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>   <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">//遍历递归public文件夹，将</span><span class="token keyword">function</span> <span class="token function">readFileList</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> filesList</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>    files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">itm<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> stat <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>path <span class="token operator">+</span> itm<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>stat<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//递归读取文件</span>            <span class="token function">readFileList</span><span class="token punctuation">(</span>path <span class="token operator">+</span> itm <span class="token operator">+</span> <span class="token string">"/"</span><span class="token punctuation">,</span> filesList<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">//定义一个对象存放文件的路径和名字</span>            obj<span class="token punctuation">.</span>path <span class="token operator">=</span> path<span class="token punctuation">;</span><span class="token comment">//路径</span>            obj<span class="token punctuation">.</span>filename <span class="token operator">=</span> itm<span class="token comment">//名字</span>            filesList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> getFiles <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//获取文件夹下的所有文件</span>    <span class="token function-variable function">getFileList</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> filesList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token function">readFileList</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> filesList<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> filesList<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>getFiles<span class="token punctuation">.</span><span class="token function">getFileList</span><span class="token punctuation">(</span><span class="token string">'/var/www/hexo/public/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">// console.log(obj.path);</span><span class="token comment">// var paths = obj.path.split('public/');</span><span class="token comment">// var dir_part = paths[1];</span><span class="token comment">// var dir_full = '/var/www/hexo/source/_posts/'+dir_part;</span><span class="token comment">// var dir = dir_full.substring(0,dir_full.length-1)+'.assets';</span><span class="token keyword">var</span> dir_part <span class="token operator">=</span> obj<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'note'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> dir_full <span class="token operator">=</span> <span class="token string">'/var/www/hexo/source/_posts/note'</span><span class="token operator">+</span>dir_part<span class="token punctuation">;</span><span class="token keyword">var</span> dir <span class="token operator">=</span> dir_full<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>dir_full<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'.assets'</span><span class="token punctuation">;</span><span class="token comment">//第一种：复制到 dir 的下一级目录下</span><span class="token keyword">var</span> dirs <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> aessets_name <span class="token operator">=</span> dirs<span class="token punctuation">[</span>dirs<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">var</span> dest1 <span class="token operator">=</span> obj<span class="token punctuation">.</span>path<span class="token operator">+</span>aessets_name<span class="token punctuation">;</span><span class="token comment">// 第二种：复制到 dir 同级目录下</span><span class="token comment">// var dest2 = obj.path.substring(0,obj.path.length-1)+'.assets';</span><span class="token comment">//第三种：复制到 public 下</span><span class="token keyword">var</span> dirs <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> forder_name <span class="token operator">=</span> dirs<span class="token punctuation">[</span>dirs<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.assets'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">var</span> dest_full <span class="token operator">=</span> obj<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>obj<span class="token punctuation">.</span>path<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'.assets'</span><span class="token punctuation">;</span><span class="token keyword">var</span> dests <span class="token operator">=</span> dest_full<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> dest3 <span class="token operator">=</span> <span class="token string">'/var/www/hexo/public/'</span><span class="token operator">+</span>dests<span class="token punctuation">[</span>dests<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//</span><span class="token comment">///var/www/hexo/public/2022/10/30/note/JAVA/数据库/MYSQL/mysql的日志从入门到入土/</span><span class="token comment">// console.log(dir)</span><span class="token function">copy</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span>dest1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">copy</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span>dest3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221030221220970.png" alt="image-20221030221220970" style="zoom:80%;" /><h2 id="第二步：准备dockerfile"><a href="#第二步：准备dockerfile" class="headerlink" title="第二步：准备dockerfile"></a>第二步：准备dockerfile</h2><p>将下面的文件 命名为：Dockerfile  没有后缀名</p><pre class="line-numbers language-docker" data-language="docker"><code class="language-docker"><span class="token instruction"><span class="token keyword">FROM</span> node:14-alpine</span><span class="token instruction"><span class="token keyword">WORKDIR</span> /var/www/hexo</span><span class="token instruction"><span class="token keyword">RUN</span> echo <span class="token string">"Asia/Shanghai"</span> > /etc/timezone <span class="token operator">\</span>    &amp;&amp; echo <span class="token string">"https://mirrors.aliyun.com/alpine/v3.9/main/"</span> > /etc/apk/repositories  <span class="token operator">\</span>    &amp;&amp; npm config set registry https://registry.npm.taobao.org <span class="token operator">\</span>    &amp;&amp; apk add --no-cache git <span class="token operator">\</span>    &amp;&amp; apk add --no-cache openssh-client <span class="token operator">\</span>    &amp;&amp; npm install hexo-cli -g <span class="token operator">\</span>    &amp;&amp; hexo init <span class="token operator">\</span>    &amp;&amp; npm install hexo-renderer-swig <span class="token operator">\</span>    &amp;&amp; npm install <span class="token operator">\</span>    &amp;&amp; npm install fs-extra --save </span>    &amp;&amp; npm install hexo-deployer-git --save \    &amp;&amp; npm install hexo-renderer-jade hexo-generator-feed hexo-generator-sitemap hexo-browsersync hexo-generator-archive --save \    &amp;&amp; npm install hexo-filter-mermaid-diagrams --save \    &amp;&amp; npm install hexo-blog-encrypt --save \    &amp;&amp; git config --global user.email "zhuansunpengcheng@qq.com" \    &amp;&amp; git config --global user.name "zhuansun" \    &amp;&amp; ssh-keygen -t RSA -C "zhuansunpengcheng@qq.com" -P "" -N "" -f /root/.ssh/id_rsa \    &amp;&amp; echo "StrictHostKeyChecking no" >> /etc/ssh/ssh_config \    &amp;&amp; cat /root/.ssh/id_rsa.pub<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>我们使用alpine作为基本镜像，因为够小，对于hexo来说，足够了</li><li>设置工作目录是 &#x2F;var&#x2F;www&#x2F;hexo</li><li>下面就是安装git，ssh，hexo</li><li>npm install fs-extra –save ：安装fs-extra的依赖，是为了我们的 hexo-img-move.js能正常运行</li><li>安装了一些hexo的插件<ul><li>hexo-deployer-git：让hexo支持直接部署到git上</li><li>hexo-renderer-jade hexo-generator-feed hexo-generator-sitemap hexo-browsersync hexo-generator-archive：这些是为了butterfly主题支持用的</li><li>hexo-filter-mermaid-diagrams：让hexo支持mermaid流程图（解决了我的第二个痛点）：<a href="https://www.cnblogs.com/moshuying/p/15801437.html">https://www.cnblogs.com/moshuying/p/15801437.html</a></li><li>hexo-blog-encrypt：加密文章，使用方法见github：<a href="https://github.com/rdou/hexo-blog-encrypt">https://github.com/rdou/hexo-blog-encrypt</a><ul><li>说明：在http环境下不支持加密，这是因为脚本中的使用的crypto对象，有一个subtle属性只能在https环境下获取到。</li><li><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221031001047545.png" alt="image-20221031001047545" style="zoom:80%;" /></li><li><img src="/docker+hexo+gitee%E9%83%A8%E7%BD%B2%E5%AE%8C%E7%BE%8E%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2.assets/image-20221031001405503.png" alt="image-20221031001405503"></li></ul></li></ul></li><li>设置git的邮箱和用户名，填自己的就行</li><li>设置ssh公钥，是为了让git提交的时候不用每次都输入密码，直接用公钥提交</li><li>echo “StrictHostKeyChecking no” &gt;&gt; &#x2F;etc&#x2F;ssh&#x2F;ssh_config \： 这一步很重要，是为了容器启动的时候，跳过ssh公钥的检查，避免手动输入yes</li><li>cat &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub：打印公钥</li></ul><h2 id="第三步：构建docker镜像"><a href="#第三步：构建docker镜像" class="headerlink" title="第三步：构建docker镜像"></a>第三步：构建docker镜像</h2><p>在Dockerfile的目录下，运行下面的命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> build <span class="token parameter variable">-t</span> zhuansun/hexo:v1.0 <span class="token builtin class-name">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>-t：表示指定镜像的名字和标签</li><li>zhuansun&#x2F;hexo:v1.0 : 表示镜像的名字，v1.0是标签</li><li>. ：这个点，不知道啥意思，写上</li></ul><p>查看构建的镜像</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ash-4.3<span class="token comment"># docker image ls</span>REPOSITORY                                          TAG                       IMAGE ID       CREATED         SIZEzhuansun/hexo                                       v1.0                      71b6e1b7ea19   <span class="token number">4</span> minutes ago   249MB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="第四步：运行容器"><a href="#第四步：运行容器" class="headerlink" title="第四步：运行容器"></a>第四步：运行容器</h2><p>我用的是群辉的docker，挂载了四个目录，和一个端口</p><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221030222106418.png" alt="image-20221030222106418" style="zoom: 80%;" /><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221030222129007.png" alt="image-20221030222129007" style="zoom:50%;" /><p>其他的都是默认。然后启动</p><p>注意：</p><p>挂载的文件夹里面，要有内容哦。按照第一步，该放的都放好。</p><h2 id="第五步：启动容器"><a href="#第五步：启动容器" class="headerlink" title="第五步：启动容器"></a>第五步：启动容器</h2><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221030222250742.png" alt="image-20221030222250742" style="zoom:80%;" /><h2 id="第六步：使用容器"><a href="#第六步：使用容器" class="headerlink" title="第六步：使用容器"></a>第六步：使用容器</h2><p>先开启群辉的ssh，然后进入到容器里面</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> xxxxxxx <span class="token function">sh</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>进来之后，默认就是我们设置的：&#x2F;var&#x2F;www&#x2F;hexo</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ash-4.3<span class="token comment"># docker exec -it fb29ef2559ef sh</span>/var/www/hexo <span class="token comment"># ls</span>_config.landscape.yml  db.json                package-lock.json      public                 shell                  themes_config.yml            node_modules           package.json           scaffolds              <span class="token builtin class-name">source</span>                 yarn.lock/var/www/hexo <span class="token comment"># hexo clean</span>INFO  Validating configINFO  Deleted database.INFO  Deleted public folder./var/www/hexo <span class="token comment"># hexo g</span>INFO  Validating configINFO  Start processingINFO  Generated: note/JAVA/数据库/MYSQL/mysql中的交集差集并集/index.htmlINFO  Generated: note/JAVA/GIT/git批量删除分支/index.htmlINFO  Generated: note/PROJECT/时效项目/index.htmlINFO  <span class="token number">73</span> files generated <span class="token keyword">in</span> <span class="token number">7.03</span> s/var/www/hexo <span class="token comment"># node shell/hexo-img-move.js </span>success<span class="token operator">!</span>success<span class="token operator">!</span>success<span class="token operator">!</span>/var/www/hexo <span class="token comment"># hexo server -d</span>INFO  Validating configINFO  <span class="token punctuation">[</span>Browsersync<span class="token punctuation">]</span> Access URLs: ----------------------------------          UI: http://localhost:3001 ---------------------------------- UI External: http://localhost:3001 ----------------------------------INFO  Start processingINFO  Hexo is running at http://localhost:4000/ <span class="token builtin class-name">.</span> Press Ctrl+C to stop.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>说一下 node shell&#x2F;hexo-img-move.js  这一步，hexo生成静态文件之后，只有html，并没有图片的</li><li>如果你用的是图床，那么完全啥问题都没有</li><li>如果是本地图片，我们就需要把本地图片移动到指定的文件夹中</li><li>然后hexo server启动后，html才可以找到图片（具体怎么移动的可以看上面的代码）</li></ul><h2 id="第七步：本地验证hexo服务"><a href="#第七步：本地验证hexo服务" class="headerlink" title="第七步：本地验证hexo服务"></a>第七步：本地验证hexo服务</h2><p>图片可以正常显示</p><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221030222950902.png" alt="image-20221030222950902" style="zoom:80%;" /><p>代码可以正常显示</p><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221030223012143.png" alt="image-20221030223012143" style="zoom:80%;" /><p>时序图可以正常显示</p><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221030223026695.png" alt="image-20221030223026695" style="zoom:80%;" /><h2 id="第八步：部署到gitee"><a href="#第八步：部署到gitee" class="headerlink" title="第八步：部署到gitee"></a>第八步：部署到gitee</h2><p>首先需要配置上面的公钥到gitee上，百度很简单</p><p>然后再hexo中：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/var/www/hexo <span class="token comment"># hexo d</span>INFO  Validating configINFO  Deploying: <span class="token function">git</span>INFO  Clearing .deploy_git folder<span class="token punctuation">..</span>.INFO  Copying files from public folder<span class="token punctuation">..</span>.INFO  Copying files from extend dirs<span class="token punctuation">..</span>.<span class="token punctuation">[</span>master c3fe339<span class="token punctuation">]</span> Site updated: <span class="token number">2022</span>-10-30 <span class="token number">14</span>:31:27Enumerating objects: <span class="token number">308</span>, done.Counting objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">308</span>/308<span class="token punctuation">)</span>, done.Delta compression using up to <span class="token number">4</span> threadsCompressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">247</span>/247<span class="token punctuation">)</span>, done.Writing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">284</span>/284<span class="token punctuation">)</span>, <span class="token number">22.02</span> MiB <span class="token operator">|</span> <span class="token number">1.09</span> MiB/s, done.Total <span class="token number">284</span> <span class="token punctuation">(</span>delta <span class="token number">51</span><span class="token punctuation">)</span>, reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>remote: Resolving deltas: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">51</span>/51<span class="token punctuation">)</span>, completed with <span class="token number">3</span> <span class="token builtin class-name">local</span> objects.remote: Powered by GITEE.COM <span class="token punctuation">[</span>GNK-6.4<span class="token punctuation">]</span>To gitee.com:zhuansunpengcheng/zhuansunpengcheng.git   e4984bb<span class="token punctuation">..</span>c3fe339  HEAD -<span class="token operator">></span> masterBranch <span class="token string">'master'</span> <span class="token builtin class-name">set</span> up to track remote branch <span class="token string">'master'</span> from <span class="token string">'git@gitee.com:zhuansunpengcheng/zhuansunpengcheng.git'</span><span class="token builtin class-name">.</span>INFO  Deploy done: <span class="token function">git</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>提交成功之后，到gitee上，开始gitee page服务</p><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221030223331923.png" alt="image-20221030223331923" style="zoom:50%;" /><p>然后就可以使用了</p><img src="docker+hexo+gitee部署完美个人博客.assets/image-20221030223426237.png" alt="image-20221030223426237" style="zoom:80%;" />]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;引用&quot;&gt;&lt;a href=&quot;#引用&quot; class=&quot;headerlink&quot; title=&quot;引用&quot;&gt;&lt;/a&gt;引用&lt;/h2&gt;&lt;p&gt;因为引用的文章在下面都说到了，可以先看看&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/3723</summary>
      
    
    
    
    <category term="TOOLS" scheme="https://zhuansunpengcheng.gitee.io/categories/TOOLS/"/>
    
    <category term="hexo" scheme="https://zhuansunpengcheng.gitee.io/categories/TOOLS/hexo/"/>
    
    
    <category term="docker" scheme="https://zhuansunpengcheng.gitee.io/tags/docker/"/>
    
    <category term="hexo" scheme="https://zhuansunpengcheng.gitee.io/tags/hexo/"/>
    
    <category term="gitee" scheme="https://zhuansunpengcheng.gitee.io/tags/gitee/"/>
    
  </entry>
  
  <entry>
    <title>群辉账号记录</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/NAS/%E7%BE%A4%E8%BE%89%E8%B4%A6%E5%8F%B7%E8%AE%B0%E5%BD%95/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/NAS/%E7%BE%A4%E8%BE%89%E8%B4%A6%E5%8F%B7%E8%AE%B0%E5%BD%95/</id>
    <published>2022-10-31T10:57:46.473Z</published>
    <updated>2022-10-31T10:57:46.473Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="4be9c8de337a36f5c02179b67d9cfad1f642d07fbf6d176a86458e03a80fd22c">8c00d3d27fb3c22fd589b44480636208283bc4f252b9d9a315fe285b7e6fdd7f040724276ec08c489420b90c8e21145acc43110f03f7fe3eefb93e8ba6e7e4cb876f1f0478b058ee159e146e9724b08ae391d5aec20cd36e50259ad57fc80c2f166004294253bc1fec67af272043a27e00e913c4b6d86ce8423eb5df007a92808c7df58acf9eafd3c4962c08761b5d0415f803a75cbaf68524bb96621b024b07f941b875cd53a8e714833ec079b85def3f438b0533607cd62eafeb3138025bfffc4561bbdd2e44f69e3645a60b7b019a3211e5f8750c32b14d653ac832ffa0381c6bfab9679b391a21a12d454a8e8528e7f2d93163ae3b161384a1b0f90259160fe44f6384627eecb3aefce05710c977c3c5e8f2853541e371ac69697ab26a4393b28aa659ebcf1d4f63813ae7f96ef430be912213c91ae42d7fe7b129a5d7972c11bee7b2c217d80a00fd66b9a32df0848c038f97c62ff370e89fff2a2f44c9375a91180da775d5601d7bf51c47fc5a8dfe0145a17a5e51aecc9e4cfc5ce935e8819d8dc1e67c342c66ada4c0c533d9202dbcbb2431b7d82ac955c2de6cd4331155c88043842071a9d7c94634c897d0f22d08ff7b5b2a49fefb10005696834b6f8f83d727079b6ea65f483dee410f8f3da7b7b6240eeb95c11d8f7e66c281200959b0bce2627997277278384a202a65a31714843c3292f6e80f8efbdda7ae2d35aea10c60a03574aefe7bd1835728435c4ed4da1a16af2b7d63e2c422458034fddd4bcc32e19c1e853dac1e53949dd4701b9b97782dcc9a36c9b60315ea6c495c1c4a0741df5f9f6af82b93b2d298c7df7c482ec785aaa8938771af05f25049959b948eef6c171c3923501630e3851ef75d0b343c439f8281dd824bf40b228084b02b7899f8380c860bbb181bd22844403c8c130d52be19f1201a3e7a2a28274cea200ea3d70edab3c64ad2a7de3b6fdbd72030a24be9c2a6520fadb0f73b06a568b6d861bc1d80216b0a339cfbc779e6cfbf9a938197e75807f838819773f6bf00154e98241b2430efff98ed26391939dfbd6da19b2b6dc6a9ca45dda60828e272d3e08e337d55e6c928c3383e734280efa931d139961e43d70ec92911063117abfa97219c918595f53fb1d3154b02670a7fdb24b1fbaf1b8ce13745a14c68cbb9933fdbf89f4a4fa8216b1815c0964fc459295adc141f90390f503911146243dd705341b52cbd18e738c22a876a43630ab624d2d312d251297ac8313526066b0caacd5ef67787f6b82ec11154ab0daa30f6e2acaae615407a2218259d528aeb3e861b4e5c15e6a32d48aab9d1d19c2eadb307b9fc54c1cf011eba77ba1db7e02b9895f21167ae2569ae1371374cd396913fd6f597e78042cd99f882e7e98df64033641bdc5be0e78a4f42696d9723b989c56e0d3e10e5a15e30b3b62ca3998422d90464b8c7b768b6669dc519d8737f25e66ec25281bdba87007ce45a46479845b312f1a34d0e0f687779eb28a108ed0fdcc9a6cc3f88a39de40e0c8d31257e539219f428275ecfc915765947e6e9e2ec62f6a49ad4007eac0b976d4656b19cf20064e1ad861ce34f7868ae64e50a33e9e82fe210e8f3b70731e1678c3fa9a7b603209fd41a56349a49a6930fa28791065806c6621950a99c35292864d9e5b9001942de6699a64c623ff2f5401e1520070c48c8aee798f1f85b59ebdd1af505d37d9556692052b7bc575bde65504289a826384915cc65d6f5846b1e0ee3ae06a6da62e6a8c6f9a6df3509c455a7c70aee245a25910f524f7e8e9846a82300d16d5ffc16fc3d54c87e8d4654d95099204a9f2bd93a1a37faac050c644267ffd9494d2480ec5d5e94a557c2e4ff70b34004aa4feeaecb723120d1dd9f03ad31e94b71c79a6648684af610fffaa7b3f3190ac9b5590dc782b05cc738063c7332feff87407d9b38fff7d91c6822d696b803bf3eb189edb8e5f95c6a4a2421e58df94fdc2cae09bd0f24f5d430f5f8cbcfbc5aa3dbeb31505c441a3bacd0e9599bd57f99adcfb1fd54ee5fbe3377815417282d3504483d137ac179a4af1313ce95f8499029a5e2f4bc40ec73384abe6b3f79ee8fa3510eed18184125c814e9f4d85955f6e9b18081c28017f3b6516086aa523ec1da6bde18fa73ac2a18c1641d8df69ff607917fe6fc984cdf081c8691d93b3c4a67d7c91ef9f407e3ab6d11a39bb4fff447dfc57164147f508bc6c1085be3fcc3d2851f9cfc6865e5dc5033e0168f71929f644a4a885829f3b57c5b95ebe39ad8fab6c24ea85fcfd21a84ec0065ee3d3415cb2d0be071f7f169e5b15cff717872ce7979588aea927d3b5540c5128b0d3b4a92d6f56c50e33d6249ecd340e0f661a30bb177708c06c601739ed095af42b71b5dee36511e90343f34d114be9136b8140e541722d364ba3ddceb638d972c7adc8febdc6d6584e25bef8f9437c4a2274cd89ac6f31a503eb4f4c35fca8f066405baa0b2581c78dc03274213278ec5a977475375f983497798a470125172771626c0222a99c411a6b6459b29a7a034cfdada6ee73ec38c68f9ad51d835451b02cc29760deb002ef52a04210defa00936a9e7504bddd071c477b04f01e215f69d613aeba1ee2adb0a414485a838292b48ef02b9819ca6da3135271c927517656eefff79397378bdaa913c17e6a3d6800bde44451b3602f4a9e659f5073e18f7ea9db16bcddda03177422fe828189d5a3b53c76d6ac9aee925abcef1d11585bf4b31912815d11ffe3029d5ed4ad89055efe3d445f1324e27a1e1a48ca2d594e082fde4f3599506f4344d97acb28a25d218bf82fad5b54e609ad56c7815ff69709c15193ce761777d8ca1c929cfd9ff573c10adece11d092685b44bdc1e6ed89c0b31319661f0e4144c53a58512509ca4df49c9a84654ec0a6d7e1172deed2fb1db369a5d56f2665b7372c15dacc2c98196e7242a27060ddd05f4cd6d68c71eea4a7277fb7009b7a6b8b1af274f149274fa03d4c495f4f8fe3e7b5ebf60d3f8a5478c616052135fb68d1c87b7fadcacd66b52173d6db996fe8ae7b008e7e2abefb0fd8d0fa1a17046783b5e538bc9ba8861dfc32c1e7a8ebdf838a9ac7c47c66a9c5b8b26a2857c29d8999055509bd7fdf6461b11812c8ee2d54bb4c3cf6169e16ecf04210f7f9133cf57d10e3a8f49dbe4c80cc6e1534a735ed360391ba7a91a5529da6158b55ea98c5e13d933cf1ed572b5794b1c61147d77b26809f216b5f521b5cc51f4eaf3f474e800d1da3cd1af9a8d6d00bc9f1b49bb50d961f38225705a15242b1dfd42861433a7e141de32bd427559fbeac01deb50b72aec203aee6a92957247308d4151d49720e43e061deac6e9a0006abed47a2db490a2cbb1d53ab37dd9b8c452aaef5d00c521630a6cb4ad3e25fe9cf082af714fc2e7dbdb48967fa6e3cb9893d35a0051f1ae1146476d1ba4d02418eb19a4a6f346552e93560f6ef1dcf3eec9b62783948f7bcf5c6eba59054bc31e6f84be26d43fa54bb491693baee23835048da00646ea97dec4506144883372cfa68872a72917bf7f8e5ae2993e8f77a9d04da5bbffe762691d</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">Here&#39;s something encrypted, password is required to continue reading.</summary>
    
    
    
    <category term="NAS" scheme="https://zhuansunpengcheng.gitee.io/categories/NAS/"/>
    
    
    <category term="个人账号" scheme="https://zhuansunpengcheng.gitee.io/tags/%E4%B8%AA%E4%BA%BA%E8%B4%A6%E5%8F%B7/"/>
    
  </entry>
  
  <entry>
    <title>时效项目</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/PROJECT/%E6%97%B6%E6%95%88%E9%A1%B9%E7%9B%AE/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/PROJECT/%E6%97%B6%E6%95%88%E9%A1%B9%E7%9B%AE/</id>
    <published>2022-10-31T10:57:46.473Z</published>
    <updated>2022-10-31T10:57:46.473Z</updated>
    
    <content type="html"><![CDATA[<h1 id="时效项目"><a href="#时效项目" class="headerlink" title="时效项目"></a>时效项目</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>再快递的行业中，一个快递单号（称之为运单），在整个生命流程中，可能会产生各种各样的异常：比如丢失，退件，滞留等等各种；在这些异常中，有一种异常叫做时效异常；</p><p><strong>什么是时效异常？</strong>当我们在网上购买商品之后，都希望自己的商品能尽快送到自己手中，但是快递的流转是有自己的规则的，比如必须揽收，必须过分拨，派送，签收等等。作为快递公司，也希望能够尽快把货物送到用户手中，所以快递公司会对站点有时效性的要求：比如12H内揽收，发运在24H内需要到分拨，需要在24H内派送完成等等；如果站点完成不了这些要求，快递公司会对站点罚款。那么当这些单子不满足要求的时候，就会产生异常。我们叫做时效异常；</p><p><strong>需要做什么？</strong>时效项目做得是监听丰网所有的运单，从下单开始监控，监控运单的整个生命周期中的所有扫描信息，会不会产生时效异常。目前我们定义的时效异常有12种；每一个运单在下单之后，到签收的过程中，可能会产生0个或者多个异常；</p><table><thead><tr><th><strong>异常类型</strong></th><th><strong>判定规则</strong></th></tr></thead><tbody><tr><td>即将超时待揽收</td><td>下单后12h没有揽收</td></tr><tr><td>超时待揽收</td><td>下单后24h没有揽收</td></tr><tr><td>即将发运超时</td><td>揽收后12h没有到分拨</td></tr><tr><td>发运超时</td><td>揽收后24h没有到分拨</td></tr><tr><td>末端网点未到件</td><td>末端分拨发件后12h没有到末端网点</td></tr><tr><td>即将派签超时</td><td>派件后，12h没有签收</td></tr><tr><td>派签超时(24H-48H)</td><td>派件后，24h没有签收</td></tr><tr><td>派签超时(48H-72H)</td><td>派件后，48h没有签收</td></tr><tr><td>派签超时(72H以上)</td><td>派件后，72h没有签收</td></tr><tr><td>入库24H-48H未取</td><td>入库后，12h没有取出</td></tr><tr><td>入库48H-72H未取</td><td>入库后，48h没有取出</td></tr><tr><td>入库超72H未取</td><td>入库后，72h没有取出</td></tr></tbody></table><h2 id="难点"><a href="#难点" class="headerlink" title="难点"></a>难点</h2><p>请求量大：目前丰网的订单量在500万，扫描量每天亿级别；平均每分钟的吞吐量在7万，高峰期吞吐量在15万；</p><p>数据量大：订单量每天500万左右，需要存储3个月的数据：500万 * 90天 &#x3D; 45亿的数据</p><p>实时性高：要求产生时效异常之后，网点立马跟进处理，所以实时性要求很高；出现异常，立马感知到；</p><p>变化频繁：由于政策的变化，时效异常的考核可能不同，比如暴雨，疫情，政策等原因，部分时效异常的判定规则会有变化；</p><h2 id="数据量"><a href="#数据量" class="headerlink" title="数据量"></a>数据量</h2><h4 id="订单量"><a href="#订单量" class="headerlink" title="订单量"></a>订单量</h4><ul><li>高峰期每分钟70K左右</li></ul><p><img src="/%E6%97%B6%E6%95%88%E9%A1%B9%E7%9B%AE.assets/image-20220822170909082.png" alt="image-20220822170909082"></p><h3 id="扫描量"><a href="#扫描量" class="headerlink" title="扫描量"></a>扫描量</h3><ul><li>高峰期每分钟180K左右</li></ul><p><img src="/%E6%97%B6%E6%95%88%E9%A1%B9%E7%9B%AE.assets/image-20220822171224234.png" alt="image-20220822171224234"></p><h2 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h2><ol><li><p>sfboot（基础springboot 2.2.2.RELEASE）</p></li><li><p>kafka</p></li><li><p>本地缓存：caffeine</p></li><li><p>中间件缓存：redis</p></li><li><p>JexlEngine 执行表达式（hutool 工具包）</p></li><li><p>mycat</p></li><li><p>延迟队列：redission</p></li></ol><h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>开始是4C8G（最大堆6G）；后面升级为6C8G（最大堆6G）</p><p><img src="/%E6%97%B6%E6%95%88%E9%A1%B9%E7%9B%AE.assets/image-20220906143903876.png" alt="image-20220906143903876"></p><p>数据库</p><p>初始数据库【已废弃】</p><p><img src="/%E6%97%B6%E6%95%88%E9%A1%B9%E7%9B%AE.assets/image-20220906143740394.png" alt="image-20220906143740394"></p><p>最新的数据库</p><p><img src="/%E6%97%B6%E6%95%88%E9%A1%B9%E7%9B%AE.assets/image-20220906143812882.png" alt="image-20220906143812882"></p><h2 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h2><h4 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h4><h5 id="整体UML图"><a href="#整体UML图" class="headerlink" title="整体UML图"></a>整体UML图</h5><h5 id="表概念说明"><a href="#表概念说明" class="headerlink" title="表概念说明"></a>表概念说明</h5><p>描述每张表的作用是什么</p><table><thead><tr><th>表名</th><th>含义</th><th>描述</th></tr></thead><tbody><tr><td>ag_aging_object</td><td>引擎模块-时效对象定义表</td><td>时效对象的定义</td></tr><tr><td>ag_aging_status</td><td>引擎模块-运单状态定义表</td><td>表示当前时效对象关注的运单状态，不同的时效对象关注的状态可能不一样</td></tr><tr><td>ag_operate_action</td><td>引擎模块-操作动作定义表</td><td>消费运单和扫描，映射成引擎关注的动作：下单，网点类型扫描等</td></tr><tr><td>ag_aging_factor</td><td>引擎模块-时效因子定义表</td><td>定义因子，一般是基础表中的字段</td></tr><tr><td>ag_operate_element</td><td>引擎模块-操作要素定义表</td><td>加减乘除比较符的定义</td></tr><tr><td>ag_status_action</td><td>引擎模块-操作动作状态表</td><td>定义哪些动作可能产生哪些状态：比如下单产生待揽收；</td></tr><tr><td>ag_aging_rule</td><td>引擎模块-运单状态规则表</td><td>运单状态的判定规则 组合</td></tr><tr><td>ag_aging_rule_detail</td><td>引擎模块-运单状态规则详情表</td><td>每一个规则的详细判定逻辑</td></tr><tr><td>ag_aging_warn_rule</td><td>引擎模块-时效异常规则表</td><td>异常的判定规则</td></tr></tbody></table><h4 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h4><h5 id="kafka流转图"><a href="#kafka流转图" class="headerlink" title="kafka流转图"></a>kafka流转图</h5><h4 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h4><h5 id="一个运单的状态判断流程"><a href="#一个运单的状态判断流程" class="headerlink" title="一个运单的状态判断流程"></a>一个运单的状态判断流程</h5><h5 id="一个异常的产生流程"><a href="#一个异常的产生流程" class="headerlink" title="一个异常的产生流程"></a>一个异常的产生流程</h5><h4 id="引擎的配置"><a href="#引擎的配置" class="headerlink" title="引擎的配置"></a>引擎的配置</h4><h5 id="引擎-运单状态的判定规则"><a href="#引擎-运单状态的判定规则" class="headerlink" title="引擎-运单状态的判定规则"></a>引擎-运单状态的判定规则</h5><table><thead><tr><th><strong>运单状态</strong></th><th><strong>规则判定</strong></th><th><strong>运单状态的产生时间</strong></th><th><strong>运单状态的产生站点</strong></th></tr></thead><tbody><tr><td>待揽收</td><td></td><td>ORDER_TIME</td><td>SEND_SITE</td></tr><tr><td>已揽收</td><td></td><td>REC_TIME</td><td>REC_SITE</td></tr><tr><td>始发分拨到件</td><td></td><td>FIRST_CENTER_ARR_TIME</td><td>FIRST_CENTER</td></tr><tr><td>始发分拨发件</td><td></td><td>FIRST_CENTER_SEND_TIME</td><td>FIRST_CENTER</td></tr><tr><td>末端分拨到件</td><td></td><td>END_CENTER_ARR_TIME</td><td>END_CENTER</td></tr><tr><td>末端分拨发件</td><td></td><td>END_CENTER_SEND_TIME</td><td>END_CENTER</td></tr><tr><td>末端网点到件</td><td></td><td>END_SITE_TIME</td><td>END_SITE</td></tr><tr><td>派件中</td><td></td><td>DISP_TIME</td><td>DISP_SITE</td></tr><tr><td>已入库</td><td></td><td>BOX_IN_TIME</td><td>BOX_IN_SITE</td></tr><tr><td>已取消</td><td></td><td>CANCEL_TIME</td><td></td></tr><tr><td>已签收</td><td></td><td>SIGN_TIME</td><td>SIGN_SITE</td></tr><tr><td>转寄</td><td></td><td>TRANSFER_TIME</td><td></td></tr><tr><td>退回</td><td></td><td>RETURN_TIME</td><td></td></tr><tr><td>换单&#x2F;作废</td><td></td><td>CHANGE_INVALID_TIME</td><td></td></tr></tbody></table><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="kafka扫描消费积压"><a href="#kafka扫描消费积压" class="headerlink" title="kafka扫描消费积压"></a>kafka扫描消费积压</h3><p>现象：</p><p>原因：扫描量太大，应用处理不完</p><p>解决办法：多线程（线程不能开太多，会导致cpu升高，同时线程太多，也会有部分线程堵塞，因为查库慢，只能等着），分TOPIC（本质上还是多个线程处理），升级CPU</p><h3 id="应用CPU升高"><a href="#应用CPU升高" class="headerlink" title="应用CPU升高"></a>应用CPU升高</h3><p>现象：</p><p>原因：线程数加的太多了</p><p>解决办法：</p><h3 id="数据库CPU升高"><a href="#数据库CPU升高" class="headerlink" title="数据库CPU升高"></a>数据库CPU升高</h3><p>现象：有job再跑，十分钟升高一次； 数据量大，读库不稳定，快的时候5ms，慢的时候200ms；</p><p>解决办法：</p><h3 id="数据延迟"><a href="#数据延迟" class="headerlink" title="数据延迟"></a>数据延迟</h3><p>初版的时候，因为kafka积压，会导致运单状态变更不及时，即使运单已经签收了， 在kafka中堵了4小时，此时产生了原本不应该产生的异；</p><p>原因：kafka堵了。kafka堵的原因是因为数据库层面性能瓶颈；暂未解决</p><p>解决办法：将延迟队列中的数据，扔到扫描的kafka后面去；</p><h3 id="运单基础信息表合并"><a href="#运单基础信息表合并" class="headerlink" title="运单基础信息表合并"></a>运单基础信息表合并</h3><p>现象：经过上面的多次优化，对一个扫描的处理，最终只能稳定在20-30ms左右，通过arthas查看，基本是卡在对库的操作上；</p><p>解决办法：升级mycat层的cpu（升级后8C16G 16个分片8C16G），但是效果不好；最终新购买了一个mycat集群（16C32G，32个分片4C8G）</p><ul><li>将原来的5张表缩减为1张表（非必要字段由下游业务自己填充）</li><li>运单信息由上游通过kafka扔给下游，避免下游在多一次查库</li><li>更新数据之前，判断所有的字段是否相同，如果相同，就不在操作数据库（减少一次数据库的更新）</li></ul><p>数据量大的时候，cpu会升高</p><p><img src="/%E6%97%B6%E6%95%88%E9%A1%B9%E7%9B%AE.assets/image-20221024153613762.png" alt="image-20221024153613762"></p><p>这个时候，去看应用的那个线程占用的cpu比较高？</p><p><img src="/%E6%97%B6%E6%95%88%E9%A1%B9%E7%9B%AE.assets/image-20221024153657174.png" alt="image-20221024153657174"></p><p>可以看到是消费运单状态的消费者，占用cpu比较多。用的是arthas的thread命令。</p><p>优化办法：在当前的配置下，这个部署单元，一秒钟消费的能力是有限的，如果上游给100W的数据，我们1分钟内可以消费100W的数据，但是代价是cpu升到90%，为了保证我们的CPU不超过80%，就不要再1分钟内消费这么多的数据，可以通过限制入口的扫描量，来控制。</p><p>可以通过滑动时间窗口的算法来限制。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;时效项目&quot;&gt;&lt;a href=&quot;#时效项目&quot; class=&quot;headerlink&quot; title=&quot;时效项目&quot;&gt;&lt;/a&gt;时效项目&lt;/h1&gt;&lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h</summary>
      
    
    
    
    <category term="PROJECT" scheme="https://zhuansunpengcheng.gitee.io/categories/PROJECT/"/>
    
    
    <category term="项目" scheme="https://zhuansunpengcheng.gitee.io/tags/%E9%A1%B9%E7%9B%AE/"/>
    
    <category term="时效" scheme="https://zhuansunpengcheng.gitee.io/tags/%E6%97%B6%E6%95%88/"/>
    
  </entry>
  
  <entry>
    <title>看电影</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/NAS/%E7%9C%8B%E7%94%B5%E5%BD%B1/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/NAS/%E7%9C%8B%E7%94%B5%E5%BD%B1/</id>
    <published>2022-10-31T10:57:46.472Z</published>
    <updated>2022-10-31T10:57:46.472Z</updated>
    
    <content type="html"><![CDATA[<img src="看电影.assets/image-20220929172042541.png" alt="image-20220929172042541" style="zoom: 67%;" />]]></content>
    
    
      
      
    <summary type="html">&lt;img src=&quot;看电影.assets/image-20220929172042541.png&quot; alt=&quot;image-20220929172042541&quot; style=&quot;zoom: 67%;&quot; /&gt;</summary>
      
    
    
    
    <category term="NAS" scheme="https://zhuansunpengcheng.gitee.io/categories/NAS/"/>
    
    
    <category term="电影" scheme="https://zhuansunpengcheng.gitee.io/tags/%E7%94%B5%E5%BD%B1/"/>
    
  </entry>
  
  <entry>
    <title>群辉的SSH</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/NAS/%E7%BE%A4%E8%BE%89%E7%9A%84SSH/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/NAS/%E7%BE%A4%E8%BE%89%E7%9A%84SSH/</id>
    <published>2022-10-31T10:57:46.472Z</published>
    <updated>2022-10-31T10:57:46.472Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="89a74af18b3fadbdbf48384e172af6def4904445c666bdcd926d69ec131d0dc8">8c00d3d27fb3c22fd589b44480636208283bc4f252b9d9a315fe285b7e6fdd7f930a20fa3f69a5692dc74a7bfb3323d7e419308d04e4d1b2c69d6ce874d15309d9b162fc742adecea1031d6df21b4970298cac3e5f2c75a9773931a94ddbd44d82b561c49a1b41237030cec8a279f390d19b6c0e8e9445c6208e1dd88fdd5bd073919cb914a7302022c8b7134022ff8d8ffd9e17841462ef970cc3a330c9ed4b9e221ce8a1c472a795238e964e6a9bd39568d3ffb023b9bc150a23e5b94b3e472d35e981d51e9b1572cc8b2fab654670b4de33ec8ac492d501ec51ea8df2ef5b5d2b46cd2510351b4efc93ef1de3567119a316f11dcb488fa3435ec0ef7e5640f22a0c234b5d23a03246e045960a49c8405be82177305068354452b4a0d6f757f0ab3f5293a708f2683055c48382288dc61763ed5116eeba89374b81210b6b7ae891fd510f624f99bdd10a28537060f6125b9435738e1ee43ce46a3dd608f1399e987f29eaef971c0369b9a0e2d671b2f141f106b2859fe1ba00bd3c55b9a7105aa9e57910b314839c2cf1948d54e7fe780e0d241387ea446e6fd6d2b726e91ed597fecdbb6f1baf9a80192119a71c0dfe57c2df5c97bbe8ee2c1571eab5d01a959c014a389864b18142644f8b4001184c72a99a440e4999187b84c10abb308fe1ad28847c8ae2ab26b8f5223d5a0737b643702de328933a40909629e7f5ef4003634de8a5796156940b8482e36827fe015f2e4e18edc63feb5fa45f0da7061b528d9aac93f910d48642a7d44df5be7c5ea847f539e60d63bd94d4b326c6d4aaad071d97c9b7ae3d6e75327c0833b6bc65b3f3439d2028c282d965576dc54a920f12f65c925b620d711d6442656fbbc1c8b0aa800d6cce48c90fbe2f9146bfcdb7fe2522b1d649ee7541233c45b620be3122aa7b80e15989b0887cc138e48b554263b16418bc28fbaf7aee0f8bb2a099472d1ccbeda82a0cb9b9f952543b80ced08298fcf4ff688a50500d65041b9402</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">Here&#39;s something encrypted, password is required to continue reading.</summary>
    
    
    
    <category term="NAS" scheme="https://zhuansunpengcheng.gitee.io/categories/NAS/"/>
    
    
    <category term="个人账号" scheme="https://zhuansunpengcheng.gitee.io/tags/%E4%B8%AA%E4%BA%BA%E8%B4%A6%E5%8F%B7/"/>
    
  </entry>
  
  <entry>
    <title>通过docker安装mysql5.7.19并解决中文乱码问题的方法</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%AE%B9%E5%99%A8/DOCKER/docker%E5%AE%89%E8%A3%85mysql5719%E5%B9%B6%E8%A7%A3%E5%86%B3%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%AE%B9%E5%99%A8/DOCKER/docker%E5%AE%89%E8%A3%85mysql5719%E5%B9%B6%E8%A7%A3%E5%86%B3%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/</id>
    <published>2022-10-31T10:57:46.471Z</published>
    <updated>2022-10-31T10:57:46.471Z</updated>
    
    <content type="html"><![CDATA[<h1 id="通过docker安装mysql5-7-19并解决中文乱码问题的方法"><a href="#通过docker安装mysql5-7-19并解决中文乱码问题的方法" class="headerlink" title="通过docker安装mysql5.7.19并解决中文乱码问题的方法"></a>通过docker安装mysql5.7.19并解决中文乱码问题的方法</h1><h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><p>首先安装docker；</p><h2 id="安装mysql5-7-19"><a href="#安装mysql5-7-19" class="headerlink" title="安装mysql5.7.19"></a>安装mysql5.7.19</h2><p>从dokcer仓库下载5.7.19版本的数据，如果不指定版本的话，下载的就是最新的版本，为什么选择5.7.19，因为公司使用的数据库是这个版本，所以就选择这个了。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> pull mysql:5.7.19<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>下载好之后，如果有docker desktop的话，就可以看到了，没有desktop也可以使用命令查询</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">zhuansun@MacBook-Pro ~ % <span class="token function">docker</span> image listREPOSITORY  TAG    IMAGE ID    CREATED    SIZEmysql     <span class="token number">5.7</span>.19   3e3878acd190  <span class="token number">3</span> years ago  412MB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>或者docker desktop</p><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901193908153.png" alt="image-20220901193908153" style="zoom: 50%;" /><h2 id="启动mysql5-7-19"><a href="#启动mysql5-7-19" class="headerlink" title="启动mysql5.7.19"></a>启动mysql5.7.19</h2><p>然后就是启动docker容器了：</p><p>同样的，有两种方式：一种是通过图形化工具docker-desktop；一种是通过命令；</p><h3 id="命令行简单启动"><a href="#命令行简单启动" class="headerlink" title="命令行简单启动"></a>命令行简单启动</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--name</span> mysql5.7.19 <span class="token punctuation">\</span><span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span><span class="token parameter variable">-d</span> mysql:5.7.19<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>解释一下：</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>docker run</td><td>没什么说的</td></tr><tr><td>-p 3306:3306</td><td>指定mysql的端口，前面是本机端口，后面是容器端口；如果容器已经起了一个3306的mysql，你想在启动一个mysql，就得把后面的端口改了。</td></tr><tr><td>–name mysql5.7.19</td><td>容器启动后的名字，只是个名字</td></tr><tr><td>-e MYSQL_ROOT_PASSWORD&#x3D;123456</td><td>docker启动mysql必须要设置密码的，这里是直接设置了root密码，也可以通过其他命令指定新的用户名和密码。网上搜就有</td></tr><tr><td>-d mysql:5.7.19</td><td>使用mysql:5.7.19这个版本的镜像</td></tr></tbody></table><h3 id="docker-desktop简单启动"><a href="#docker-desktop简单启动" class="headerlink" title="docker-desktop简单启动"></a>docker-desktop简单启动</h3><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195130908.png" alt="image-20220901195130908" style="zoom: 50%;" /><ul><li><p>和命令行方式比较一下，就知道啥意思了。但是docker-desktop没找到哪里设置用户名和密码。所以我最终选择是使用命令行方式；</p></li><li><p>但是我们注意到dokcer-desktop下面有一个Volume卷的设置，命令行没有，它是什么意思呢？</p></li><li><p>它表示可以把容器中的数据和本地的数据进行互通；</p></li><li><p>我们知道容器一旦被关闭，或者重启，所有的数据都会丢失；所以我们要把容器中的数据映射到本地磁盘，就是这个意思。</p></li><li><p>不过，上面说了，我们使用命令行的方式启动mysql，那么命令行怎么映射呢？</p></li></ul><h3 id="命令行完整启动"><a href="#命令行完整启动" class="headerlink" title="命令行完整启动"></a>命令行完整启动</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--cpus</span> <span class="token number">2</span> <span class="token parameter variable">-m</span> 4GB <span class="token parameter variable">--name</span> mysql5.7.19 <span class="token punctuation">\</span><span class="token parameter variable">-v</span> /Users/zhuansun/workspace/docker/mysql5.7.19/conf:/etc/mysql <span class="token punctuation">\</span><span class="token parameter variable">-v</span> /Users/zhuansun/workspace/docker/mysql5.7.19/logs:/var/log/mysql <span class="token punctuation">\</span><span class="token parameter variable">-v</span> /Users/zhuansun/workspace/docker/mysql5.7.19/data:/var/lib/mysql <span class="token punctuation">\</span><span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span><span class="token parameter variable">-d</span> mysql:5.7.19<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>解释一下：</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>-v</td><td>-v表示将本地的一个文件夹挂载到容器中，容器每次启动的时候，本地的文件都会覆盖到容器中；容器中产生的文件，也会写到本地中。这样保证了数据的持久化</td></tr><tr><td>–cpus</td><td>配置cpu，有时候mysql跑的太快，cpu直接就满了，这里可以配置cpu，后面跟的数据，是cpu的核数</td></tr><tr><td>-m</td><td>配置内存，默认内存是2G，可以通过 docker stats 查看</td></tr></tbody></table><ul><li>然后在docker-desktop中也可以看到启动后的app</li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195155480.png" alt="image-20220901195155480" style="zoom:50%;" /><h2 id="datagrip连接mysql"><a href="#datagrip连接mysql" class="headerlink" title="datagrip连接mysql"></a>datagrip连接mysql</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">localhost<span class="token number">3306</span>root<span class="token number">123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>datagrip也可以连接成功</li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195211507.png" alt="image-20220901195211507" style="zoom:50%;" /><h2 id="中文乱码问题的发现"><a href="#中文乱码问题的发现" class="headerlink" title="中文乱码问题的发现"></a>中文乱码问题的发现</h2><ul><li><p>我以为到这儿就结束了，其实不是的。</p></li><li><p>因为我在mysql中创建了一个数据库，然后创建了一个表，通过代码插入一条记录之后，发现，妈的，乱码了。</p></li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195229189.png" alt="image-20220901195229189" style="zoom:50%;" /><ul><li><p>然后排查为什么会乱码：</p></li><li><p>这是因为我们的mysql通过docker启动之后，默认的编码其实并不是utf8，而是latin1；这就导致了中文乱码的原因。</p></li><li><p>通过</p></li></ul><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">show variables like &#39;%char%&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>也可以验证这个问题</p><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195253309.png" alt="image-20220901195253309" style="zoom:50%;" /><h2 id="中文乱码问题的排查思路"><a href="#中文乱码问题的排查思路" class="headerlink" title="中文乱码问题的排查思路"></a>中文乱码问题的排查思路</h2><ul><li><p>那么怎么办呢？就需要修改mysql的配置文件了。</p></li><li><p>这里必须要吐槽一下百度，搜出来的东西，他娘的，都是狗屎；</p></li><li><p>搜索关键字：mac mysql 5.7.19 中文乱码</p></li><li><p>然后百度建议：修改etc下的my.cnf；他娘的，根本没有这个文件好不好。</p></li><li><p>最后还是搜索了好久好久，一直折腾到大半夜，才找到原因</p></li><li><p>在mysql5.7.18版本之前，在etc下会有一个my-default.cnf的文件（网上搜的，没有验证），然后我们安装好mysql之后，把这个文件改个名字就可以了。作为全局配置，但是后续版本，mysql把他删掉了。所以我使用的5.7.19是没有的。</p></li><li><p>那么5.7.19的配置文件在哪里呢？</p></li><li><p>应该是在etc&#x2F;mysql&#x2F;这个文件夹下面，但是我登录我的容器一看：这个文件夹下面是空的？卧槽？</p></li><li><p>后续排查发现，因为我们使用了</p></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token parameter variable">-v</span> /Users/zhuansun/workspace/docker/mysql5.7.19/conf:/etc/mysql <span class="token punctuation">\</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>所以我们本地的文件覆盖了容器中的内容；本地的文件夹是空的，所以容器里面技术空了。</p></li><li><p>那么没办法了，我又重新启动了一个mysql-dokcer叫做 mysql5.7.19-1，然后没有指定-v,同时还得修改端口，要不然端口就冲突了；</p></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3307</span>:3307 <span class="token parameter variable">--name</span> mysql5.7.19-1 <span class="token punctuation">\</span><span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span><span class="token parameter variable">-d</span> mysql:5.7.19<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>这样我们创建了一个新的mysql容器，登录进去看看：</li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195552187.png" alt="image-20220901195552187" style="zoom:50%;" /><ul><li>通过docker-desktop登录进去看看：</li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195603660.png" alt="image-20220901195603660" style="zoom:50%;" /><ul><li>进入到容器中，我们可以看到其实 etc&#x2F;mysql下面是有配置文件的。</li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195615455.png" alt="image-20220901195615455" style="zoom:50%;" /><ul><li><p>这样就验证了我们之前的猜测，就是本地的空文件夹把mysql里的配置文件给覆盖掉了。</p></li><li><p>那么怎么办呢？ 我得改配置文件啊。得想办法把配置文件放在本地文件夹中，然后再次重启容器，配置文件就可以加载进去了。</p></li><li><p>怎么把配置文件复制到本地呢？</p></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> cp:mysql5.7.19-1:/etc/mysql /Users/zhuansun/workspace/docker/mysql5.7.19/conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>好了，用上面的命令就可以解决了，但是复制下来之后，发现，我草？这么多文件不知道改哪一个，而且怎么还有一个 连接 文件。</li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195651594.png" alt="image-20220901195651594" style="zoom:50%;" /><ul><li>继续百度吧，又被恶心到了一圈。最终决定还是靠自己，但是还是搜到一些有用的东西的。关于这个链接文件是什么？</li><li>其实并不是所有的配置文件都在etc下面的，mysql配置文件分为全局配置，和用户配置；是放在不同的地方的，但是<strong>会通过一个链接文件，链接过来</strong>；</li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195658976.png" alt="image-20220901195658976" style="zoom:50%;" /><ul><li>所以按照这个思路，我们去 mysql5.7.19-1 中去看看，链接文件都连接到哪里啦。</li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195805841.png" alt="image-20220901195805841" style="zoom:50%;" /><ul><li>打开这两个文件，看看</li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901195823380.png" alt="image-20220901195823380" style="zoom:50%;" /><ul><li><p>打开之后可以看到一个文件是用来配置 mysql 的一个文件是用来配置mysqld的，</p></li><li><p>到这里就比较明确的，我们把设置编码的命令设置进来。像下面这个样子。注意要在本地的文件夹中修改哦：只需要修改mysqld.cnf就行了，因为它是全局的</p></li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># Copyright (c) 2014, 2016, Oracle and/or its affiliates. All rights reserved.</span><span class="token comment">#</span><span class="token comment"># This program is free software; you can redistribute it and/or modify</span><span class="token comment"># it under the terms of the GNU General Public License as published by</span><span class="token comment"># the Free Software Foundation; version 2 of the License.</span><span class="token comment">#</span><span class="token comment"># This program is distributed in the hope that it will be useful,</span><span class="token comment"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span><span class="token comment"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span><span class="token comment"># GNU General Public License for more details.</span><span class="token comment">#</span><span class="token comment"># You should have received a copy of the GNU General Public License</span><span class="token comment"># along with this program; if not, write to the Free Software</span><span class="token comment"># Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA</span>​<span class="token comment">#</span><span class="token comment"># The MySQL  Server configuration file.</span><span class="token comment">#</span><span class="token comment"># For explanations see</span><span class="token comment"># http://dev.mysql.com/doc/mysql/en/server-system-variables.html</span>​<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span><span class="token keyword">character</span><span class="token operator">-</span><span class="token keyword">set</span><span class="token operator">-</span>server<span class="token operator">=</span>utf8collation<span class="token operator">-</span>server<span class="token operator">=</span>utf8_general_cipid<span class="token operator">-</span><span class="token keyword">file</span>    <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>mysqld<span class="token operator">/</span>mysqld<span class="token punctuation">.</span>pidsocket      <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>mysqld<span class="token operator">/</span>mysqld<span class="token punctuation">.</span>sockdatadir     <span class="token operator">=</span> <span class="token operator">/</span>var<span class="token operator">/</span>lib<span class="token operator">/</span>mysql<span class="token comment">#log-error  = /var/log/mysql/error.log</span><span class="token comment"># By default we only accept connections from localhost</span><span class="token comment">#bind-address   = 127.0.0.1</span><span class="token comment"># Disabling symbolic-links is recommended to prevent assorted security risks</span>symbolic<span class="token operator">-</span>links<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">[</span>client<span class="token punctuation">]</span><span class="token keyword">default</span><span class="token operator">-</span><span class="token keyword">character</span><span class="token operator">-</span><span class="token keyword">set</span><span class="token operator">=</span>utf8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901200508795.png" alt="image-20220901200508795" style="zoom:50%;" /><ul><li><p>然后重启docker容器；欣喜若狂</p></li><li><p>结果发现中文还是插入不进来。卧槽？而且查看编码，仍然是拉丁。奇怪了。</p></li><li><p>最后仔细看了一下，发现是拉丁的参数是database级别的。</p></li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901200533956.png" alt="image-20220901200533956" style="zoom:50%;" /><ul><li><p>然后想到，创建数据库之后，数据库是有编码的，因为这个数据库是在修改编码之前创建的，所以他的编码是不会变的。</p></li><li><p>重新创建一个数据库再次测试，发现新的数据库的编码是正确的。</p></li><li><p>至此，中文乱码问题解决。</p></li></ul><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901200554433.png" alt="image-20220901200554433" style="zoom:50%;" /><img src="docker安装mysql5719并解决中文乱码.assets/image-20220901200614121.png" alt="image-20220901200614121" style="zoom:50%;" />]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;通过docker安装mysql5-7-19并解决中文乱码问题的方法&quot;&gt;&lt;a href=&quot;#通过docker安装mysql5-7-19并解决中文乱码问题的方法&quot; class=&quot;headerlink&quot; title=&quot;通过docker安装mysql5.7.19并解决中文</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="部署与容器" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%AE%B9%E5%99%A8/"/>
    
    <category term="DOCKER" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%AE%B9%E5%99%A8/DOCKER/"/>
    
    
    <category term="docker" scheme="https://zhuansunpengcheng.gitee.io/tags/docker/"/>
    
    <category term="mysql" scheme="https://zhuansunpengcheng.gitee.io/tags/mysql/"/>
    
    <category term="乱码" scheme="https://zhuansunpengcheng.gitee.io/tags/%E4%B9%B1%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>promethues和granafa配置</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E7%9B%91%E6%8E%A7/promethues%E5%92%8Cgranafa%E9%85%8D%E7%BD%AE/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E7%9B%91%E6%8E%A7/promethues%E5%92%8Cgranafa%E9%85%8D%E7%BD%AE/</id>
    <published>2022-10-31T10:57:46.470Z</published>
    <updated>2022-10-31T10:57:46.470Z</updated>
    
    <content type="html"><![CDATA[<h2 id="promethues添加新的配置："><a href="#promethues添加新的配置：" class="headerlink" title="promethues添加新的配置："></a>promethues添加新的配置：</h2><p>修改promethues.yml文件</p><img src="promethues和granafa配置.assets/image-20220902160951197.png" alt="image-20220902160951197"  /><p>比如我要添加一个kafka的监控，使用kafka-expoter: 进行如下配置：</p><img src="promethues和granafa配置.assets/image-20220902161001220.png" alt="image-20220902161001220" style="zoom:80%;" /><p>首次启动：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">nohup</span> ./prometheus <span class="token parameter variable">--config.file</span><span class="token operator">=</span>prometheus.yml <span class="token operator">&amp;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>热部署（只加载配置文件，不重启promethues的进程）</p><ul><li><p>找到promethues的进程ID： lsof -i:9090</p></li><li><p>kill -HUP pid</p></li><li><p>观察日志，或者刷新promethus的页面，可以看到新的配置被加载</p></li></ul><img src="promethues和granafa配置.assets/image-20220902161056730.png" alt="image-20220902161056730" style="zoom:80%;" /><img src="promethues和granafa配置.assets/image-20220902161108613.png" alt="image-20220902161108613" style="zoom:80%;" /><p>使用kafka-expoter指定端口号： nohup .&#x2F;kafka_exporter –kafka.server&#x3D;10.13.70.4:9092 –web.listen-address&#x3D;:9309 &amp;</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;promethues添加新的配置：&quot;&gt;&lt;a href=&quot;#promethues添加新的配置：&quot; class=&quot;headerlink&quot; title=&quot;promethues添加新的配置：&quot;&gt;&lt;/a&gt;promethues添加新的配置：&lt;/h2&gt;&lt;p&gt;修改promethu</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="监控" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E7%9B%91%E6%8E%A7/"/>
    
    
    <category term="promethues" scheme="https://zhuansunpengcheng.gitee.io/tags/promethues/"/>
    
    <category term="granafa" scheme="https://zhuansunpengcheng.gitee.io/tags/granafa/"/>
    
  </entry>
  
  <entry>
    <title>kafka从入门到入土</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/KAFKA/kafka%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/KAFKA/kafka%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/</id>
    <published>2022-10-31T10:57:46.465Z</published>
    <updated>2022-10-31T10:57:46.465Z</updated>
    
    <content type="html"><![CDATA[<h1 id="kafka从入门到入土"><a href="#kafka从入门到入土" class="headerlink" title="kafka从入门到入土"></a>kafka从入门到入土</h1><hr><h2 id="kafka中的一些术语"><a href="#kafka中的一些术语" class="headerlink" title="kafka中的一些术语"></a>kafka中的一些术语</h2><img src="kafka从入门到入土.assets/58c35d3ab0921bf0476e3ba14069d291.jpg" alt="img" style="zoom:80%;" /><h3 id="所有名词术语"><a href="#所有名词术语" class="headerlink" title="所有名词术语"></a>所有名词术语</h3><p>消息：Record。Kafka 是消息引擎嘛，这里的消息就是指 Kafka 处理的主要对象。</p><p>主题：Topic。主题是承载消息的逻辑容器，在实际使用中多用来区分具体的业务。</p><p>分区：Partition。一个有序不变的消息序列。每个主题下可以有多个分区。</p><p>消息位移：Offset。表示分区中每条消息的位置信息，是一个单调递增且不变的值。</p><p>副本：Replica。Kafka 中同一条消息能够被拷贝到多个地方以提供数据冗余，这些地方就是所谓的副本。副本还分为领导者副本和追随者副本，各自有不同的角色划分。副本是在分区层级下的，即每个分区可配置多个副本实现高可用。</p><p>生产者：Producer。向主题发布新消息的应用程序。</p><p>消费者：Consumer。从主题订阅新消息的应用程序。</p><p>消费者位移：Consumer Offset。表征消费者消费进度，每个消费者都有自己的消费者位移。</p><p>消费者组：Consumer Group。多个消费者实例共同组成的一个组，同时消费多个分区以实现高吞吐。</p><p>重平衡：Rebalance。消费者组内某个消费者实例挂掉后，其他消费者实例自动重新分配订阅主题分区的过程。Rebalance 是 Kafka 消费者端实现高可用的重要手段。</p><h3 id="kafka的三层消息架构"><a href="#kafka的三层消息架构" class="headerlink" title="kafka的三层消息架构"></a>kafka的三层消息架构</h3><ul><li>第一层：主题层（topic）<ul><li>每个topic可以配置M的分区（partition），而每个分区又可以配置N个副本（Replica）</li></ul></li><li>第二层：分区层（partition）<ul><li>每个分区的N个副本中，只能有一个充当领导者（leader），leader对外提供服务；</li><li>剩下的N-1个副本，都是作为追随者（follower），follower只是作为数据冗余；</li></ul></li><li>第三层：消息层<ul><li>分区中包含若干消息，每个消息的位移（offset）都是从0开始，依次递增；</li></ul></li></ul><h3 id="kafka是如何持久化数据的"><a href="#kafka是如何持久化数据的" class="headerlink" title="kafka是如何持久化数据的"></a>kafka是如何持久化数据的</h3><p>kafka使用消息日志（Log）来保存数据，一个日志就是磁盘上一个只能追加写消息的物理文件。</p><p>一个消息日志（Log）包含了多个日志段（Log Segment）,消息其实是被追加写到最新的日志段中（Log Segment）的；</p><p>当写满一个日志段中（Log Segment）的时候，会自动切分一个新的日志段中（Log Segment），老的日志段中（Log Segment）就会被封存；</p><p>kafka会有一个定时任务，定期检查老的日志段中（Log Segment）是否能够被删除，从而释放磁盘空间；</p><h3 id="两种消息模型"><a href="#两种消息模型" class="headerlink" title="两种消息模型"></a>两种消息模型</h3><p>点对点（peer to peer）</p><ul><li>同一个消息只能被下游的一个消费者消费；</li><li>kafka为了实现点对点，引入了消费者组（Consumer Group）的概念</li></ul><p>发布订阅模型（pub&#x2F;sub）：</p><h3 id="消费者组"><a href="#消费者组" class="headerlink" title="消费者组"></a>消费者组</h3><p>kafka为了实现点对点（同一个消息只能被下游的一个消费者消费），引入了消费者组（Consumer Group）的概念；</p><p>消费者组：多个消费者实例组成一组消费某一个topic，这个topic下的一条消息只能被组中的一个消费者实例消费；</p><h4 id="为什么要引入消费者组"><a href="#为什么要引入消费者组" class="headerlink" title="为什么要引入消费者组"></a>为什么要引入消费者组</h4><p>为了提升吞吐量，假设topic的消息的生产速率不变，增加消费者实例，就可以提升吞吐量；</p><h4 id="重平衡"><a href="#重平衡" class="headerlink" title="重平衡"></a>重平衡</h4><p>当组内的某一个消费者实例挂了，kafka会自动重平衡；将这个死亡的消费者实例原先消费的分区，转移给存活的消费者实例；</p><h3 id="消费者位移（Consumer-Offset）和分区位移（Offset）"><a href="#消费者位移（Consumer-Offset）和分区位移（Offset）" class="headerlink" title="消费者位移（Consumer Offset）和分区位移（Offset）"></a>消费者位移（Consumer Offset）和分区位移（Offset）</h3><p>消费者位移：消费者位移是随时变化的，毕竟它是消费者消费进度的指示器嘛。</p><p>分区位移：表征的是分区内的消息位置，它是不变的，即一旦消息被成功写入到一个分区上，它的位移值就是固定的了。</p><p>举个例子：</p><p>一个消息发送到kafka集群，kafka就会给这个消息并一个编号，这个编号就是“分区位移”；而且这个“分区位移”是固定不变的；</p><p>当有消费者消费的时候，消费者会记录我自己消费到了哪里，这个就是消费者位移；（消息者位移其实并不是记录在消费者端的，而是记录在zk或者kafka中的）；</p><h2 id="kafka的发展历史和定位"><a href="#kafka的发展历史和定位" class="headerlink" title="kafka的发展历史和定位"></a>kafka的发展历史和定位</h2><p>kakka既是一个消息引擎系统，同时又是一个分布式流处理平台；</p><h3 id="kafka的发展历史"><a href="#kafka的发展历史" class="headerlink" title="kafka的发展历史"></a>kafka的发展历史</h3><ul><li><p>是Linkedln公司内部的孵化项目。</p></li><li><p>Linkedln一开始是有 数据强实时性处理方面的需求，用了activeMq，但不理想，所以准备自己搞一套。</p></li><li><p>Kafka 自诞生伊始是以<strong>消息引擎系统</strong>的面目出现在大众视野中的。如果翻看 0.10.0.0 之前的官网说明，你会发现 Kafka 社区将其清晰地定位为一个分布式、分区化且带备份功能的提交日志（Commit Log）服务。</p></li><li><p>kafka在设计之初提供三个方面的特性：</p><ul><li>提供一套 API 实现生产者和消费者；</li><li>降低网络传输和磁盘存储开销；</li><li>实现高伸缩性架构。</li></ul></li><li><p>后来用的人越来越多，kafka思考引入了流处理；</p></li><li><p>Kafka 社区于 0.10.0.0 版本正式推出了流处理组件 Kafka Streams，也正是从这个版本开始，Kafka 正式“变身”为分布式的流处理平台，而不仅仅是消息引擎系统了。</p></li></ul><h3 id="kafka与其他的流处理框架的优点"><a href="#kafka与其他的流处理框架的优点" class="headerlink" title="kafka与其他的流处理框架的优点"></a>kafka与其他的流处理框架的优点</h3><ul><li>第一点是更容易实现端到端的正确性（Correctness）</li><li>kafka自己对于流式计算的定位</li></ul><h3 id="kafka的定位"><a href="#kafka的定位" class="headerlink" title="kafka的定位"></a>kafka的定位</h3><ul><li>消息引擎系统</li><li>流处理平台</li><li>分布式存储系统（很少）</li></ul><h2 id="kafka版本"><a href="#kafka版本" class="headerlink" title="kafka版本"></a>kafka版本</h2><h3 id="kafka发行版本"><a href="#kafka发行版本" class="headerlink" title="kafka发行版本"></a>kafka发行版本</h3><p>kafka存在多个不同的发行版本，类似linux系统中的centos，redhat，ununtu等；</p><table><thead><tr><th>类型</th><th>描述</th><th>优点</th><th>缺点</th><th>选择</th></tr></thead><tbody><tr><td>apache kafka</td><td>Apache Kafka 是最“正宗”的 Kafka，是我们学习和使用 Kafka 的基础。</td><td>优势在于迭代速度快，社区响应度高，使用它可以让你有更高的把控度</td><td>缺陷在于仅提供基础核心组件，缺失一些高级的特性。</td><td>如果你仅仅需要一个消息引擎系统亦或是简单的流处理应用场景，同时需要对系统有较大把控度，那么我推荐你使用 Apache Kafka。</td></tr><tr><td>Confluent Kafka</td><td>Confluent 公司：2014 年，Kafka 的 3 个创始人 Jay Kreps、Naha Narkhede 和饶军离开 LinkedIn 创办了 Confluent 公司，专注于提供基于 Kafka 的企业级流处理解决方案。Confluent Kafka 提供了一些 Apache Kafka 没有的高级特性，比如跨数据中心备份、Schema 注册中心以及集群监控工具等。</td><td>优势在于集成了很多高级特性且由 Kafka 原班人马打造，质量上有保证；</td><td>缺陷在于相关文档资料不全，普及率较低，没有太多可供参考的范例。</td><td>如果你需要用到 Kafka 的一些高级特性，那么推荐你使用 Confluent Kafka。</td></tr><tr><td>CDH Kafka &#x2F; HDP Kafka</td><td>Cloudera 提供的 CDH 和 Hortonworks 提供的 HDP 是非常著名的大数据平台，里面集成了目前主流的大数据框架，能够帮助用户实现从分布式存储、集群调度、流处理到机器学习、实时数据库等全方位的数据处理，不管是 CDH 还是 HDP 里面都集成了 Apache Kafka，因此我把这两款产品中的 Kafka 称为 CDH Kafka 和 HDP Kafka。</td><td>操作简单，节省运维成本</td><td>把控度低，演进速度较慢。</td><td>如果你需要快速地搭建消息引擎系统，或者你需要搭建的是多框架构成的数据平台且 Kafka 只是其中一个组件，那么我推荐你使用这些大数据云公司提供的 Kafka。</td></tr></tbody></table><h3 id="apache-kafka版本号"><a href="#apache-kafka版本号" class="headerlink" title="apache kafka版本号"></a>apache kafka版本号</h3><p>在官网上下载 Kafka 时，会看到这样的版本：</p><img src="kafka从入门到入土.assets/c10df9e6f72126e9c721fba38e27ac23.png" alt="img" style="zoom:80%;" /><p>有些人会误将Scala版本看作是Kafka版本，那么就来解释一下这个版本号</p><ul><li><p>2.11&#x2F;2.12：代表着Kafka源代码的Scala编译器版本</p></li><li><p>2.3.0：才是Kafka的版本号，2代表着大版本号；3代表着小版本号；0代表着修订版本号或补丁</p></li></ul><h4 id="版本号演进"><a href="#版本号演进" class="headerlink" title="版本号演进"></a>版本号演进</h4><p>Kafka目前经历了7个大版本，0.7、0.8、0.9、0.10、0.11、1.0和2.0，其中小版本与Patch版本很多就不一一列举</p><p>在上面的7个大版本中，在哪个版本进行了重大的改进，来好好看一下</p><img src="kafka从入门到入土.assets/Kafka版本变迁.png" alt="img" style="zoom:80%;" /><h5 id="0-7版本"><a href="#0-7版本" class="headerlink" title="0.7版本"></a>0.7版本</h5><p>这是个“上古”版本，只提供了基础的消息队列功能，还没有提供副本机制</p><h5 id="0-8版本"><a href="#0-8版本" class="headerlink" title="0.8版本"></a>0.8版本</h5><p>正式引入了副本机制，能够比较好地做到消息无丢失，新版本Producer API不稳定</p><h5 id="0-9版本"><a href="#0-9版本" class="headerlink" title="0.9版本"></a>0.9版本</h5><p>添加了基础的安全认证&#x2F;权限；新版本Producer API在这个版本中算比较稳定，但是0.9版的Consumer API BUG超多，即使提到社区也不会有人管，所以千万别用！</p><h5 id="0-10版本"><a href="#0-10版本" class="headerlink" title="0.10版本"></a>0.10版本</h5><p>是里程碑式的大版本，因为该版本引入了Kafka Streams，但还不能生产大规模部署使用，自0.10.2.2版本起，新版本Consumer API算是比较稳定了</p><h5 id="0-11版本"><a href="#0-11版本" class="headerlink" title="0.11版本"></a>0.11版本</h5><p>引入了两个重量级的功能变更：一个是提供幂等性Producer API以及事务（Transaction） API；另一个是对Kafka消息格式做了重构</p><p>Producer实现幂等性以及支持事务都是Kafka实现流处理结果正确性的基石，由于刚推出，事务API有一些Bug，另外事务API主要是为Kafka Streams应用服务的，不建议用</p><p>这个版本中各个大功能组件都变得非常稳定了，国内该版本的用户也很多，应该算是目前最主流的版本之一了</p><p>如果你对1.0版本是否适用于线上环境依然感到困惑，那么至少将你的环境升级到0.11.0.3，因为这个版本的消息引擎功能已经非常完善了</p><h5 id="1-0-x2F-2-0版本"><a href="#1-0-x2F-2-0版本" class="headerlink" title="1.0&#x2F;2.0版本"></a>1.0&#x2F;2.0版本</h5><p>合并说下1.0和2.0版本吧，因为这两个大版本主要还是Kafka Streams的各种改进，在消息引擎方面并未引入太多的重大功能特性</p><p>Kafka Streams的确在这两个版本有着非常大的变化，也必须承认Kafka Streams目前依然还在积极地发展着，如果你是Kafka Streams的用户，至少选择2.0.0版本吧</p><h5 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h5><p>不论你用的是哪个版本，都请尽量保持服务器端版本和客户端版本一致，否则你将损失很多Kafka为你提供的性能优化收益</p><h2 id="kafka线上集群部署方案怎么做"><a href="#kafka线上集群部署方案怎么做" class="headerlink" title="kafka线上集群部署方案怎么做"></a>kafka线上集群部署方案怎么做</h2><img src="kafka从入门到入土.assets/image-20220827093241211.png" alt="image-20220827093241211" style="zoom:80%;" /><h3 id="操作系统的选择"><a href="#操作系统的选择" class="headerlink" title="操作系统的选择"></a>操作系统的选择</h3><p>操作系统：Windows，Linux，MacOs</p><p>选择：Linux</p><h4 id="IO模型的使用"><a href="#IO模型的使用" class="headerlink" title="IO模型的使用"></a>IO模型的使用</h4><ul><li>阻塞IO</li><li>非阻塞IO</li><li>IO多路复用</li><li>信号驱动IO</li><li>异步IO</li></ul><p>每种IO都有自己的典型使用场景，比如：</p><ul><li>Java中的Socket对象的阻塞模式和非阻塞模式就是对应前两种；</li><li>Linux系统的select函数就属于IO多路复用</li><li>大名鼎鼎的epoll介入第三种和第四种之间；</li><li>第五种模型，目前很少有Linux支持，然而Windos却在操作系统中提供了叫IOCP线程模型属于第五种</li></ul><p>说完了IO模型，再来看kafka与IO模型的关系</p><ul><li>kafka的底层使用的是java的selector<ul><li>java的selector在linux上的实现机制是：epoll</li><li>而在windos上的实现机制是：select（IO多路复用）</li></ul></li><li>所以，将kafka部署在linux机器上，更有优势</li></ul><h4 id="网络传输效率"><a href="#网络传输效率" class="headerlink" title="网络传输效率"></a>网络传输效率</h4><p>kafka的消息是通过网络传输的，而消息又是保存在磁盘中的，所以kafka非常依赖网络和磁盘的性能；</p><p>而linux恰巧有零拷贝（Zero copy）技术，就是当数据在磁盘和网络进行传输的时候，避免昂贵的的内核态数据拷贝从而实现数据的高速传输；</p><p>而windos要到java8的60更新版本才有这个功能；</p><h4 id="社区的支持度"><a href="#社区的支持度" class="headerlink" title="社区的支持度"></a>社区的支持度</h4><p>社区对于windos版的bug不做承诺，基本不会修复；</p><h3 id="磁盘的选择"><a href="#磁盘的选择" class="headerlink" title="磁盘的选择"></a>磁盘的选择</h3><ul><li>选择机械磁盘：kafka多为顺序读写，规避了机械磁盘的弊端，替换成SSD，效益不大</li><li>不用组RAID：kafka在软件层面通过分区副本保证了高可用，基本不需要磁盘组RAID</li></ul><h3 id="磁盘容量的选择"><a href="#磁盘容量的选择" class="headerlink" title="磁盘容量的选择"></a>磁盘容量的选择</h3><ul><li><p>磁盘容量：kafka的日志有保留时间的概念，根据具体的业务量，消息大小，计算好容量；</p><ul><li><p>新增消息量</p></li><li><p>消息留存时间</p></li><li><p>平均消息大小</p></li><li><p>备份数</p></li><li><p>是否启用压缩（压缩比）</p></li></ul></li></ul><h3 id="带宽的选择"><a href="#带宽的选择" class="headerlink" title="带宽的选择"></a>带宽的选择</h3><p>目前公司普遍的带宽配置都是千兆网（每秒处理1G数据），财大气粗的公司会有万兆网（每秒处理10G数据）；</p><p>假设你公司的机房环境是千兆网络，即 1Gbps，现在你有个业务，其业务目标或 SLA 是在 1 小时内处理 1TB 的业务数据。那么问题来了，你到底需要多少台 Kafka 服务器来完成这个业务呢？</p><p>千兆网络下，单台机器，假设kafka占用70%的带宽（总要为其他进程保留一些资源），稍等，这只是它能使用的最大带宽资源，你不能让 Kafka 服务器常规性使用这么多资源，故通常要再额外预留出 2&#x2F;3 的资源，即单台服务器使用带宽 700Mb &#x2F; 3 ≈ 240Mbps。有了 240Mbps，我们就可以计算 1 小时内处理 1TB 数据所需的服务器数量了。根据这个目标，我们每秒需要处理 2336Mb 的数据，除以 240，约等于 10 台服务器。如果消息还需要额外复制两份，那么总的服务器台数还要乘以 3，即 30 台。</p><h2 id="重要的集群参数配置"><a href="#重要的集群参数配置" class="headerlink" title="重要的集群参数配置"></a>重要的集群参数配置</h2><p>参数配置分为四个方面：</p><ul><li>broker端参数配置</li><li>topic的参数配置</li><li>JVM的参数配置</li><li>操作系统的参数配置</li></ul><img src="kafka从入门到入土.assets/image-20220827105050039.png" alt="image-20220827105050039" style="zoom: 50%;" /><img src="kafka从入门到入土.assets/image-20220827111440117.png" alt="image-20220827111440117" style="zoom:50%;" /><h3 id="broker端参数（静态参数）"><a href="#broker端参数（静态参数）" class="headerlink" title="broker端参数（静态参数）"></a>broker端参数（静态参数）</h3><p>静态参数是指修改后需要重启才能生效的参数</p><h4 id="存储信息类参数"><a href="#存储信息类参数" class="headerlink" title="存储信息类参数"></a>存储信息类参数</h4><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>log.dirs</td><td>【必须指定】指定Broker需要使用的若干个文件目录路径，可配置多个</td></tr><tr><td>log.dir</td><td>只能配置一个，用来补充上面参数的</td></tr></tbody></table><h4 id="与ZK相关的参数"><a href="#与ZK相关的参数" class="headerlink" title="与ZK相关的参数"></a>与ZK相关的参数</h4><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>zookeeper.connect</td><td>负责协调管理并保存 Kafka 集群的所有元数据信息，比如集群都有哪些 Broker 在运行、创建了哪些 Topic，每个 Topic 都有多少分区以及这些分区的 Leader 副本都在哪些机器上等信息。</td></tr></tbody></table><h4 id="Broker连接相关的参数"><a href="#Broker连接相关的参数" class="headerlink" title="Broker连接相关的参数"></a>Broker连接相关的参数</h4><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>listeners</td><td>告诉外部连接需要通过什么协议访问指定主机名和端口开放的kafka服务（用于内网访问）</td></tr><tr><td>Advertised.listeners</td><td>表明这组监听器是broker对外发布的（用于外网访问）</td></tr><tr><td>host.name&#x2F;port</td><td>这俩参数是过期参数，忘掉</td></tr></tbody></table><h4 id="topic管理的参数"><a href="#topic管理的参数" class="headerlink" title="topic管理的参数"></a>topic管理的参数</h4><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>auto.create.topics.enable</td><td>是否允许自动创建topic，<br />建议设置成false；</td></tr><tr><td>unclean.leader.election.enable</td><td>是否允许Unclean Leader选举，<br />建议设置为false；<br />kafka的分区有多个副本，并不是所有的副本都有资格竞争Leader，只有保存数据比较多的才有资格；那如果保存数据比较多的副本全都挂了，那还要不要竞选Leader呢？ 就是这个参数控制的；<br />false表示不竞选，后果分区不可用；<br />true表示竞选；后果数据不一致；</td></tr><tr><td>auto.leader.rebalance.enable</td><td>是否允许定期进行Leader选举；true表示到达一定条件，kafka会自动把leader换了，注意是换掉，而不是选举；即使原来的leaderA运行的好好地，也会给换成leaderB；换leader的代价很大，建议设置为false；</td></tr></tbody></table><h4 id="数据留存方面的参数"><a href="#数据留存方面的参数" class="headerlink" title="数据留存方面的参数"></a>数据留存方面的参数</h4><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>log.retention.{hour|minutes|ms}</td><td>控制一条消息被保留多长时间</td></tr><tr><td>log.retention.bytes</td><td>Broker为保留消息提供的磁盘容量的大小</td></tr><tr><td>message.max.bytes</td><td>控制Broker能够接收的最大的消息大小</td></tr></tbody></table><h3 id="Topic的参数配置"><a href="#Topic的参数配置" class="headerlink" title="Topic的参数配置"></a>Topic的参数配置</h3><p>topic端的参数配置会覆盖broker端的参数配置</p><h4 id="数据留存方面的参数-1"><a href="#数据留存方面的参数-1" class="headerlink" title="数据留存方面的参数"></a>数据留存方面的参数</h4><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>retention.ms</td><td>规定了该topic下数据的保存时长，默认7天，如果配置了，就会覆盖broker端的配置</td></tr><tr><td>retention.bytes</td><td>规定了要为该topic预留多少磁盘容量空间</td></tr><tr><td>max.message.bytes</td><td>该参数跟 message.max.bytes 参数的作用是一样的，只不过 max.message.bytes 是作用于某个 topic，而 message.max.bytes 是作用于全局。</td></tr></tbody></table><h4 id="怎么修改topic的参数配置"><a href="#怎么修改topic的参数配置" class="headerlink" title="怎么修改topic的参数配置"></a>怎么修改topic的参数配置</h4><ul><li><p>创建topic的时候设置</p><ul><li><blockquote><p>bin&#x2F;kafka-topics.sh –bootstrap-server localhost:9092 –create –topic transaction –partitions 1 –replication-factor 1 –config retention.ms&#x3D;15552000000 –config max.message.bytes&#x3D;5242880</p></blockquote></li></ul></li><li><p>修改topic的时候设置</p><ul><li><blockquote><p>bin&#x2F;kafka-configs.sh –zookeeper localhost:2181 –entity-type topics –entity-name transaction –alter –add-config max.message.bytes&#x3D;10485760</p></blockquote></li></ul></li></ul><h3 id="JVM的参数配置"><a href="#JVM的参数配置" class="headerlink" title="JVM的参数配置"></a>JVM的参数配置</h3><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>JVM堆大小</td><td>建议设置为6GB，默认的1GB太小了</td></tr><tr><td>垃圾回收设置（java7）</td><td>cpu充足，就用CMS；否则使用ParallelGC</td></tr><tr><td>垃圾回收设置（java8）</td><td>G1</td></tr></tbody></table><h4 id="怎么对kafka设置JVM参数"><a href="#怎么对kafka设置JVM参数" class="headerlink" title="怎么对kafka设置JVM参数"></a>怎么对kafka设置JVM参数</h4><p>指定kafka的环境变量即可</p><ul><li>KAFKA_HEAP_OPTS：指定堆大小</li><li>KAFKA_JVM_PERFORMANCE_OPTS：指定垃圾回收器</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$<span class="token operator">></span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">KAFKA_HEAP_OPTS</span><span class="token operator">=</span>--Xms6g  <span class="token parameter variable">--Xmx6g</span>$<span class="token operator">></span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">KAFKA_JVM_PERFORMANCE_OPTS</span><span class="token operator">=</span> <span class="token parameter variable">-server</span> <span class="token parameter variable">-XX:+UseG1GC</span> <span class="token parameter variable">-XX:MaxGCPauseMillis</span><span class="token operator">=</span><span class="token number">20</span> <span class="token parameter variable">-XX:InitiatingHeapOccupancyPercent</span><span class="token operator">=</span><span class="token number">35</span> <span class="token parameter variable">-XX:+ExplicitGCInvokesConcurrent</span> <span class="token parameter variable">-Djava.awt.headless</span><span class="token operator">=</span>true$<span class="token operator">></span> bin/kafka-server-start.sh config/server.properties<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="操作系统的参数配置"><a href="#操作系统的参数配置" class="headerlink" title="操作系统的参数配置"></a>操作系统的参数配置</h3><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>文件描述符限制</td><td>ulimit -n；其实设置这个参数不重要，但是不设置后果很严重，会看到too many open file 的报错；</td></tr><tr><td>文件系统类型</td><td>文件系统类型（ext3，ext4，XFS），XFS的性能强于ext4，ZFS的性能强于XFS（但技术比较新，使用很少）</td></tr><tr><td>Swappiness</td><td>网上很多文章都提到设置其为 0，将 swap 完全禁掉以防止 Kafka 进程使用 swap 空间。我个人反倒觉得还是不要设置成 0 比较好，我们可以设置成一个较小的值。为什么呢？因为一旦设置成 0，当物理内存耗尽时，操作系统会触发 OOM killer 这个组件，它会随机挑选一个进程然后 kill 掉，即根本不给用户任何的预警。但如果设置成一个比较小的值，当开始使用 swap 空间时，你至少能够观测到 Broker 性能开始出现急剧下降，从而给你进一步调优和诊断问题的时间。基于这个考虑，我个人建议将 swappniess 配置成一个接近 0 但不为 0 的值，比如 1。</td></tr><tr><td>提交时间（系统的刷盘时间）</td><td>提交时间或者说是 Flush 落盘时间。向 Kafka 发送数据并不是真要等数据被写入磁盘才会认为成功，而是只要数据被写入到操作系统的页缓存（Page Cache）上就可以了，随后操作系统根据 LRU 算法会定期将页缓存上的“脏”数据落盘到物理磁盘上。这个定期就是由提交时间来确定的，默认是 5 秒。一般情况下我们会认为这个时间太频繁了，可以适当地增加提交间隔来降低物理磁盘的写操作。当然你可能会有这样的疑问：如果在页缓存中的数据在写入到磁盘前机器宕机了，那岂不是数据就丢失了。的确，这种情况数据确实就丢失了，但鉴于 Kafka 在软件层面已经提供了多副本的冗余机制，因此这里稍微拉大提交间隔去换取性能还是一个合理的做法。</td></tr></tbody></table><h2 id="大数据量均匀分布Broker（分区原理）"><a href="#大数据量均匀分布Broker（分区原理）" class="headerlink" title="大数据量均匀分布Broker（分区原理）"></a>大数据量均匀分布Broker（分区原理）</h2><img src="kafka从入门到入土.assets/image-20220827183614867.png" alt="image-20220827183614867" style="zoom:50%;" /><p>对于那种大批量机器组成的集群环境，每分钟产生的日志量都能以 GB 数，因此如何将这么大的数据量均匀地分配到 Kafka 的各个 Broker 上，就成为一个非常重要的问题。</p><p>我们知道kafka的数据，是以topic为概念进行存储的，而topic是一个逻辑概念，真正存放数据的是topic下的partition；partition是物理概念；</p><p>那么，为了保证大数据量的均匀分布，其实就是保证一个topic下的数据量均匀的分散在各个partition中；</p><p>那么问题来了？</p><h4 id="kafka为什么要分区"><a href="#kafka为什么要分区" class="headerlink" title="kafka为什么要分区"></a>kafka为什么要分区</h4><p>kafka为什么要分区，为什么kafka不直接存储数据，而是要分区存储？为什么要使用分区的概念，而不是直接使用topic？</p><p>分区的目的是为了<strong>负载均衡</strong>；或者说分区的目的是为了<strong>提高系统的可伸缩性</strong>；</p><ul><li>负载均衡<ul><li>如果没有分区，所有的请求全部在一个topic上，请求量大的时候，直接就崩了；</li></ul></li><li>可伸缩性<ul><li>顺丰的kafka一般是32分区，这样每一个分区都可以有一个consumer，提升系统的吞吐量；当数据量增长的时候，可以扩分区，32-&gt;64；提升系统的可伸缩性；</li><li>但是一般不建议直接扩分区，在顺丰，一般是申请新的topic，然后将消息转发到不同的topic中，变相的实现扩分区；</li><li>因为分区过多，kafka管理起来很困难，没必要增加不必要的消耗；</li></ul></li><li>分区可以实现业务上的功能（消息的顺序问题）</li></ul><p>以上说了分区存在的必要性，那么既然存在分区，怎么保证每个分区的数据量的均匀呢？这就涉及到分区的策略</p><h4 id="都有哪些分区策略"><a href="#都有哪些分区策略" class="headerlink" title="都有哪些分区策略"></a>都有哪些分区策略</h4><p>分区策略：就是决定消息被发送到哪个分区</p><table><thead><tr><th>分区策略</th><th>描述</th></tr></thead><tbody><tr><td>轮训</td><td>没有指定partitioner.class这个配置的时候，在没有指定key的时候（消息键保留策略），轮训策略是默认的</td></tr><tr><td>随机</td><td>使用的很少了，已经被废弃了</td></tr><tr><td>自定义</td><td>需要显示的配置partitioner.class这个配置，同时需要编写代码；</td></tr><tr><td>按消息键保留策略</td><td>按照key的顺序进行存放，kafka默认分区策略：如果指定了key，按照key分发；没有指定key，按照轮训；</td></tr></tbody></table><h2 id="生产者压缩算法（消息格式）"><a href="#生产者压缩算法（消息格式）" class="headerlink" title="生产者压缩算法（消息格式）"></a>生产者压缩算法（消息格式）</h2><img src="kafka从入门到入土.assets/image-20220827220455477.png" alt="image-20220827220455477" style="zoom:50%;" /><h3 id="为什么要压缩？"><a href="#为什么要压缩？" class="headerlink" title="为什么要压缩？"></a>为什么要压缩？</h3><p>说起压缩（compression），我相信你一定不会感到陌生。它秉承了用时间去换空间的经典 trade-off 思想，具体来说就是用 CPU 时间去换磁盘空间或网络 I&#x2F;O 传输量，希望以较小的 CPU 开销带来更少的磁盘占用或更少的网络 I&#x2F;O 传输。在 Kafka 中，压缩也是用来做这件事的。</p><h3 id="怎么压缩"><a href="#怎么压缩" class="headerlink" title="怎么压缩"></a>怎么压缩</h3><h4 id="kafka的消息格式"><a href="#kafka的消息格式" class="headerlink" title="kafka的消息格式"></a>kafka的消息格式</h4><p>kafka有两大类消息格式，一类是在0.11.0.0版本之前的消息格式（称作V1版本），一个是0.11.0.0版本之后的格式（称作V2版本）；</p><p>不管是哪个版本，kafka消息层次都是分为两层：</p><table><thead><tr><th>V1版本</th><th>V2版本</th></tr></thead><tbody><tr><td>消息集合（message set） + 消息（message）</td><td>消息集合（record batch） + 消息（record）</td></tr></tbody></table><p>一个消息集合中包含若干个日志项（record item），日志项（record item）才是真正封装消息的地方；</p><p>V2版本对V1版本进行了优化，将日志项（record item）中一些通用的字段抽出来，放在了消息集合中；</p><p>V2版本对V1版本还有一个关于压缩方面的优化</p><h4 id="怎么压缩-1"><a href="#怎么压缩-1" class="headerlink" title="怎么压缩"></a>怎么压缩</h4><p>V2版本对V1版本还有一个关于压缩方面的优化，就是V1版本的压缩方法是把多条消息进行压缩，然后将压缩后的内容放在外层消息的消息体字段中；V2版本则是对整个消息集合进行压缩，显然V2版本的压缩效率应该更高；</p><h4 id="何时压缩"><a href="#何时压缩" class="headerlink" title="何时压缩"></a>何时压缩</h4><p>在kafka中，压缩可能发生在：生产者端和Broker端</p><ul><li><p>生产者【一般都是生产者端做压缩】</p><ul><li>在生产者程序中添加一个配置：compression.type 参数； compression.type&#x3D;gzip表示开启gzip压缩</li></ul></li><li><p>Broker端</p><ul><li>一般Broker端不会对生产者发出来的消息进行修改；有两个例外情况，会让Broker对消息重新压缩<ul><li>Broker端和生产者端指定的消息压缩算法不一致（不一致的时候，broker端会对producer发出来的消息解压然后重新压缩）</li><li>Broker端发生了消息格式转换：kafka新老版本兼容的问题</li></ul></li></ul></li></ul><h4 id="何时解压缩"><a href="#何时解压缩" class="headerlink" title="何时解压缩"></a>何时解压缩</h4><ul><li>consumer端消费到消息的时候，进行解压缩<ul><li>解压缩的时候，压缩算法是在消息中，用一个字段标识的，所以consumer可以拿到消息之后在解压缩</li></ul></li><li>broker端收到producer发出的消息之后，也会解压缩一次，进行消息的校验；</li></ul><h4 id="压缩算法的选择"><a href="#压缩算法的选择" class="headerlink" title="压缩算法的选择"></a>压缩算法的选择</h4><p>一般看两个指标：压缩比 和 压缩&#x2F;解压缩的吞吐量</p><p>GZIP</p><p>Snappy</p><p>LZ4</p><p>zstd</p><h2 id="怎么保证消息不丢失"><a href="#怎么保证消息不丢失" class="headerlink" title="怎么保证消息不丢失"></a>怎么保证消息不丢失</h2><p>kafka只对 已提交（commited message） 的消息做有限度的持久化保证；</p><img src="kafka从入门到入土.assets/image-20220827223422569.png" alt="image-20220827223422569" style="zoom:50%;" /><h4 id="什么是消息丢失"><a href="#什么是消息丢失" class="headerlink" title="什么是消息丢失"></a>什么是消息丢失</h4><p>对于生产者来说：消息发不出去，就是丢失；</p><p>对于消费者来说：消息消费不到，就是丢失；</p><p>对于broker来说：不存在丢失，broker会对 已提交成功 的消息，做有限度的持久化；</p><h4 id="什么时候会消息丢失"><a href="#什么时候会消息丢失" class="headerlink" title="什么时候会消息丢失"></a>什么时候会消息丢失</h4><ul><li><p>生产者程序丢失消息</p><ul><li>producer.send(msg)因为是异步，<code>fire and forget</code> 所以可能会丢消息<ul><li>网络抖动、消息不合法被broker拒收（消息体太大）等都会导致消息发送不成功</li></ul></li><li>解决：不要使用producer.send(msg) ，使用producer.send(msg,callback)；使用带回调的方式</li></ul></li><li><p>消费者程序丢失消息</p><ul><li>消费的消息不存在了。一般只有先提交offset在消费的场景下会发生；</li><li>多线程处理消息的时候，某一个线程消费失败了，但是offset自动提交了；</li></ul></li></ul><h4 id="怎么保证消息不丢失-1"><a href="#怎么保证消息不丢失-1" class="headerlink" title="怎么保证消息不丢失"></a>怎么保证消息不丢失</h4><p>上面几种丢失消息的场景，怎么避免？</p><ul><li>【生产者端】：用 producer.send(msg, callback)发消息</li><li>【broker端】：设置 acks &#x3D; all</li><li>【生产者端】：设置 retries 为一个较大的值，producer发送失败后重试的次数</li><li>【broker端】：设置 unclean.leader.election.enable &#x3D; false</li><li>【broker端】：设置 replication.factor &gt;&#x3D; 3，设置分区的副本数</li><li>【broker端】：设置 min.insync.replicas &gt; 1。表示消息至少要被写入到多少个副本才算是“已提交”</li><li>【broker端】：确保 replication.factor &gt; min.insync.replicas；推荐replication.factor &#x3D; min.insync.replicas + 1。</li><li>【消费者端】：设置enable.auto.commit&#x3D; false，采用手动提交位移的方式</li></ul><p>acks  和  replication.refactor  和  min.insync.replicas 区别： </p><p>replication.refactor是某个分区的副本replica总数；</p><p>min.insync.replicas是要求确保至少有多少个replica副本写入后才算是提交成功，这个参数是个硬指标；</p><p>acks&#x3D;all是个动态指标，确保当前能正常工作的replica副本都写入后才算是提交成功。</p><p>举个例子：比如，此时副本数3，设置min.insync.replicas&#x3D;2，acks&#x3D;all，那如果所有副本都正常工作，消息要都写入3个副本，才算提交成功，此时这个min.insync.replicas&#x3D;2下限值不起作用。如果其中一个副本因为某些原因挂了，此时acks&#x3D;all的动态约束就是写入2个副本即可，触达了min.insync.replicas&#x3D;2这个下限约束。如果三个副本挂了两个，此时ack&#x3D;all的约束就变成了1个副本，但是因为有min.insync.replicas&#x3D;2这个下限约束，写入就会不成功。</p><h2 id="kafka的拦截器"><a href="#kafka的拦截器" class="headerlink" title="kafka的拦截器"></a>kafka的拦截器</h2><img src="kafka从入门到入土.assets/image-20220827224439813.png" alt="image-20220827224439813" style="zoom:50%;" /><h4 id="生产者拦截器"><a href="#生产者拦截器" class="headerlink" title="生产者拦截器"></a>生产者拦截器</h4><p>开发：实现<code>org.apache.kafka.clients.producer.ProducerInterceptor</code>这个接口，这个接口有俩方法</p><ul><li>onSend：消息真正发给broker之前</li><li>onAcknowledgement：消息提交成功之后，在send(msg,callback) callback之前；</li></ul><h4 id="消费者拦截器"><a href="#消费者拦截器" class="headerlink" title="消费者拦截器"></a>消费者拦截器</h4><p>开发：实现<code>org.apache.kafka.clients.consumer.ConsumerInterceptor</code>这个接口，这个接口有俩方法</p><ul><li>onConsume：在消费者真正处理消息之前；</li><li>onCommit：消费者处理完消息，提交offset之后；</li></ul><h2 id="Java生产者是如何管理TCP连接的"><a href="#Java生产者是如何管理TCP连接的" class="headerlink" title="Java生产者是如何管理TCP连接的"></a>Java生产者是如何管理TCP连接的</h2><img src="kafka从入门到入土.assets/image-20220827230759876.png" alt="image-20220827230759876" style="zoom:50%;" /><h3 id="为什么采用TCP作为底层传输协议"><a href="#为什么采用TCP作为底层传输协议" class="headerlink" title="为什么采用TCP作为底层传输协议"></a>为什么采用TCP作为底层传输协议</h3><p>TCP拥有一些高级功能，如多路复用请求和同时轮询多个连接的能力。</p><p>多路复用请求：multiplexing request，是将两个或多个数据合并到底层—物理连接中的过程。TCP的多路复用请求会在一条物理连接上创建若干个虚拟连接，每个虚拟连接负责流转各自对应的数据流。严格讲：TCP并不能多路复用，只是提供可靠的消息交付语义保证，如自动重传丢失的报文。</p><h3 id="生产者是什么时候创建TCP连接的"><a href="#生产者是什么时候创建TCP连接的" class="headerlink" title="生产者是什么时候创建TCP连接的"></a>生产者是什么时候创建TCP连接的</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Properties</span> props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>“参数<span class="token number">1</span>”<span class="token punctuation">,</span> “参数<span class="token number">1</span>的值”<span class="token punctuation">)</span>；props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>“参数<span class="token number">2</span>”<span class="token punctuation">,</span> “参数<span class="token number">2</span>的值”<span class="token punctuation">)</span>；……<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Producer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> producer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KafkaProducer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            producer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ProducerRecord</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>……<span class="token punctuation">)</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>  ……<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>针对上面的代码，能创建TCP连接的只有两个地方，一是producer实例化的时候；一是produce.send的时候；</p><ul><li><strong>kafka是在producer实例化的时候与broker建立的TCP连接</strong></li><li>所以，当producer.send的时候，其实已经有TCP连接了</li></ul><p>扩展：除了在producer实例化的时候与broker建立的TCP连接之外，还有没有其他情况？</p><ul><li>有，有两个情况，也会创建TCP连接</li><li><strong>元数据更新时，会与元数据中没有连接的broker建立TCP连接；</strong><ul><li>每隔5分钟，producer会定期从broker中获取元数据信息</li><li>producer尝试给一个不存在的topic发送消息时，broker会说这个topic不存在，然后producer会请求broker更新元数据信息</li></ul></li><li><strong>在消息发送时，如果producer发现与要发送消息的topic所在的broker没有TCP连接，就会创建连接；</strong></li></ul><h3 id="是怎么创建TCP连接的"><a href="#是怎么创建TCP连接的" class="headerlink" title="是怎么创建TCP连接的"></a>是怎么创建TCP连接的</h3><p>在创建 KafkaProducer 实例时，生产者应用会在后台创建并启动一个名为 Sender 的线程，该 Sender 线程开始运行时首先会创建与 Broker 的TCP连接。</p><p>broker有1000个，bootstrap.servers 要配置1000个嘛？ 不需要，因为 Producer 一旦连接到集群中的任一台 Broker，就能拿到整个集群的 Broker 信息。</p><h3 id="TCP连接是什么时候被关闭的"><a href="#TCP连接是什么时候被关闭的" class="headerlink" title="TCP连接是什么时候被关闭的"></a>TCP连接是什么时候被关闭的</h3><ul><li>用户主动关闭，调用producer.close</li><li>Kafka自动关闭（虽然是producer端设置的参数，但实际上，是broker关闭的TCP连接）：与 Producer 端参数 connections.max.idle.ms 的值有关。默认情况下该参数值是 9 分钟，即如果在 9 分钟内没有任何请求“流过”某个 TCP 连接，那么 Kafka 会主动帮你把该 TCP 连接关闭。用户可以在 Producer 端设置 connections.max.idle.ms&#x3D;-1 禁掉这种机制。一旦被设置成 -1，TCP 连接将成为永久长连接。</li></ul><h3 id="会存在的一些问题"><a href="#会存在的一些问题" class="headerlink" title="会存在的一些问题"></a>会存在的一些问题</h3><ul><li>producer每5分钟获取一些元数据，然后与元数据中没有连接的broker建立TCP连接，然后9分钟后，broker会中断空闲的连接，然后5分钟后，在此建立连接；9分钟后，再次中断连接；</li></ul><h2 id="幂等生产者和事务生产者"><a href="#幂等生产者和事务生产者" class="headerlink" title="幂等生产者和事务生产者"></a>幂等生产者和事务生产者</h2><img src="kafka从入门到入土.assets/image-20220828000213732.png" alt="image-20220828000213732" style="zoom:50%;" /><h3 id="kafka的消息发送可靠性"><a href="#kafka的消息发送可靠性" class="headerlink" title="kafka的消息发送可靠性"></a>kafka的消息发送可靠性</h3><ul><li><p>最多一次：消息只会被发送一次，可能会丢失，绝不会重复</p></li><li><p>至少一次（默认）：发送消息的时候，至少要有一次broker明确告知已经提交的callback，消息可能重复，但不会丢失</p></li><li><p>精确一次：消息不会丢失，也不会重复</p></li></ul><h4 id="幂等的概念和事务的概念"><a href="#幂等的概念和事务的概念" class="headerlink" title="幂等的概念和事务的概念"></a>幂等的概念和事务的概念</h4><p>不说了</p><h4 id="幂等生产者"><a href="#幂等生产者" class="headerlink" title="幂等生产者"></a>幂等生产者</h4><p>能够保证producer在一个会话中，一个分区的消息不会重复，但是当producer重启后，或者producer在多分区的场景下不能保证消息的幂等性；</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>“enable<span class="token punctuation">.</span>idempotence”<span class="token punctuation">,</span> ture<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="幂等生产者的实现原理"><a href="#幂等生产者的实现原理" class="headerlink" title="幂等生产者的实现原理"></a>幂等生产者的实现原理</h4><p><a href="https://www.jianshu.com/p/f77ade3f41fd">https://www.jianshu.com/p/f77ade3f41fd</a></p><h4 id="事务生产者"><a href="#事务生产者" class="headerlink" title="事务生产者"></a>事务生产者</h4><p>如果我想实现多分区以及多会话上的消息无重复，应该怎么做呢？答案就是事务（transaction）或者依赖事务型 Producer。这也是幂等性 Producer 和事务型 Producer 的最大区别！</p><p><strong>设置事务型 Producer</strong> ：</p><ul><li><p>和幂等性 Producer 一样，开启 enable.idempotence &#x3D; true。</p></li><li><p>设置 Producer 端参数 transactional. id。最好为其设置一个有意义的名字。</p></li><li><p>&#96;&#96;&#96;java<br>&#x2F;&#x2F;调整代码<br>producer.initTransactions();<br>try {<br>        producer.beginTransaction();&#x2F;&#x2F;开启事务<br>        producer.send(record1);&#x2F;&#x2F;发送消息1<br>        producer.send(record2);&#x2F;&#x2F;发送消息2<br>        producer.commitTransaction();&#x2F;&#x2F;提交事务<br>} catch (KafkaException e) {<br>        producer.abortTransaction();<br>}</p><pre class="line-numbers language-none"><code class="language-none">- 消息1和消息2，要么全部成功，要么全部失败**设置事务型Consumer：**- 为什么要设置，因为事务型生产者即使发送失败了，也会写到kakfa日志中，被消费到；- 设置consumer的 &#96;isolation.level&#96;参数  - read_uncommitted：读未提交，可以消费到发送失败的消息  - read_committed：读已提交，只能消费到发送成功的消息#### 事务生产者的实现原理https:&#x2F;&#x2F;www.jianshu.com&#x2F;p&#x2F;f77ade3f41fd## 消费者组和消费位移主题&lt;img src&#x3D;&quot;kafka从入门到入土.assets&#x2F;image-20220828151124945.png&quot; alt&#x3D;&quot;image-20220828151124945&quot; style&#x3D;&quot;zoom:50%;&quot; &#x2F;&gt;### 什么是消费者组Consumer Group 是 Kafka 提供的可扩展且具有容错性的消费者机制。组内有多个消费者或消费者实例（Consumer Instance），它们共享一个公共的 Group ID。组内的所有消费者一起消费订阅的主题（Subscribed Topics）的所有分区（Partition）。当然，每个分区只能由同一个消费者组内的一个 Consumer 实例来消费。### 消费者组的特性是什么- Consumer Group 下可以有一个或多个 Consumer 实例。这里的实例可以是一个单独的进程，也可以是同一进程下的线程。在实际场景中，使用进程更为常见一些。- Group ID 是一个字符串，在一个 Kafka 集群中，它标识唯一的一个 Consumer Group。- Consumer Group 下所有实例订阅的主题的单个分区，只能分配给组内的某个 Consumer 实例消费。这个分区当然也可以被其他的 Group 消费。### 怎么创建一个消费者组？### 消费者组怎么用？### 传统的消息引擎模型- 点对点：一个消息只能被一个消费者消费到- 发布订阅：一个topic下的消息，可以被订阅该topic的所有消费者都消费到- kafka使用消费者组，实现了两种消息引擎模型；   - 如果所有的消费者属于一个消费者组，那就是点对点  - 如果所有的消费者属于不同的消费者组，那就是发布订阅### 消费者组是如何维护offset的对于一个单独的消费者来说，offset就是一个数值；但是对于一个消费者组来说，因为组内有多个消费者，那么消费者组维护offset是通过一个map来维护的，这个map简单的可以理解为是：Map&lt;TopicPartition,Long&gt;对于老版本的kafka来说，offset是保存在zk中的，但是后来kafka的开发者发现，offset的更新太过于频繁，频繁的封信会拖慢zk的性能，所以在新版本的kafka中，offset是保存在broker内部的一个特殊的topic中的(__consumer_offset)。下面我们来看看位移主题### __consumer_offset位移主题&lt;img src&#x3D;&quot;kafka从入门到入土.assets&#x2F;image-20220828155528590.png&quot; alt&#x3D;&quot;image-20220828155528590&quot; style&#x3D;&quot;zoom:50%;&quot; &#x2F;&gt;__consumer_offsets 在 Kafka 源码中有个更为正式的名字，叫位移主题，即 Offsets Topic。#### 为什么会有__consumer_offset对于老版本的kafka来说，offset是保存在zk中的，但是后来kafka的开发者发现，offset的更新太过于频繁，频繁的封信会拖慢zk的性能，所以在新版本的kafka中，offset是保存在broker内部的一个特殊的topic中的(__consumer_offset)。#### __consumer_offset是什么是kafka中一个内部topic，这个topic的主要作用是用来管理offset，offset管理机制其实很简单，就是将 Consumer 的位移数据作为一条条普通的 Kafka 消息，提交到 __consumer_offsets 中。可以这么说，consumer_offsets 的主要作用是保存 Kafka 消费者的位移信息。#### __consumer_offset怎么被创建的当 Kafka 集群中的第一个 Consumer 程序启动时，Kafka 会自动创建位移主题。我们知道__consumer_offset虽然是内部主题，但是它仍然是一个主题，既然是主题，那么它的分区数和副本是多少呢？- 分区数：50；由Broker 端参数 offsets.topic.num.partitions指定- 副本数：3；由Broker 端参数 offsets.topic.replication.factor指定#### __consumer_offset中存了什么数据- 位移的管理消息- 位移的信息消息- 墓碑消息这个主题存的到底是什么格式的消息呢？所谓的消息格式，你可以简单地理解为是一个 KV 对K：consumer group Id + topic + 分区号V：offset即使是单个消费者，也是会有groupid的除了普通的offset的消息之外，还保存了另外两类消息- consumer group的信息的消息（一般不用关注）- 用户删除过期offset消息的墓碑消息（tombstone）#### 什么时候提交(怎么提交offset)&lt;img src&#x3D;&quot;kafka从入门到入土.assets&#x2F;image-20220828174212922.png&quot; alt&#x3D;&quot;image-20220828174212922&quot; style&#x3D;&quot;zoom:50%;&quot; &#x2F;&gt;Kafka Consumer 提交位移时会写入该主题，那 Consumer 是怎么提交位移的呢？目前 Kafka Consumer 提交位移的方式有两种：自动提交位移和手动提交位移。##### 自动提交位移- consumer端参数：enable.auto.commit- consumer端参数：auto.commit.interval.ms&#96;&#96;&#96;javaProperties props &#x3D; new Properties();     props.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);     props.put(&quot;group.id&quot;, &quot;test&quot;);     props.put(&quot;enable.auto.commit&quot;, &quot;true&quot;);     props.put(&quot;auto.commit.interval.ms&quot;, &quot;2000&quot;);     props.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);     props.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);     KafkaConsumer&lt;String, String&gt; consumer &#x3D; new KafkaConsumer&lt;&gt;(props);     consumer.subscribe(Arrays.asList(&quot;foo&quot;, &quot;bar&quot;));     while (true) &#123;         ConsumerRecords&lt;String, String&gt; records &#x3D; consumer.poll(100);         for (ConsumerRecord&lt;String, String&gt; record : records)             System.out.printf(&quot;offset &#x3D; %d, key &#x3D; %s, value &#x3D; %s%n&quot;, record.offset(), record.key(), record.value());     &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h5 id="手动提交位移"><a href="#手动提交位移" class="headerlink" title="手动提交位移"></a>手动提交位移</h5><ul><li>consumer端参数：enable.auto.commit</li></ul><h6 id="同步提交方式"><a href="#同步提交方式" class="headerlink" title="同步提交方式"></a>同步提交方式</h6><ul><li>KafkaConsumer#commitSync()</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">ConsumerRecords</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> records <span class="token operator">=</span>                        consumer<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">process</span><span class="token punctuation">(</span>records<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 处理消息</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        consumer<span class="token punctuation">.</span><span class="token function">commitSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CommitFailedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token function">handle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 处理提交失败异常</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h6 id="异步提交方式"><a href="#异步提交方式" class="headerlink" title="异步提交方式"></a>异步提交方式</h6><ul><li>KafkaConsumer#commitAsync()</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">ConsumerRecords</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> records <span class="token operator">=</span>   consumer<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">process</span><span class="token punctuation">(</span>records<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 处理消息</span>            consumer<span class="token punctuation">.</span><span class="token function">commitAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span>offsets<span class="token punctuation">,</span> exception<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>exception <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>  <span class="token function">handle</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h6 id="同步提交方式-异步提交方式"><a href="#同步提交方式-异步提交方式" class="headerlink" title="同步提交方式+异步提交方式"></a>同步提交方式+异步提交方式</h6><ul><li>同步会出现的问题：是阻塞的，会降低consumer的TPS；好处是会自动重试，提交不成功的话，不会拉取新的消息；</li><li>异步会出现的问题：提交异常的话，不会重试；会导致消息重复消费</li><li>怎么办呢？结合两者，先使用异步提交一次，如果失败了，finally里使用同步方式</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java">   <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token class-name">ConsumerRecords</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> records <span class="token operator">=</span>                                     consumer<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token function">process</span><span class="token punctuation">(</span>records<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 处理消息</span>                        <span class="token function">commitAysnc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用异步提交规避阻塞</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">handle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 处理异常</span><span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        consumer<span class="token punctuation">.</span><span class="token function">commitSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 最后一次提交使用同步阻塞式提交</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>       consumer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果你选择的是自动提交位移，那么就可能存在一个问题：只要 Consumer 一直启动着，它就会无限期地向位移主题写入消息。导致磁盘爆满；因为自动提交位移是后台定时提交的（auto.commit.interval.ms默认是5s）；</p><p>那么满了怎么办？满了就删除，怎么删除呢？</p><h4 id="consumer-offset中的数据删除"><a href="#consumer-offset中的数据删除" class="headerlink" title="__consumer_offset中的数据删除"></a>__consumer_offset中的数据删除</h4><p>Kafka 是怎么删除位移主题中的过期消息的呢？答案就是 Compaction。国内很多文献都将其翻译成压缩，我个人是有一点保留意见的。在英语中，压缩的专有术语是 Compression，它的原理和 Compaction 很不相同，我更倾向于翻译成压实，或干脆采用 JVM 垃圾回收中的术语：整理。</p><img src="kafka从入门到入土.assets/image-20220828155424662.png" alt="image-20220828155424662" style="zoom:80%;" /><p>图中位移为 0、2 和 3 的消息的 Key 都是 K1。Compact 之后，分区只需要保存位移为 3 的消息，因为它是最新发送的。</p><p>Kafka 提供了专门的后台线程定期地巡检待 Compact 的主题，看看是否存在满足条件的可删除数据。这个后台线程叫 Log Cleaner。很多实际生产环境中都出现过位移主题无限膨胀占用过多磁盘空间的问题，如果你的环境中也有这个问题，我建议你去检查一下 Log Cleaner 线程的状态，通常都是这个线程挂掉了导致的。</p><h4 id="consumer-API位移提交失败怎么办"><a href="#consumer-API位移提交失败怎么办" class="headerlink" title="consumer API位移提交失败怎么办"></a>consumer API位移提交失败怎么办</h4><img src="kafka从入门到入土.assets/image-20220828182330032.png" alt="image-20220828182330032" style="zoom:50%;" /><p>一般的失败，API（同步的）会自动重试；但是有一个异常叫做CommitFailedException，这个异常抛出，说明位移的提交出现了大问题，需要人工介入了</p><ul><li>当消息处理的总时间超过预设的 max.poll.interval.ms 参数值时，Kafka Consumer 端会抛出 CommitFailedException 异常。</li><li>应用中同时出现了设置相同 group.id 值的<strong>消费者组</strong>和<strong>独立消费者</strong>，那么当独立消费者程序手动提交位移时，Kafka 就会立即抛出 CommitFailedException 异常</li></ul><h2 id="重平衡（协调者coordinator）"><a href="#重平衡（协调者coordinator）" class="headerlink" title="重平衡（协调者coordinator）"></a>重平衡（协调者coordinator）</h2><img src="kafka从入门到入土.assets/image-20220828162925680.png" alt="image-20220828162925680" style="zoom:50%;" /><h3 id="什么是重平衡"><a href="#什么是重平衡" class="headerlink" title="什么是重平衡"></a>什么是重平衡</h3><p>Rebalance 本质上是一种协议，规定了一个 Consumer Group 下的所有 Consumer 如何达成一致，来分配订阅 Topic 的每个分区。比如某个 Group 下有 20 个 Consumer 实例，它订阅了一个具有 100 个分区的 Topic。正常情况下，Kafka 平均会为每个 Consumer 分配 5 个分区。这个分配的过程就叫 Rebalance。</p><h3 id="什么时候会重平衡"><a href="#什么时候会重平衡" class="headerlink" title="什么时候会重平衡"></a>什么时候会重平衡</h3><ul><li>消费者组内消费者数量变化（新增或减少）；</li><li>消费者组订阅的topic数变化；</li><li>订阅的主题的分区数变化</li></ul><h3 id="怎么保证重平衡后的公平"><a href="#怎么保证重平衡后的公平" class="headerlink" title="怎么保证重平衡后的公平"></a>怎么保证重平衡后的公平</h3><ul><li>举例：比如组内有2个消费者，这个组消费topicA和topicB,其中消费者1消费topicA，消费者2消费topicB，当新加入一个topicC的时候，会不会消费者1消费到topicB，消费者2消费到topicA</li></ul><p>kafka有三种策略保证重平衡后的公平</p><ul><li><p>1、Range分配策略是面向每个主题的，首先会对同一个主题里面的分区按照序号进行排序，并把消费者线程按照字母顺序进行排序。然后用分区数除以消费者线程数量来判断每个消费者线程消费几个分区。如果除不尽，那么前面几个消费者线程将会多消费一个分区。 </p></li><li><p>2、RoundRobin策略的原理是将消费组内所有消费者以及消费者所订阅的所有topic的partition按照字典序排序，然后通过轮询算法逐个将分区以此分配给每个消费者。 使用RoundRobin分配策略时会出现两种情况： </p><ul><li><p>①、如果同一消费组内，所有的消费者订阅的消息都是相同的，那么 RoundRobin 策略的分区分配会是均匀的。</p></li><li><p>②、如果同一消费者组内，所订阅的消息是不相同的，那么在执行分区分配的时候，就不是完全的轮询分配，有可能会导致分区分配的不均匀。如果某个消费者没有订阅消费组内的某个 topic，那么在分配分区的时候，此消费者将不会分配到这个 topic 的任何分区。</p></li></ul></li><li><p>3、Sticky分配策略，这种分配策略是在kafka的0.11.X版本才开始引入的，是目前最复杂也是最优秀的分配策略。 Sticky分配策略的原理比较复杂，它的设计主要实现了两个目的： </p><ul><li><p>①、分区的分配要尽可能的均匀；</p></li><li><p>②、分区的分配尽可能的与上次分配的保持相同。 如果这两个目的发生了冲突，优先实现第一个目的。</p></li></ul></li></ul><h3 id="重平衡的缺点"><a href="#重平衡的缺点" class="headerlink" title="重平衡的缺点"></a>重平衡的缺点</h3><ul><li>会STW（stop the world）：消费者会全部停止消费</li><li>时间太慢了，几百个消费者重平衡一次，要几个小时</li><li>Rebalance 的设计是要求所有consumer实例共同参与，全部重新分配所有用分区。</li><li>在 Rebalance 过程中，所有 Consumer 实例共同参与，在协调者组件的帮助下，完成订阅主题分区的分配。但是，在整个过程中，所有实例都不能消费任何消息，因此它对 Consumer 的 TPS 影响很大。</li></ul><h3 id="什么是协调者coordinator"><a href="#什么是协调者coordinator" class="headerlink" title="什么是协调者coordinator"></a>什么是协调者coordinator</h3><ul><li><p>协调管理消费者组的一个程序，运行在broker上的</p></li><li><p>每一个broker在启动时都会启动coordinator组件（coordinator程序）</p></li></ul><p>所谓协调者，在 Kafka 中对应的术语是 Coordinator，它专门为 Consumer Group 服务，负责为 Group 执行 Rebalance 以及提供位移管理和组成员管理等。</p><p>具体来讲，Consumer 端应用程序在提交位移时，其实是向 Coordinator 所在的 Broker 提交位移。同样地，当 Consumer 应用启动时，也是向 Coordinator 所在的 Broker 发送各种请求，然后由 Coordinator 负责执行消费者组的注册、成员管理记录等元数据管理操作。</p><h4 id="消费者组是怎么找到自己的coordinator的？"><a href="#消费者组是怎么找到自己的coordinator的？" class="headerlink" title="消费者组是怎么找到自己的coordinator的？"></a>消费者组是怎么找到自己的coordinator的？</h4><p>既然coordinator是运行在broker上的一个程序，那么一个消费者组，是怎么找到自己的coordinator的呢？</p><p>怎么找？是通过之前说过的__consumer_offset这个主题来找的</p><p>分为两步</p><ul><li>获取当前消费者组所在的groupid，然后hash得到hash值；</li><li>获取__consumer_offset的分区数，默认是50</li><li>计算 ：abs ( hash % 50 ) &#x3D; 分区号</li><li>然后，找到这个分区号的leader副本所在的broker；这个broker就是这个消费者的coordinator</li></ul><h3 id="消费者组重平衡能避免嘛"><a href="#消费者组重平衡能避免嘛" class="headerlink" title="消费者组重平衡能避免嘛"></a>消费者组重平衡能避免嘛</h3><p>首先，明确一个概念，目前Rebalance的弊端（慢，STW）这2个弊端，社区是没有办法解决的；</p><p>针对Rebalance的效率低的情况，社区采用了StickyAssignor的分区分配策略来提升性能；</p><p>既然无法解决，那我们只能尽量避免，怎么避免呢？就要从导致Rebalance发生的三种情况来看</p><ul><li>组成员数量发生变化（99%的Rebalance都是这个原因）</li><li>订阅主题数量发生变化（一般是程序开发者主动操作，无法避免）</li><li>订阅主题的分区数发生变化（一般是程序开发者主动操作，无法避免）</li></ul><p>组成员数量发生变化，变化分为两种，一种是增加，一种是减少</p><ul><li>增加：一般都是程序开发者主动操作，比如为了提升topic的消费速率</li><li>减少：如果是主动停掉的，那自不必说，关键是在某些情况下，Consumer 实例会被 Coordinator 错误地认为“已停止”从而被“踢出”Group。如果是这个原因导致的 Rebalance，我们就不能不管了。</li></ul><h4 id="什么时候coordinator会认为consumer实例已经挂掉了"><a href="#什么时候coordinator会认为consumer实例已经挂掉了" class="headerlink" title="什么时候coordinator会认为consumer实例已经挂掉了"></a>什么时候coordinator会认为consumer实例已经挂掉了</h4><ul><li>coordinator没有收到consumer的心跳，就会让consumer离组，重新Rebalance<ul><li>Consumer 端有个参数，叫 session.timeout.ms，默认10秒；coordinator在10s内没有收到consumer的心跳，就Rebalance</li><li>心跳是consumer主动给coordinator的，那么多久一次呢？<ul><li>是由参数：heartbeat.interval.ms控制的；</li></ul></li><li>说明：session.timeout.ms&#x3D;6s，heartbeat.interval.ms&#x3D;2s：要保证 Consumer 实例在被判定为“dead”之前，能够发送至少 3 轮的心跳请求，即 session.timeout.ms &gt;&#x3D; 3 * heartbeat.interval.ms。</li></ul></li><li>consumer实例在一定时间内无法消费完拉取到数据，就会主动离组，重新Rebalance<ul><li>Consumer 端有个参数，max.poll.interval.ms 参数，默认五分钟</li><li>一个consumer在5分钟内，没有消费完拉取的数据，就Rebalance</li></ul></li><li>consumer端的GC情况</li></ul><p>standalone consumer就没有rebalance一说了。 它的特点主要是灵活。</p><p>虽然社区一直在改进rebalance的性能，但大数据量下consumer group机制依然有很多弊病（比如rebalance太慢等）</p><p>所以很多大数据框架(Spark &#x2F;Flink)的kafka connector并不使用group机制，而是使用standalone consumer</p><h3 id="怎么排查生产是否Rebalance过多"><a href="#怎么排查生产是否Rebalance过多" class="headerlink" title="怎么排查生产是否Rebalance过多"></a>怎么排查生产是否Rebalance过多</h3><p>去找Coordinator所在的broker日志，如果经常发生rebalance，会有类似于”(Re)join group” 之类的日志</p><h2 id="Java消费者是如何管理TCP连接的"><a href="#Java消费者是如何管理TCP连接的" class="headerlink" title="Java消费者是如何管理TCP连接的"></a>Java消费者是如何管理TCP连接的</h2><img src="kafka从入门到入土.assets/image-20220828211956299.png" alt="image-20220828211956299" style="zoom:50%;" /><h3 id="消费者是什么时候创建TCP连接的"><a href="#消费者是什么时候创建TCP连接的" class="headerlink" title="消费者是什么时候创建TCP连接的"></a>消费者是什么时候创建TCP连接的</h3><ul><li>生产者是在new KakfaProducer的时候，后台开启一个Sender的线程用来创建TCP连接的；</li><li>消费者<strong>不是</strong>在实例化的时候创建的，而是在开始消费消息的时候（consumer.poll）才主动创建TCP连接，准确的说有三个时机<ul><li>发起FindCoordinator请求时（连接的brokerId是-1，因为不知道连哪一个）</li><li>连接协调者的时候（连接的brokerId是Interger.Max-协调者所在broker的Id号，为什么这么设计，为了防止连接重用）</li><li>真正消费消息的时候（连接某个topic的某个分区的leader副本所在的broker）</li></ul></li></ul><h3 id="创建多少个TCP连接"><a href="#创建多少个TCP连接" class="headerlink" title="创建多少个TCP连接"></a>创建多少个TCP连接</h3><p>会创建三类TCP连接</p><ul><li>FindCoordinator请求与任意一个broker的TCP连接</li><li>与Coordinator的连接，此时消费者才能真正的开始工作</li><li>与分区所在leader副本的TCP连接，拉取消息，真正开始处理</li></ul><p>其中第一类（FIndCoordinator请求与任意一个Broker的连接）会在消费者真正开始处理消息的时候，也就是后面两类TCP连接建立好之后，第一类连接会被关闭掉；</p><h3 id="消费者是什么时候关闭TCP连接的"><a href="#消费者是什么时候关闭TCP连接的" class="headerlink" title="消费者是什么时候关闭TCP连接的"></a>消费者是什么时候关闭TCP连接的</h3><p>上面说的三类连接，其中第一类连接会在二，三类连接创建好之后，被关闭掉；</p><p>二，三类连接的关闭场景有两种：</p><ul><li>主动关闭，这个不说了</li><li>kafka自动关闭，由 消费者端参数connection.max.idle.ms控制。当超过指定时间，该消费者没有消息消费时，就会被关闭连接（但是如果我们的消费逻辑是while循环的情况，则永远不会被关闭，因为一直与broker保持通信，实现了“长链接”的效果）</li></ul><h3 id="可能存在的问题"><a href="#可能存在的问题" class="headerlink" title="可能存在的问题"></a>可能存在的问题</h3><p>第一类 TCP 连接仅仅是为了首次获取元数据而创建的，后面就会被废弃掉。最根本的原因是，消费者在启动时还不知道 Kafka 集群的信息，只能使用“-1” 去注册，即使消费者获取了真实的 Broker ID，它依旧无法区分这个“-1”对应的是哪台 Broker，因此也就无法重用这个 Socket 连接，只能再重新创建一个新的连接。</p><p>为什么会出现这种情况呢？主要是因为目前 Kafka 仅仅使用 ID 这一个维度的数据来表征 Socket 连接信息。这点信息明显不足以确定连接的是哪台 Broker，也许在未来，社区应该考虑使用 &lt; 主机名、端口、ID&gt; 三元组的方式来定位 Socket 资源，这样或许能够让消费者程序少创建一些 TCP 连接。</p><p>也许你会问，反正 Kafka 有定时关闭机制，这算多大点事呢？其实，在实际场景中，我见过很多将 connection.max.idle.ms 设置成 -1，即禁用定时关闭的案例，如果是这样的话，这些 TCP 连接将不会被定期清除，只会成为永久的“僵尸”连接。基于这个原因，社区应该考虑更好的解决方案。</p><h2 id="kafka副本机制详解"><a href="#kafka副本机制详解" class="headerlink" title="kafka副本机制详解"></a>kafka副本机制详解</h2><h2 id="请求是怎么被处理的"><a href="#请求是怎么被处理的" class="headerlink" title="请求是怎么被处理的"></a>请求是怎么被处理的</h2><h2 id="消费者组重平衡全流程解析"><a href="#消费者组重平衡全流程解析" class="headerlink" title="消费者组重平衡全流程解析"></a>消费者组重平衡全流程解析</h2><h2 id="你一定不能错过得kafka控制器"><a href="#你一定不能错过得kafka控制器" class="headerlink" title="你一定不能错过得kafka控制器"></a>你一定不能错过得kafka控制器</h2><h2 id="关于高水位和Leader-Epoch的讨论"><a href="#关于高水位和Leader-Epoch的讨论" class="headerlink" title="关于高水位和Leader Epoch的讨论"></a>关于高水位和Leader Epoch的讨论</h2><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>为什么kafka不像mysql那样允许追随者副本（follower replica）对外提供只读服务？</p><p>kafka是怎么做到 提供一套 API 实现生产者和消费者？</p><p>kafka是怎么做到 降低网络传输和磁盘存储开销；</p><p>kafka是怎么做到 实现高伸缩性架构。</p><p>kafka为什么快，为什么高吞吐？</p><ul><li>消息日志（Log）只能追加写，避免了随机IO，改成了顺序IO，大大提高了写能力；</li></ul><p>你觉得 Kafka 未来的演进路线是怎么样的？如果你是 Kafka 社区的“掌舵人”，你准备带领整个社区奔向什么方向呢？</p><p>想你是一家创业公司的架构师，公司最近准备改造现有系统，引入 Kafka 作为消息中间件衔接上下游业务。作为架构师的你会怎么选择合适的 Kafka 发行版呢</p><p>kafka每天 1 亿条 1KB 大小的消息，保存两份且留存两周的时间，需要多大的磁盘空间？</p><p>如果需要kafka1小时内处理1TB的业务数据，在千兆网络下，需要多少台kafka机器？</p><p>kafka怎么实现的故障转移？</p><p>kafka是怎么保障大数据量均匀的分布在各个Broker上的？</p><p>kafka的零拷贝技术是什么？</p><ul><li><a href="https://blog.csdn.net/ljheee/article/details/99652448">https://blog.csdn.net/ljheee/article/details/99652448</a></li><li><a href="https://www.jianshu.com/p/835ec2d4c170">https://www.jianshu.com/p/835ec2d4c170</a></li></ul><p>broker端收到消息也会解压缩，进行消息校验，那么零拷贝还有用嘛？</p><p>consumer可以先提交offset，在处理消息嘛？</p><p>kafka的producer是在producer实例化的时候，创建的TCP连接，那么这个时候，producer都不知道要往那个topic发消息，那么就不知道要连接到哪个broker？kafka是怎么做的呢？</p><p>kafka在建立TCP连接的步骤中，有没有可以优化的地方，目前社区做的不好的地方？</p><p>丰网的kafka的消费者重复注册是怎么做的？是同一个消费者实例的多个线程，还是同一个消费者类，注册了多个bean；</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;kafka从入门到入土&quot;&gt;&lt;a href=&quot;#kafka从入门到入土&quot; class=&quot;headerlink&quot; title=&quot;kafka从入门到入土&quot;&gt;&lt;/a&gt;kafka从入门到入土&lt;/h1&gt;&lt;hr&gt;
&lt;h2 id=&quot;kafka中的一些术语&quot;&gt;&lt;a href=&quot;#k</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="消息中间件" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/"/>
    
    <category term="KAFKA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/KAFKA/"/>
    
    
    <category term="kafka" scheme="https://zhuansunpengcheng.gitee.io/tags/kafka/"/>
    
    <category term="生产者" scheme="https://zhuansunpengcheng.gitee.io/tags/%E7%94%9F%E4%BA%A7%E8%80%85/"/>
    
    <category term="消费者" scheme="https://zhuansunpengcheng.gitee.io/tags/%E6%B6%88%E8%B4%B9%E8%80%85/"/>
    
    <category term="消息" scheme="https://zhuansunpengcheng.gitee.io/tags/%E6%B6%88%E6%81%AF/"/>
    
    <category term="中间件" scheme="https://zhuansunpengcheng.gitee.io/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>oracle查询表的字段名类型注释</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/ORACLE/oracle%E6%9F%A5%E8%AF%A2%E8%A1%A8%E7%9A%84%E5%AD%97%E6%AE%B5%E5%90%8D%E7%B1%BB%E5%9E%8B%E6%B3%A8%E9%87%8A/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/ORACLE/oracle%E6%9F%A5%E8%AF%A2%E8%A1%A8%E7%9A%84%E5%AD%97%E6%AE%B5%E5%90%8D%E7%B1%BB%E5%9E%8B%E6%B3%A8%E9%87%8A/</id>
    <published>2022-10-31T10:57:46.464Z</published>
    <updated>2022-10-31T10:57:46.464Z</updated>
    
    <content type="html"><![CDATA[<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> a<span class="token punctuation">.</span>COLUMN_ID<span class="token punctuation">,</span> a<span class="token punctuation">.</span>TABLE_NAME<span class="token punctuation">,</span> a<span class="token punctuation">.</span>COLUMN_NAME<span class="token punctuation">,</span> a<span class="token punctuation">.</span>DATA_TYPE<span class="token punctuation">,</span> a<span class="token punctuation">.</span>DATA_LENGTH<span class="token punctuation">,</span> a<span class="token punctuation">.</span>NULLABLE<span class="token punctuation">,</span>b<span class="token punctuation">.</span>COMMENTS <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> COLUMN_ID<span class="token punctuation">,</span> TABLE_NAME<span class="token punctuation">,</span> COLUMN_NAME<span class="token punctuation">,</span> DATA_TYPE<span class="token punctuation">,</span> DATA_LENGTH<span class="token punctuation">,</span> NULLABLE  <span class="token keyword">FROM</span> ALL_TAB_COLUMNS <span class="token keyword">WHERE</span> TABLE_NAME <span class="token operator">=</span> <span class="token string">'这里改成表名'</span><span class="token punctuation">)</span> a <span class="token keyword">left</span> <span class="token keyword">join</span> <span class="token punctuation">(</span><span class="token keyword">select</span> TABLE_NAME<span class="token punctuation">,</span>COLUMN_NAME<span class="token punctuation">,</span>COMMENTS<span class="token keyword">from</span> user_col_comments<span class="token keyword">where</span> Table_Name<span class="token operator">=</span><span class="token string">'这里改成表名'</span><span class="token punctuation">)</span> b <span class="token keyword">on</span> a<span class="token punctuation">.</span>COLUMN_NAME <span class="token operator">=</span> b<span class="token punctuation">.</span>COLUMN_NAME <span class="token keyword">order</span> <span class="token keyword">by</span> a<span class="token punctuation">.</span>COLUMN_ID <span class="token keyword">asc</span> <span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;pre class=&quot;line-numbers language-sql&quot; data-language=&quot;sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;select&lt;/span&gt; a&lt;span class</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="数据库" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="ORACLE" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/ORACLE/"/>
    
    
    <category term="oracle" scheme="https://zhuansunpengcheng.gitee.io/tags/oracle/"/>
    
    <category term="表结构" scheme="https://zhuansunpengcheng.gitee.io/tags/%E8%A1%A8%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>oracle创建索引的一些规范</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/ORACLE/oracle%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9A%84%E4%B8%80%E4%BA%9B%E8%A7%84%E8%8C%83/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/ORACLE/oracle%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9A%84%E4%B8%80%E4%BA%9B%E8%A7%84%E8%8C%83/</id>
    <published>2022-10-31T10:57:46.463Z</published>
    <updated>2022-10-31T10:57:46.463Z</updated>
    
    <content type="html"><![CDATA[<p>1、表的主键、外键必须有索引；</p><p>2、数据量超过300的表应该有索引；</p><p>3、经常与其他表进行连接的表，在连接字段上应该建立索引；</p><p>4、经常出现在Where子句中的字段，特别是大表的字段，应该建立索引；</p><p>5、索引应该建在选择性高的字段上；</p><p>6、索引应该建在小字段上，对于大的文本字段甚至超长字段，不要建索引；</p><p>7、复合索引的建立需要进行仔细分析；尽量考虑用单字段索引代替：</p><p>A、正确选择复合索引中的主列字段，一般是选择性较好的字段；</p><p>B、复合索引的几个字段是否经常同时以AND方式出现在Where子句中？单字段查询是否极少甚至没有？如果是，则可以建立复合索引；否则考虑单字段索引；</p><p>C、如果复合索引中包含的字段经常单独出现在Where子句中，则分解为多个单字段索引；</p><p>D、如果复合索引所包含的字段超过3个，那么仔细考虑其必要性，考虑减少复合的字段；</p><p>E、如果既有单字段索引，又有这几个字段上的复合索引，一般可以删除复合索引；</p><p>8、频繁进行数据操作的表，不要建立太多的索引；</p><p>9、删除无用的索引，避免对执行计划造成负面影响；</p><p>以上是一些普遍的建立索引时的判断依据。一言以蔽之，索引的建立必须慎重，对每个索引的必要性都应该经过仔细分析，要有建立的依据。 因为太多的索引与不充分、不正确的索引对性能都毫无益处：在表上建立的每个索引都会增加存储开销，索引对于插入、删除、更新操作也 会增加处理上的开销。另外，过多的复合索引，在有单字段索引的情况下，一般都是没有存在价值的；相反，还会降低数据增加删除时的性 能，特别是对频繁更新的表来说，负面影响更大</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1、表的主键、外键必须有索引；&lt;/p&gt;
&lt;p&gt;2、数据量超过300的表应该有索引；&lt;/p&gt;
&lt;p&gt;3、经常与其他表进行连接的表，在连接字段上应该建立索引；&lt;/p&gt;
&lt;p&gt;4、经常出现在Where子句中的字段，特别是大表的字段，应该建立索引；&lt;/p&gt;
&lt;p&gt;5、索引应该建在选</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="数据库" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="ORACLE" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/ORACLE/"/>
    
    
    <category term="索引" scheme="https://zhuansunpengcheng.gitee.io/tags/%E7%B4%A2%E5%BC%95/"/>
    
    <category term="oracle" scheme="https://zhuansunpengcheng.gitee.io/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>mysql如何给大表加索引</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%BB%99%E5%A4%A7%E8%A1%A8%E5%8A%A0%E7%B4%A2%E5%BC%95/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%BB%99%E5%A4%A7%E8%A1%A8%E5%8A%A0%E7%B4%A2%E5%BC%95/</id>
    <published>2022-10-31T10:57:46.462Z</published>
    <updated>2022-10-31T10:57:46.462Z</updated>
    
    <content type="html"><![CDATA[<h1 id="mysql如何给大表加索引"><a href="#mysql如何给大表加索引" class="headerlink" title="mysql如何给大表加索引"></a>mysql如何给大表加索引</h1><p>给大表加索引、加字段属于DDL（数据定义语言）操作，任何对MySQL大表的DDL操作都值得警惕，不然很可能会引起锁表，报错<code>Waiting for meta data lock</code>，造成业务崩溃。那么如何对大表进行加索引操作？</p><h2 id="早期DDL原理"><a href="#早期DDL原理" class="headerlink" title="早期DDL原理"></a>早期DDL原理</h2><p>再谈如何对加大表加索引前，先谈一下MySQL DDL操作为什么会锁表？对于这个问题，需要先了解一下MySQL5.6.7之前的早期DDL原理。</p><p>早期DDL操作分为<code>copy table</code>和<code>inplace</code>两种方式。</p><h3 id="copy-table-方式"><a href="#copy-table-方式" class="headerlink" title="copy table 方式"></a>copy table 方式</h3><ol><li>创建与原表相同的<strong>临时表</strong>，并在临时表上执行DDL语句</li><li><strong>锁原表，不允许DML（数据操作语言），允许查询</strong></li><li>将原表中数据逐行拷贝至临时表（过程没有排序）</li><li>原表升级锁，禁止读写，即原表暂停服务</li><li>rename操作，将临时表重命名原表</li></ol><h3 id="inplace-方式"><a href="#inplace-方式" class="headerlink" title="inplace 方式"></a>inplace 方式</h3><p>fast index creation，仅支持索引的创建跟删除</p><ol><li>创建<strong>frm</strong>（表结构定义文件）临时文件</li><li><strong>锁原表，不允许DML（数据操作语言），允许查询</strong></li><li>根据聚集索引顺序构建新的索引项，按照顺序插入新的索引页</li><li>原表升级锁，禁止读写，即原表暂停服务</li><li>rename操作，替换原表的frm文件</li></ol><h3 id="copy方式-VS-inplace-方式？"><a href="#copy方式-VS-inplace-方式？" class="headerlink" title="copy方式  VS inplace 方式？"></a>copy方式  VS inplace 方式？</h3><p>inplace 方式相对于 copy 方式来说，inplace 不会生成临时表，不会发生数据拷贝，所以<strong>减少了I&#x2F;O资源占用</strong>。</p><p>inplace 只适用于<strong>索引的创建与删除</strong>，不适用于其他类的DDL语句。</p><p>不论是早期copy还是早期inplace方式的DDL，都会进行<strong>锁表操作，不允许DML操作，仅允许查询</strong>。</p><p>知道了DDL的机制，下面就了解一下“如何对大表进行加索引操作”！</p><h2 id="方案一：“影子策略”"><a href="#方案一：“影子策略”" class="headerlink" title="方案一：“影子策略”"></a>方案一：“影子策略”</h2><p>此方法来自《高性能MySQL》一书中的方案。</p><h3 id="方案思路"><a href="#方案思路" class="headerlink" title="方案思路"></a>方案思路</h3><ol><li>创建一张与原表（tb）结构相同的新表（tb_new）</li><li>在新表上创建索引</li><li>重命名原表为其他表名（tb &#x3D;&gt; tb_tmp），新表重命名为原表名（tb_new &#x3D;&gt; tb），此时新表（tb）承担业务</li><li>为原表（tb_tmp）新增索引</li><li>交换表，新表改回最初的名称（tb &#x3D;&gt; tb_new），原表改回最初的名称（tb_tmp &#x3D;&gt; tb），原表（tb）重新承担业务</li><li>把新表数据导入原表（即把新表承担业务期间产生的数据和到原表中）</li></ol><h3 id="如何实践"><a href="#如何实践" class="headerlink" title="如何实践"></a>如何实践</h3><p>SQL实现：</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># 以下sql对应上面六步</span><span class="token keyword">create</span> <span class="token keyword">table</span> tb_new <span class="token operator">like</span> tb<span class="token punctuation">;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> tb_new <span class="token keyword">add</span> <span class="token keyword">index</span> idx_col_name <span class="token punctuation">(</span>col_name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">rename</span> <span class="token keyword">table</span> tb <span class="token keyword">to</span> tb_tmp<span class="token punctuation">,</span> tb_new <span class="token keyword">to</span> tb<span class="token punctuation">;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> tb_tmp <span class="token keyword">add</span> <span class="token keyword">index</span> idx_col_name <span class="token punctuation">(</span>col_name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">rename</span> <span class="token keyword">table</span> tb <span class="token keyword">to</span> tb_new<span class="token punctuation">,</span> tb_tmp <span class="token operator">=</span><span class="token operator">></span> tb<span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> tb <span class="token punctuation">(</span>col_name1<span class="token punctuation">,</span> col_name2<span class="token punctuation">)</span> <span class="token keyword">select</span> col_name1<span class="token punctuation">,</span> col_name2 <span class="token keyword">from</span> tb_new<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="有哪些问题"><a href="#有哪些问题" class="headerlink" title="有哪些问题"></a>有哪些问题</h3><p>步骤3之后，新表改为原表名后（tb）开始承担业务，步骤3到结束之前这段时间的新产生的数据都是存在新表中的，但是如果有业务对老数据进行修改或删除操作，那将无法实现，所以步骤3到结束这段时间可能会产生数据（更新和删除）丢失。</p><h2 id="方案二：pt-online-schema-change"><a href="#方案二：pt-online-schema-change" class="headerlink" title="方案二：pt-online-schema-change"></a>方案二：pt-online-schema-change</h2><p>PERCONA提供若干维护MySQL的小工具，其中 pt-online-schema-change（简称pt-osc）便可用来相对安全地对大表进行DDL操作。</p><p>pt-online-schema-change 方案利用三个触发器（DELETE \ UPDATE \ INSERT触发器）解决了“影子策略”存在的问题，让新老表数据同步时发生的数据变动也能得到同步。</p><h3 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h3><ol><li>创建一张与原表结构相同的新表</li><li>对新表进行DDL操作（如加索引）</li><li>在原表上创建3个触发器（DELETE\UPDATE\INSERT），用来原表复制到新表时（步骤4）的数据改动时的同步</li><li>将原表数据以数据块（chunk）的形式复制到新表</li><li>表交换，原表重命名为old表，新表重命名原表名</li><li>删除旧表，删除触发器</li></ol><h3 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h3><p>见<a href="https://link.segmentfault.com/?enc=LZyogq6Wt0yUIXj9hpxKBw==.mTz7mGjIRe+qR0GQwjJJbmtqPnn6lrupLe5wCR/Ifh53ZSk4VgqnepCKNNljhT7ZB7O05511WulBpY8nkzJzgQ5naGBmq5SEkORgF1Gherdcemq6mzYwFFWwOCZsjHDu3xySOppPU4/a7DEPqjky2ZHYHysFX9DSq/MBxf+28uE=">使用 pt-online-schema-change 工具不锁表在线修改 MySQL 表结构</a>一文</p><h3 id="问题疑惑"><a href="#问题疑惑" class="headerlink" title="问题疑惑"></a>问题疑惑</h3><p>见<a href="https://link.segmentfault.com/?enc=vdd59uzwtDTSyc6GGmW28g==.GmAUReMDuDxsUXZZAz4TtsBNrADSH0I/7ue01BhFOnLOdi5ov0BegypEZQNbysVYFPaVXcTD2ShJmVMAT3L4bA==">pt-online-schema-change的原理解析与应用说明-问题解答</a></p><h2 id="方案三：ONLINE-DDL"><a href="#方案三：ONLINE-DDL" class="headerlink" title="方案三：ONLINE DDL"></a>方案三：ONLINE DDL</h2><p>MySQL5.6.7 之前由于DDL实现机制的局限性，常用“影子策略”和 pt-online-schema-change 方案进行DDL操作，保证相对安全性。在 MySQL5.6.7 版本中新推出了 Online DDL 特性，支持“无锁”DDL。5.7版本已趋于成熟，所以在5.7之后可以直接利用 ONLINE DDL特性。</p><p>对于 ONLINE DDL 下的 inplace 方式，分为了 <code>rebuild table</code> 和 <code>no-rebuild table</code>。</p><h3 id="Online-DDL执行阶段"><a href="#Online-DDL执行阶段" class="headerlink" title="Online DDL执行阶段"></a>Online DDL执行阶段</h3><p>大致可分为三个阶段：初始化、执行和提交</p><h4 id="Initialization阶段"><a href="#Initialization阶段" class="headerlink" title="Initialization阶段"></a>Initialization阶段</h4><p>此阶段会使用MDL读锁，禁止其他并发线程修改表结构<br>服务器将考虑存储引擎能力、语句中指定的操作以及用户指定的ALGORITHM 和 LOCK选项，确定操作期间允许的并发数</p><h4 id="Execution阶段"><a href="#Execution阶段" class="headerlink" title="Execution阶段"></a>Execution阶段</h4><p>此阶段分为两个步骤 Prepared and Executed<br>此阶段是否需要MDL写锁取决于Initialization阶段评估的因素，如果需要MDL写锁的话，仅在Prepared过程会短暂的使用MDL写锁<br>其中最耗时的是Excuted过程</p><h4 id="Commit-Table-Definition阶段"><a href="#Commit-Table-Definition阶段" class="headerlink" title="Commit Table Definition阶段"></a>Commit Table Definition阶段</h4><p>此阶段会将MDL读锁升级到MDL写锁，此阶段一般较快，因此独占锁的时间也较短<br>用新的表定义替换旧的表定义(如果rebuild table)</p><h3 id="ONLINE-DDL-过程"><a href="#ONLINE-DDL-过程" class="headerlink" title="ONLINE DDL 过程"></a>ONLINE DDL 过程</h3><ol><li>获取对应要操作表的 MDL（metadata lock）写锁</li><li>MDL写锁 降级成 MDL读锁</li><li>真正做DDL操作</li><li>MDL读锁 升级成 MDL写锁</li><li>释放MDL锁</li></ol><p>在第3步时，DDL操作时是不会进行锁表的，可以进行DML操作。但可能在拿DML写锁时锁住，见文章<a href="https://link.segmentfault.com/?enc=yKSiYtlA+/DHBQARytIswA==.NUd8BeocCVMVlmgOSLJOnJqrdCy9I5PIEfxDJPad8PVd/Sgo7PKv6xKNLtLSHj4Y">MySQL · 源码阅读 · 白话Online DDL</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;mysql如何给大表加索引&quot;&gt;&lt;a href=&quot;#mysql如何给大表加索引&quot; class=&quot;headerlink&quot; title=&quot;mysql如何给大表加索引&quot;&gt;&lt;/a&gt;mysql如何给大表加索引&lt;/h1&gt;&lt;p&gt;给大表加索引、加字段属于DDL（数据定义语言）操作，</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="数据库" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MYSQL" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/"/>
    
    
    <category term="mysql" scheme="https://zhuansunpengcheng.gitee.io/tags/mysql/"/>
    
    <category term="索引" scheme="https://zhuansunpengcheng.gitee.io/tags/%E7%B4%A2%E5%BC%95/"/>
    
  </entry>
  
  <entry>
    <title>单精度与双精度是什么意思，有什么区别？</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/%E5%8D%95%E7%B2%BE%E5%BA%A6%E4%B8%8E%E5%8F%8C%E7%B2%BE%E5%BA%A6%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/%E5%8D%95%E7%B2%BE%E5%BA%A6%E4%B8%8E%E5%8F%8C%E7%B2%BE%E5%BA%A6%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/</id>
    <published>2022-10-31T10:57:46.462Z</published>
    <updated>2022-10-31T10:57:46.462Z</updated>
    
    <content type="html"><![CDATA[<h1 id="单精度与双精度是什么意思，有什么区别？"><a href="#单精度与双精度是什么意思，有什么区别？" class="headerlink" title="单精度与双精度是什么意思，有什么区别？"></a>单精度与双精度是什么意思，有什么区别？</h1><hr><ul><li>单精度是这样的格式：1位符号，8位指数，23位小数（总共占32位）</li><li>所以在mysql中，float占用4个字节（32位）</li></ul><img src="单精度与双精度是什么意思有什么区别.assets/image-20220902113054136.png" alt="image-20220902113054136" style="zoom:80%;" /><ul><li>双精度是这样的格式：1位符号，11位指数，52位小数（总共占64位）</li><li>所以在mysql中，double占用8个字节（64位）</li></ul><img src="单精度与双精度是什么意思有什么区别.assets/image-20220902113110508.png" alt="image-20220902113110508" style="zoom:80%;" /><ul><li>那请问单精度为什么叫单精度，精度代表的是什么？单和双针对的又是谁？</li></ul><p>根据IEEE754的规范，要表达的数字占32位是个基准，称为“单”，32位的整数倍即为“几倍精度”。所以还有“半精度”、“双精度”、“四倍精度”、“任意精度”等。</p><img src="https://pic1.zhimg.com/v2-08470f89b22d899d31b192cf67c78624.png" alt="preview" style="zoom:80%;" />]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;单精度与双精度是什么意思，有什么区别？&quot;&gt;&lt;a href=&quot;#单精度与双精度是什么意思，有什么区别？&quot; class=&quot;headerlink&quot; title=&quot;单精度与双精度是什么意思，有什么区别？&quot;&gt;&lt;/a&gt;单精度与双精度是什么意思，有什么区别？&lt;/h1&gt;&lt;hr&gt;
</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="数据库" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MYSQL" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/"/>
    
    
    <category term="mysql" scheme="https://zhuansunpengcheng.gitee.io/tags/mysql/"/>
    
    <category term="单精度" scheme="https://zhuansunpengcheng.gitee.io/tags/%E5%8D%95%E7%B2%BE%E5%BA%A6/"/>
    
    <category term="双精度" scheme="https://zhuansunpengcheng.gitee.io/tags/%E5%8F%8C%E7%B2%BE%E5%BA%A6/"/>
    
  </entry>
  
  <entry>
    <title>mysql的索引从入门到入土</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%9A%84%E7%B4%A2%E5%BC%95%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%9A%84%E7%B4%A2%E5%BC%95%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/</id>
    <published>2022-10-31T10:57:46.461Z</published>
    <updated>2022-10-31T10:57:46.461Z</updated>
    
    <content type="html"><![CDATA[<h1 id="mysql的索引从入门到入土"><a href="#mysql的索引从入门到入土" class="headerlink" title="mysql的索引从入门到入土"></a>mysql的索引从入门到入土</h1><h2 id="索引的XMIND图"><a href="#索引的XMIND图" class="headerlink" title="索引的XMIND图"></a>索引的XMIND图</h2><p>文件位置：<a href="./mysql%E7%9A%84%E7%B4%A2%E5%BC%95%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F.assets/Mysql%E7%B4%A2%E5%BC%95.xmind">点我打开</a></p><h2 id="InnoB的索引模型（B-树）"><a href="#InnoB的索引模型（B-树）" class="headerlink" title="InnoB的索引模型（B+树）"></a>InnoB的索引模型（B+树）</h2><p>每一个索引在 InnoDB 里面对应一棵 B+ 树。</p><p>索引类型分为主键索引和非主键索引（普通索引或者二级索引）。</p><p>主键索引的叶子节点存的是整行数据。在 InnoDB 里，主键索引也被称为聚簇索引（clustered index）。</p><p>非主键索引的叶子节点内容是主键的值。在 InnoDB 里，非主键索引也被称为二级索引（secondary index）。</p><ul><li>InnoDB的索引和数据是放在同一个文件中的，索引innoDB：数据即索引，索引即数据</li><li>MyISAM的索引文件和数据文件是分开的</li><li>聚簇索引：聚簇索引不是一个索引类型，而是一个数据存储的方式，将索引和数据存放在一起，就叫做聚簇索引。</li><li>非聚簇索引：就是数据和索引分开存储；</li><li>在InnoDB中，主键索引的叶子节点存的就是数据，所以说InnoDB的主键索引就是聚簇索引</li><li>在InnoDB中，普通索引（二级索引）的叶子节点存的是主键，并不是数据，索引普通索引（二级索引）就是非聚簇索引；</li><li>在MyIASM中，因为索引文件和数据文件是分开的，所以MyISAM天然就是非聚簇索引。</li></ul><h2 id="索引维护（更新，页分裂，页合并）"><a href="#索引维护（更新，页分裂，页合并）" class="headerlink" title="索引维护（更新，页分裂，页合并）"></a>索引维护（更新，页分裂，页合并）</h2><p>为什么我们一般在建表的时候都会创建一个自增主键，及时表中有业务唯一的id，也会创建一个自增主键？</p><p>1、因为主键只会自增，在B+树中一直都是往后写的，不会触发页分裂；但是如果删除过多的话，会触发页合并；</p><p>2、要考虑业务唯一的id的长度，比如身份证号，如果用身份证号作为主键，比直接使用整型自增的主键占用的字节数要多，这样每一个页存放的数据就会少，每个页存的数据少了，这样查询的时候，效率就会低。 同时主键长度越小，普通索引的叶子节点就越小，普通索引占用的空间也就越小。</p><p>3、所以，从性能和存储空间方面考量，自增主键往往是更合理的选择。</p><h2 id="基于主键索引和普通索引的查询有什么区别？"><a href="#基于主键索引和普通索引的查询有什么区别？" class="headerlink" title="基于主键索引和普通索引的查询有什么区别？"></a>基于主键索引和普通索引的查询有什么区别？</h2><p>回表</p><p>回表的优化：覆盖索引，最左前缀原则，索引下推</p><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="普通索引和唯一索引怎么选择？"><a href="#普通索引和唯一索引怎么选择？" class="headerlink" title="普通索引和唯一索引怎么选择？"></a>普通索引和唯一索引怎么选择？</h3><ul><li><p>普通索引和唯一索引对查询的影响？ </p></li><li><p>微乎其微，为什么？</p></li><li><p>普通索引和唯一索引对更新的影响？</p></li><li><p>change buffer是什么？</p></li><li><p>为什么唯一索引的更新就不能使用 change buffer，只有普通索引可以使用。</p></li><li><p>change buffer的优点和缺点是什么： 写多读少的场景和写多读多的场景；</p></li><li><p>change buffer 和 redo log的联系和区别。</p></li></ul><h3 id="为什么会选错索引，选错了怎么办？"><a href="#为什么会选错索引，选错了怎么办？" class="headerlink" title="为什么会选错索引，选错了怎么办？"></a>为什么会选错索引，选错了怎么办？</h3><ul><li><p>由于索引统计的更新机制，索引统计信息不准确导致的。</p></li><li><p>解决：重新采集统计信息：analyze table</p></li><li><p>解决：手动指定索引；force index</p></li></ul><h3 id="Mysql中有哪些索引"><a href="#Mysql中有哪些索引" class="headerlink" title="Mysql中有哪些索引"></a>Mysql中有哪些索引</h3><p>普通索引：最基本的索引，没有任何限制</p><p>唯一索引：与”普通索引”类似，不同的就是：索引列的值必须唯一，但允许有空值。</p><p>主键索引：它 是一种特殊的唯一索引，不允许有空值。</p><p>全文索引：仅可用于 MyISAM 表，针对较大的数据，生成全文索引很耗时好空间。</p><p>组合索引：为了更多的提高mysql效率可建立组合索引，遵循”最左前缀“原则。</p><h3 id="怎么对长字符串加索引"><a href="#怎么对长字符串加索引" class="headerlink" title="怎么对长字符串加索引"></a>怎么对长字符串加索引</h3><p>前缀索引</p><p>前缀索引对覆盖索引的影响</p><p>如果长字段选择性不够怎么办，比如身份证号，同一个地区前面都是一样的：</p><ul><li><p>倒序存储，多加一列hash；</p></li><li><p>不支持范围查询，只能等值查询</p></li></ul><h3 id="主键索引的B-树结构是什么样子的？"><a href="#主键索引的B-树结构是什么样子的？" class="headerlink" title="主键索引的B+树结构是什么样子的？"></a>主键索引的B+树结构是什么样子的？</h3><h3 id="普通索引的B-树结构是什么样子的？"><a href="#普通索引的B-树结构是什么样子的？" class="headerlink" title="普通索引的B+树结构是什么样子的？"></a>普通索引的B+树结构是什么样子的？</h3><h3 id="联合索引的B-树结构是什么样子的？"><a href="#联合索引的B-树结构是什么样子的？" class="headerlink" title="联合索引的B+树结构是什么样子的？"></a>联合索引的B+树结构是什么样子的？</h3><h3 id="索引的页分裂和页合并是怎么导致的，会有什么影响？具体的分裂和合并的过程是什么样子的？"><a href="#索引的页分裂和页合并是怎么导致的，会有什么影响？具体的分裂和合并的过程是什么样子的？" class="headerlink" title="索引的页分裂和页合并是怎么导致的，会有什么影响？具体的分裂和合并的过程是什么样子的？"></a>索引的页分裂和页合并是怎么导致的，会有什么影响？具体的分裂和合并的过程是什么样子的？</h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;mysql的索引从入门到入土&quot;&gt;&lt;a href=&quot;#mysql的索引从入门到入土&quot; class=&quot;headerlink&quot; title=&quot;mysql的索引从入门到入土&quot;&gt;&lt;/a&gt;mysql的索引从入门到入土&lt;/h1&gt;&lt;h2 id=&quot;索引的XMIND图&quot;&gt;&lt;a hre</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="数据库" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MYSQL" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/"/>
    
    
    <category term="mysql" scheme="https://zhuansunpengcheng.gitee.io/tags/mysql/"/>
    
    <category term="索引" scheme="https://zhuansunpengcheng.gitee.io/tags/%E7%B4%A2%E5%BC%95/"/>
    
  </entry>
  
  <entry>
    <title>mysql的日志从入门到入土</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%9A%84%E6%97%A5%E5%BF%97%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%9A%84%E6%97%A5%E5%BF%97%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/</id>
    <published>2022-10-31T10:57:46.460Z</published>
    <updated>2022-10-31T10:57:46.460Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="48bf2cc791ef37fb2067c0adc03e007a0ff353b2e5ff1710bae1ed15359e315d">9ed68e15df6e2e2c286860f9f9ac80be504b7900d729bdf8fd85c3744bbf51badd416cfd655b52ba8af144c8387cb9a64e14dfafe69a1f7acd1475b17c7f5f2b7bc5c4682040308f9859c2ba96abdafa4022c60c15fbdab47f8062c2f09ca09997c2ac1dd6873d50f18504fdd483ac09ba0a3d86c82fc472f0013412066737c751cf73f98349a4d536aa708c3459e2533b203c5c3e29d726edb8e4be8e3db095d6512c8e8f756ed3cc1d091d8cdfcb67dc6530a45f64b7e47bc177bbff5b71aa870b0bf99585022e5a2fd5e1ce99d1df0fa9b1098e2031795bb71f1111f765a5c9aade209fa5ef5f7aa34658e92f0cafad1bbf50d97504afd66893d1c2173d2a0c2519cc9eb34db430d0ac7240136a19b88f684b79e13ec1f1a38a254083c0185d5910c398ee23d9e85411dcf8dbf3ab0b905889ad4f9c10de4ca6692939417d0de4dccf4122d4840d024c35cb09b675d2f7e9fa508671d3752334f23a4448705fa0157db5c75657c4b1107af2ce5adfd6bbc182b64781d5cb57b44ea996095d2e6a7d8c29c0766b4fd79a892498013f9393c2e670ae70bae041fc5f09fafc8fc2214c1d1367516bf8a831ff2d0413133c9110fcd54cd8b4b232e301e18c110e95f2ddb2cd770672a2b551ff02f461932813ae05f219cb59427aa5043c400c3fef98cf891c3f83e8426ce17e64042d14783f21edfdbae4e7b707865a3213b16ba5fad9f46e8fa7d0063ae2e846ae0bf290856578c361097e6d5efabac97838e0877b9f3fb4e687bd0335edbff6c765e582afb2470b1a36bdd3e64c71f8ad96ef92b63125023cf29fdd547d4c5ad48b137172171716c263595bdc2991a7b9ed61dc63e9e4bdaf48931c387bd6e1db23f289b0c6d262e13734591d6de946115e1186679e1048c22ce712ead798d4ca96ddb8f12194c71d1b5e30006f81aed3ab043054f299111583ac5053b12ad7f0d01709091f228030278bf817ed2c399a83b039719ddaefbe370d3f98b9b8c6e5204515974b0a2ed22d9cfac693380a8f3a33fe9f29d73829040bb53759fb67740999277839f6aebc501392eebcf94188352c56673f280b01af7516cb8e72ddc4af7b85b9847363431920106f99749aab693ee7a39722dd70a6f456fefab0feb2300d205893db86de25dc744fbccbc2551d8725361464240ad37b032f4ae9f34fd1b5eeb2c4e0d1002bbfcd369a6fcdd4bfd3f8ebbe5a9dfd72a2742d73e6ddf90aa3d84a44d64deecd9f87c57096c3b9f2ea403e9af4fa415ca76523f0e12c197f7d055b71f00bf8c8e72805e9e6d1ff9db02d4705605de9fa392c2417a58d45f60e7b54e8db6afec097de914c5f2e9ef67a6e62b560802531718f0309c5dfeb07bc45a9fea82c50ada1fec3deb19ed6a86d7eb43a8fc4e4506cd2e3bd2481c5c85b095bcf2898c76e124af4305aebc2e3a57ade1747ecdfd02ab8c0c67d1b5b68f58899470aa84ff9ff96c4f593c416d61ee57481c5b03eebcbba3341f9df09ac2316c2cb7129eda094ac371d672cfd6f5087f7d30401a3b6179a88c5334af9626622aace4620a9424c1f7d4bc7c298e12b8bef7719f414e1d296250b920c57b54c1f632c5c8d76ff822eb7faa8970c0bcdc735db0088e25043a13e7410794f305a36f37ed070cdc2fde80836aa006483522ab95ff6f28bd66f8873a3a218ce730dd7d5e87c74420d667be8c7727b0322ddf6d20817355ea7427b6248c7a0522310388c7409d42584b13881d2facfc231ccf0602737261b49322a84852cf159cba7d9f8aa331a0e1a5b1e5a8ff3cac6547a863522caf9171865191c002b628da02ed963a1d4ee0842b15d712235974b547000e949c679b6c369c1c311a4e26b7ff96fba29f7366d4df198f79cf8189a23c3c4af74861755c50898aa5c12ea9043cc3d146980beb2cecaedacb82c45d12656d6c1e429eb656240f02668f0f9f6942277462d022276fffd7f4a60ce251034b1ee8de2eff8fc88b957ba592fc4b00b286e974188d50180965aa7a1e7d0e2f0e78013293b29da07541539a3c7eeefd2b366ca0f548075c5732261ccd6ac7c0aad68a2c5d377e1358854fc10638be6558abde562d2359c80dd6a6e2a5c591a41131e14a25fb5628019daabac9c460b3a349b65751281ddbb036217f026300bdb2784eab7aedf1ac45bc401650ec39db99c912dc9bcd454a8a74de1c89c7d133a2f65609d3e3ba10acdcabd143eed0782a9b628368d465951011d345febc1a8e12d3f14d613b2cffe2a463bb5f787a49ad005ca4970608bf32bcc70d0ec0fdc02839a2e6f3ef5a3dd56c69f71bbe0cb9c489099dd36ce636631d27eeb01fbcf13cc43ef643ece52e2e473ecfea893a2f347fda89a04d6179226d06ea4f3dd695e55bf686fc8d1ce6704a7ac7c84907f393621b943de22ad0a96ca984f5c689027c802191a1657dee3921a3f5a72a3753fb716226670646cb60675e562f2ff4de01cf22469fc2519b75b75fa523a3a5e72ee0260c6c2faff6a1424441167c2b3d6f525c5377b10d1ae4089ac873e0f2ab9a976c3f2a991158ebfbe73564f4379808b5a4956ff61fcf2626ab218fd1b1d64b532710eaf0bc558c484d24cad6694eff72f2901beae86387d6f217d954172605fd3bb77e63bb249b33fb163eb8fbdac8fa46695a72066c59d6ef832ea355c06aa68fa2d7ed1bb85818d57c5805379e2cd3d1114565f30e022c73d1dfe0895f946427522f59baa92d0c1f2ccbec30d93a9a4929cd061668c8143735f1a501f0a76473c67612fc2fea423efd69a2e7b3ab2e1b6bc6ab646bc560bfa23eda83f8ff459fbe10a88153d623420a0c6643c9e98a35119ac156b98d3b364edb63e1e06d4f6d0b179abf78ea6d2ceb33657830ffea7365d5c1c5befbc3b9ca29070d00dace7f763f3fdf308b9fe58e7fb6b727d31de68c90a2246218257c0503605d9723e56b12a2b0d2586c98fe52e8077b65efc772702023e78ae1e88b56396666968390255613ed0b5fc491ef49d2742e54c05c9c32440760ab8d0716bbf50dee32f9ed37fbe86347d45c3c063b143dd8840dc61acb7064d61daccb239c1a8f7d4bc47f2c62ddc14c880fdf3e3288aa8d793cedeceb4eb27ecbc6a61487ca6b33a983e92f3f547e135615a5ef7f79f8803936cb61ff372c2a58a9b5d56f1b42abc014add9cc127e74771b69a9264b66ce216a67b045a805c47feaf0a4e657f1733212c4aff84960fad95995b708aaab2fe7d43d04a10b4dea2cee5aedcfa5f2c1365c6bd3cea03d9e5a17e88ba07e204489975cd0a3b1c3ada7b69427d1fcb1168c7c6963fd8391824a5b52d170cac1393b26a2b3030c231e044ee9b65dab3d3cac4b034c84a8714db28083bca1812c2098300043146dc002898a77fa0a33c5a748325ac89dfe0b78b9511611f10be5528914fcd89e1316686ac95b6931bb6fc0ea5a088131163a58944643070ba0aa6d6c585d7e85a776526be70aaf562c1bd716d2a37070ec058e7e9970a1e72e79f9813d95c2b50ed6d7ad8721a2fd1193645bcbc67cacdc40ca2c8eff304b6023e9fe1de85676972850a37d346755c091750a855c4fea5023c4fd00bc78b89e6ba00bf90ce123f79696453aee1115fda1e39bf8fe35e67faa4f1125b104f50c1963915c52382a2261e47a5ec8369765bc587f5e9cbdea46b5e44c3fe897893ff5811440a271f96685544b8bfcf739265ce4e135928dabf2c0495f3a7a2ea80283b957e853293b5502b7bebc2af1bbbfea078c1c884e835d69099e386d0d3143b8ab655fa6f77fb058fce7e2db955cb0c8bef085b865359a7bac68b96e7ba66468a53a492d832fcedb0ed5f43d0c7a47287e80568b7068a42efca9dd17b0f60c34625072cb93aa3c50c1f4608afbfe6ef9ae8ffea13d8ac232c2caf3ee22ad5768eb99117c2389279a5b12a30a5888707ccdd2618c85d5e8f3490427b3b45d233a94150ea9249242eacf93ca528e3c69e20763312d8f339a74fbbd5d3c29f29200324a850e405cfb66995b022870ac6e4e19c05087e6cf71d025412374cc1d6856a14a63d4fcef11ad0e7d6874ec2497c6eb31ded113e8d6a9392a7d2f92cd54ceae822710f28a2f506e910ab9890b9010d61143c1d8c0c4292b24c624733dcd1ecb0f885e8111d34041af3ffac9fc8eaa3159764880ebef67fca752278710412fd6cb7cb36303ae08ec054326565b3fc10fd74bf927b454bb4cbf4ec41818a1474748aeae7fdddece5a059a1a9c654626fc6e553e642eb59e0c63919b9ffc6622fd3fec941835650ee7467b7fb08c1d7798af997bb92826949f9e624ba7721eceaed1cf5bf44c76d8b01d97002c5fab94e8a1299d4b3549035d830b4c73afe9df931b59da62c5f5b187e0b3221cf41e1cef74f7601fdf1be55eddd526c85ab5ba629528475796681dd995269605cdcc0f79e3314bef098a9efe01f6549295585819c76aa3762b5f067a7e47c255d2fb917ef6c7fbc59060baddb15b7d0b1876c0bd15f79528a8d913e30498df332aaae6434485c365c12d504d100fbe218435c6c74807fa7f1b76968c7c1395b62a4d2569d6e535c2d05f2d8e95dced33ba7f13d390861e362435cd5a67461f22b04ccce881aa81bcf0bd613656b78f9d2fd011afb14fb637396934f1decad38c142b489329893934cbe313efc04f3a9e5b05c5f47664d48ea29b4d5e6692936744255c6cfa9320abb2a1eb5d47a66565656b75b239c945273f6d0febdae074444afe81f76db3b5d391175b65f29c803acd09cba9f00c875861561440f4bb02eb093207fc431e360bd0d6034b77454b7630a351d2b356c2a3a6e083e34c40af65f67308b1dfd8af0ccb8d538c11370d814b27ffb1d2f721feeee4a3210307bce0387228d2417728c97a2e9bc64dc35e1a6cf0efda2ef53cfb4e30c25242f0187f72a52722371dfb7d669214937abe7a8773471e7d3a523cd7f8eae813fc2048321a9cdf97ac2a8472f520d37d08d945b912312faceb9edbee109deddd79980d66cc6f3ba5e74b8365f6d3af0d348c350a230ecfdd9518be7276eb34429546fe044c1081079b9c6648a934be82e2becf81975d914765c1f77cbf3779e8bfea27b554a4fdb02caec6b46c7fd3a72b18f90ce471fb0b547a3e7735ab8979e5a96f461565edc558143d4e4ecc74ec0c488a6cf0d00d799526aa33f43c839ba4f759c160a35f58e109649ed3101fbe91dad959ed2f4b3c4d75acceff233e21c4be2acadfb89ed8b691778b8f959e532850b9914706cd05ab21bcebac3a0b27b108163c2b41cb8ab817a8ad263a62fca2d15679e265754e3918c0870cc81ae7b635b9afc9787fb7101fe96c86a4470c138642678727c04038b58645efd022139cba238b91b70b1f45d3c4c305c4409b2c024912e5fff40b2b731ecb8b6cc1a96d3597459f370cd102c35b2e01362bfc3793d715a530162e5e2639051c5ba9be02e6d2b58631dea2f1f80a7278dd3e1cc9a287ecd5bbfd321d9d24807a7c061e83c11a6b4f23a0dab64559779adb3a50a987119c6ce7b983b2bd7e9025694473543cb02fd19470db0c3f02f6894c39e12475a77b80cdc22779a381c73c467a83c01914272cb808ad8e0f0c984fee35373ff918668b7a448aaad70c5492fbe6a0e4adf173ca95529c02f5ad4d7dcf851f10e1060ec114516d0e11bab07f4e6a7c44a67b4a3ef8021ed402e80acb43caf4e4ac0906e2132ddd493ea3520810909892544abf6b83b30a353a03bc291d15ed9e1eec2d7b4d056cdd72101feae31dd6585f6d4d61b5a7615de19e625a68536184a4c72a6350ae3fb78405960aae18d89f41537f893819eaea07e3fbd04c5867941d0be30acb8935f0d3082ccc3dd75f070ee92008d0f44a7d007e270ad286b7ae444f514f4ced3eb714be99e34e7625edf98469f5385394340b3cebd4fa663c6972d911036d24dfeacd4c38aaddbf519eb084a9a8481b07e8010b37971438466ef3a8b1c71528b5ae4b7b6976c1c451328fddc619c48cf43ae591fadf8880a6017af092107b5cece244fa0de226733b2e9ed03041e3057eff90eb6f30cce8d4181a85542ca0e4e53a12ce8677b70479a9755751f4a47f024d503f00759514382b7e1d87aa7f8810a70ebbf45750197c28db28b4bca99314cf55f55ce2a604b07dcc163be0a795e04fce98ed5c4c754bd8b872a031024538deb1edc59b27f9ccf5f3ac73d0f8103b2924915551255c89eed23b19335c3b23f2288e5dbfdfac4a0efbc8212ad8d1950518596c7cb0136fde71bf261890206b0b59b70af11ee57f4fbd7ce58720a1bbd94e2d91f1fbdeb7dbb7ef3366285f1dbb5cc3711c2ac48514c6167fde931f37d91cfb92fa37551f86d6fef7b6070f57ee3adce6631a5b2f34b2de90a7bf390133864737c6f073d904a02fcbcad736f522928426bc9ac15076db9ca068ef4c4402aa3138bb68dce05c1facd565cb18ad10bebb1ba5f652e90f3c1b40bf800aa21ce43a384cbc0301205c495e36b6fa0ce88d1f93c0d13efd7bf122d0e6a6f78bf3c5cb97735e772c841cbeaa30577627f76dc8be4cfd8e5d5065bf7e7c9b211da836f937eaea4f8ceaa4340f78a1960751923b2f549b6fee4e05057cff727c71dd14ba1fcf476ac224ce5540333451c132ea363fa94525699d05b44ee6eb588b2c12c86d433879f1a277683744bf872beee66365c42429e41ac875c32f3e317ef3e322d43e008523a66002cebc7cf7494b44b8f62e49863e677c0bf3ae6446e5790ffba821afddea99d446d7f6706f406ed742cda09572b92c8c4971daecdc576906826385d9bd052044223fee5315e4d36d0c441a5180d260419f105bfa434e05bbab572b2477fc5c071599b20bcf0887f0ef84521f9870684741b57972eb15b22f0149fb25d7f1daa0a572f1d3b1f0b367d3360a6b4c854f4b41fd7ae4cd296b3fb0ee05f7711192876567856cd1ea50499311d16e10d8ff77853e09e84537f3535d2e527606d5a297e0973b2363f6eaafdd32e9ecad045c297053877f49053b6d4c57524a79ecc1db3098f8481d12c4f62de71f63a28ba0b2cf2f59d7dfe640647061faa9f240fac6f90d59abc08edb804814852d12e95a0a46fbddf6c5a7403d20297e817d895a1546c69bd8501069560b073899c6b5de9188ceb919e00cb8ede1ab82d8d57214ddb409420ba1594c872cf43181769d46433e8b5092e5a7c659d9f12aa566b4d53a47a8491d3f45d5af2bc65628db0a90e05f6ca2529db55ae62c37997ee2dbfa5cc9062a06f8b7eee7fa55f81cb1092d821d815ad997b72898d2f83eaf31e391cb22ff30bbbac0b3b2c6ac8a102a535c0db8cabfe484c1dae270b5730631a07a26b77b9ccec8a0c18fb12262ad0b98bac80aabf677c67ae9a81eecab63995484e79ca81857516997ee6294ca2016586989303ef92046675c8b20340e218161ba1dbf7731250b42ea62d1eead81306e3e39cee1885de2db5a5a061034e29fb3a0813d7dcec06c008dbca7335ecc3675424d6cb5882f2cc2911552758b58a6f4fb8650651d2bd4cb6260021128128a080dd74d46cf8a9748bb739bd001a94615b4560d6aaab7bfc203fc9bb6dc70f12c0ed57f1a92af87f4de4b7a327019337e0e51f12bd2e18a883649c1109a962eb2a7d27742409dcaf7828a5e6c5de0fdb8f523e2b7fbba4c462dd08224a96104c995488a11b0eecc2e89485619cc49fcc0d6be434566f0e5a089c1e560346b20a4c4c5848cbd9e0b00e0c4ed72d276d667fc13bf9e3a90f0fc3d8486e5d0cb2d0ae875599bb6695c688ec9fa435f8dd4082b75ff05350ca02722bbe537bbb207e3609d28371d05eb4b564d236d1bd57384e586422c8044b7ba936e64f75593675063f709a70ea663ff0c81ed36ae9363413b768f00f8cd2b8e801b56172f2797974582c778af493ce8d9e18dd90190361bd629b76c56215d4f2d0f7719c90d17c147a57562422257c06b0ebd3c3d14ca6edc9c62bd102faa99c24aa1447412efdaf0587a446275f026ea1bf0d578074794b7c894879cd3641859eceaf02c3fdd86aef2483642d3e36352b1be9228b65d6f01d1ffbdf9a7193570c57517259cf1ae0070799f926fe0e2674430cd67a5a37b645d20ddcff8caf81b03c386a46f79e49254d813ee304a68591c805a9df8e18d0115cf3503ceecb34ba9d68c53b7257e4b5a806382b12e5067dbea36b416ffa2728bea5c62381ab2597fd655f4cd73f1af1b0b5fdf9170b5f6c781c54de38bd692c5a3a17b77c3314af05ea93608b9e43eca6c561b25f5ed7209396aa80e2327169224f1e78dc201b077bc79b18025074962a6e2e5fff645d8e367a97d63a302e3edda5f1d9f927dccebd198b68725d9cfc36d9b9b0ea039072de047c6cbc3b72005856868aeb7b3fe2478e7f8024a81b95844547e33054e94404fcf7118cecd4ec5d036d5370d2951e5b6f6c9cdb77b3c9cc85fd52526cd995f99d5527e7c9d0bfcbaa6c10b73006a9434089ff6886df6b43f9cbe5f9c6463eee309aa47ac6b960613246fd99da91841220435d7bd53e390accf8ac9713ff9f2538332dce1a637951629aff00f025dc28eb41876583bc6854c1a6095d6c5f6a65b7bdc74d50897a6374e617c2f497835909c6dafb8cc49bc84b0f8c053e5e4ce39ecc8850ada46f4466a82f364dadb570c593283069feedff50d85ee4707ffa1c63e7feaf0e8a97a542c5781b390f8d54909356ae571e200508f34b89e9f2250bbf39e6e460f4298d56c6bcc24a5a73cf2e12da9249b1a4cfc0d92c1ee0f2056fcf8e2f0b6780949f0e1cba3e5de381e86f28e6d87ab6f091874d56c06a88a43060a9067ac23bc4941a468e88daa0b0bbbee783ace08dd061e0b79599b82b6849758fd0543834169598812c72ef0e7b9c14fbf424a6c6001f163cf1a67b369101a101bff67f13642173ebe656eb388d847f56ddba5f4c14dbf7b003ff6bd25f801bfc21f6cd4c780d9f8a412575511a5ca8e9da310233ea91878b320d71039aea506f44eeb2a04ec14042e25f103b39edfa73aab561e8f702fef1ccf593e4dc906a330ce64702751f65c3747085a5efa90b03fb971c8d955c9c929a71af9af264907a6972d2a656d316d7cbc35113ae7b8cd2b5209d0642b754747f7cf64a736f9654a472c498daf20ff03eefd4c07782c56c867e9e4d84ecc7cd492bcccc0f363bc3c665927d2c4a47a1b08d27c63fa1de96e0f28317d7b63a30ecaf07302bb2dfbf1be171e0198a96a02262e4b28823d723a8d293b9f46388f77c24c46b78b2690f7047c91160a626b69c853fa6f19173bd5aad461f1c0202853dd2e7e37dc9e5c5b02e61078f3fd595b2006983182c7f18fa6a89641030d9d75cca008752b3fc3d87fd55863c811c7a012a2c4bfe33fbc92f954c310a868003493665e0f05cf1c2961ef3ee220b87942a123a502e2c83bb1fa7dbcf0b5c139d6c61d8bc2e1e902d8b4c0dbab3a8918572437ab32fe18c44f72c9e1761428fc2b2d8803b8d0996de826d279d447c71a286b4bdbd2998a26b58d5edada7e8bc1930b66b9731c2401b649fd576f58437cccc89542d0424683a78ba0b23ccd92c2dff9ebbe853a6628912d0ca8e3b9a44b9ef28f90eb874d503c58a469bdee73bc9b9e9a3981a60f301a814c09395c9fa6f78f9390855edf2b181fe471b4da3fe0091ce189743282647c2dfd5f73ba68c67823ae96b3a0725c31e0332a0b90f29759853826ad203d745f984db1e1e83e5769f9f3c6dd28531ba77bd386865a203433cbec7f1c5cb6894c378f977acfd2b011c44068a408deb85bba4f57ba41ccaf4f6b1f49618ef5add75129d2a719fea9b74e598d20e9d9e94582f1ce83e9cdae54cf6c5b79532f4170f3b975f021aa4354903be54e8b525d8a03144d8971da8e873c04f65dfb7a5deef63ea182cf5ac39dcdf9a9312e8f3ffb5639b28af582922b2e3877bf2a30d16a51a0250fa22e2cf643cf39daa61620b0f972e9fc3201f4b8363c547a3ce4e5ebef67514cd50778b5f441b5c276e4163671da7a49292a96da57acd3d9c2372d863f314750f57d84e924bf922913471819e4e35e61f1ff7a4b3efcb01d3cf73394234c473ecf8c6bd0cf2012badf1f1394d1d03503818d31771da695c743dd6a00a053e149b3a2d5ed55452fa933a316606d343a8b339280143ea84724b5e7a9c8e3b2d319ce53b1f0f3f8913fc6e10b3c95c18407b4d9838f7260215352ee2dab51f83ae49b0c5d1dd11bea4e48b9cea369e641190d913fe02029a706f6a2030fab7187706e74ec254b74028b2e29e8c72b61272ac6ab256b32bdfdd8bae996cffb4d766349bef5475562641fb35f7cb961efbebe8ccb4f26fe50d12c083a31f3a34ad3ba5f6e18bdbe25c0b595142a8d826f293f21317591ab8bfb4aef9327a651816c5a64e1a4e668580673eeee0cba07f83d8cfaa1045a15047c0d11db4c139a76e2f2626d93166dbaff10c7fcabe557f378a4ffcf2e5631a10e5ce35a624df797446b7c49f56bfb56b692bc3a46ab9c24012f40763224569c9e7e507a043f9259f16b14d6e7f5625a92356de7b9076b97bdc1aecfcda12e01477c5d2aab77d5fbe6950af5803cc376f0501288656b05f6c99b5db7d4795dcc97db94937b472d2edda19ed725095debfd75467a4d7267a4f036a5972379cda364b72a0edb13660ba0cd09ec40b737cfe9f6a3200f0c1c420723ba4ce51e1755ca6accf0e58a932d53af20e3f84bd95fb0fb923fe3b9a0de87fdf821d72514ec4f00cd20a161feb4bd67c2422cebd35ab15b0b62676b835becf8f71e67a79faa6d7e810d911de3873cbdb06ad53703cc8119b4e2ae4f776cbf879c9973bec3b6e9ec54679dffd5a970aac8bb171a28bf94f3a73c99acd43a3fa913b4b7e6e7c0b57086edc064259c8892eaceb60fa5f7edd764a33a2e001c435336bae47873a1d977cdb7e1596931370196749fb0e3a811ea79c28ee7f3bd70803ad452bbb3792443e614d8275dc9981ba89be2bc450de76acd54f700a47ff94f0bbb7e13250a3eb175094d675bb82081cc5630f2c34600cc4d4337c9ece716d8b68947a5c619a99e3e02202d3ca2c8b7c99b46b504eab48a2bb757c974def92a64cfedef974593a2e308445a4972eb27fd9c81d628b0362de0259a2a40e02c46163c89b7a884ba733fd7171c4c93eaa4718daefd70e06140bac03747ef6d07506ba4f093abfa3fd22cefb3dc61fbd848d7d2aa433c4f3b55ee13b0f5880ee48aec09209d3c4de8472cbdc2923b9743c6960fb5708b8574e2f39125526cafdd632c813a7157d13ce8ed52cb5ffa040999f12aaef4507b59081732033fd8b655121a6b55ce554da2b3929a06363ca5619af49e927f0ac5da8bb864dd8e4bd76414c9572d3cf2fb6649abbeda6926020f227741d743731fbd8135fe33e75ea433e33f567ef961c4b49940b74a34f59da7699748937565b37b4a5fad345f3cc8d4ff997a01ae5a09b88edb1d8c7f52c1b0dbfeb18664cd4631d3849ad164fa33c96f0e51c7b56b881a6aaf8e1d4d4b859b7e495aadc8d5a35207ea9d661d331eb2d3e25a8a1dd4c88d18c96865ade803c98215506e16b08a16c4fa280944a1972ebfb6302b56df318c0d196f3f90f247e1d3159ad0836ee177824d0f24c3a0d955712409fffb964c20c9589a6c3fa6d8e8de1b6e6af4668e7718171f4371da1b3affddb804dec50a339b5ec0a1494986888254e606f862fbf2eb54a8e57443a09989edd1669b3e4944d622f9f006aaf2d05b89e69f2e2b1dc3a2f3e87bb2d7c89065bcf34bea31421e1479190a8954ec3a1d0df4fc7825c169613bd3e076934385e96ccf3ddc6d0d67f970c6d257e3b4a3766473f1768c2fde264809121797469cb176180ebdb3f9f626f5cbf305759eeb60a045b1818580de96c82a90e9d51f7d819174b8ea5b673bd1cebc5881056f2ce5b347af9077f343372881453f0decf999be2f3449f09420c180b93354089d717d0b5a1afc087e50182315530d36196f3fe41215b43618c2961dbadfe3e71c09b7ebec1939513a133692a616d66341da5de9176ecc8c38a00ce5e39601eb059706a9fc3613e7c6c5b01b6f3bad5da47597dadeac7b9701330323d06929db1caf4c5d88408ebc1cfde884acfff76f8302412b8cf9223d585d48cfbb4b56a7f4d7e022d0ff9f08b984831fef58882b90673ed90d5a800b8b1e95168aff880fe833ea79c981fe2ca13ccba3650f4df85857fe2a6c98e36c441b37f224ec9ab79c7fd1887450aaa111e99713d2fd420b08009df5313a359ab6c4fdb5b0d9dbf15873650761d08a1e987834497b6f62ffade0df5e36e37d32f6bc37fd6f43cc07e351087038899bcd8c61becaa4d8d84830350153158b900e70b8b0f5a478310529e561c17a8caec34ec6f93cde21ae12f774e18603e8af6cdc985ff21d7b90d76b84c86bd0f309427758d0537056a7aaf90f4f42c1e186af228ddf03bb487e915d2d3e704897cafc114dbd6606acd83de6d4ae10b69ec9effef31be8f6e3319e14d5b8f3192d50f45ccb9f341cd42a74c305f2ff6f5faf14a7f3aad49e1e83287529ebada52925b707d46e85c406ec0ab01bb0692d2c251a02d824018509bde772fe3fa5f99b032de532c40ed9e8d8cf2c2913812c9e45e2616a5a2bb732476657cd95d9fa006c6d2a1d4b01c96ddde4108c5383964a57c8754c903972053842a8162ca557732d49a1a4336236c052849e73b07667cc1cf22a9846d6073b15f86814236951895a4238490a071b92b3e5bb4b1c464f68bb252d8c62b304597853c69ffdc2607937921661cae344165e207d0d5feab1861d9bbc749058923e928f6fc50a25c869c4cf96b1456cc9366299302c84d40a3bc1f9a9ee7d4f1d6c57706bf5bdeae0fcaf7e3fa30eb7144cd6bba32bcfa1933bc14572f53bf9b9922b988a963f09334206e3512154efc8ae0f12bed9ee0791c4a2406dcaea3370a9290693f9e4a2a4ace7d263716ec9d0247d16c2b6e01ad9419ca4e48209223f9f8f88f64d6735fa8a405624ba36d4871b341801ff007046ecd8b9b48f4f88f0515c654c46415a09a4445141f512d8812339b55b93447e8169a497170da5e3ab9373b891b18f6a80e2b8775a3e7d66832a5735bfefc51549ff73a7d72c227e4460f6283f0589cbe8664a597e8a0f48b10c7a95e08d7e68fcf346edc2d95b355a42d6c2631908168c19f1d06ce92712459ff34800f1859b493c697c5e4940ad478af2646753874c765a1a44d8650bc95f7e78aca1d5f188f86fcd0c816fb2db60011416b747072bb07d6a2227b49b5160c8b13a8df9b4fc7ce253de9ea804ed5b0a338f14a6af9c5b914a67b884cbb53d1f4b412f890f329a43fd5d05bb615e7989e6a464436b367a54eb3cc579b4c81aa4008135c4437b9a5baf5de666430c742cf0d6f767dfd991579149551788466aae62900b2436cc67ea1568ad3a1c249364dc3a6f047549dcc8c6ac74dd8bfb7f522e3c9f9845b7390caada264df6ab3bd1c7528fae70c32aacfb98d62b8e56ce337dd75cd7228a97d25ac1db5bb32853b7414b5310e941dd4af812c886e32a4578b46aa8a39bb848c6da32944c7fc8c507e30de34521db71586649a737044c9f20dee6719e4a6b136c62ae3a0048c6b4e0e735fb17175f89d20dcb23c52b11132b54194098ac64f510d24f278a2beb1ed08cb4ae9b1d3b69597e556953a3ced98896bb024294861b0255b727a6f1313ec5b4b3dba2f2f816848e454fc1bfefd662102002c32af614c8ee05db042f0294c402de24ab323c034e5fdf0cfae88c1a6b7d562e564bc0f15f54f23fc801e06e6301b506125dd9cc2ae415c31fc488f67b26c23bc1e9e909947a1bdd00861c2a27d3095dada6f6c620fb5176679c162aac0a306b154e9327c59c0e2bf6c6c690116f60b569936e2f75b0db9ca54d3fe9d3fb322f7d4eb0b9e907b45dfb65fc01a26132c22998dff543ca14bcc55c577cad72463d73a06f92f0acd65c6ae57ddc0d0078bd4e8391ac3c498f34dd2ddc5e63b96f3e4efe232e0f7fdc277b71bf20e4b264f0a1c09bcdd9d88468b2cf130d18515b228dd7f5298c84d76ac57b88f0f4327ae0bb7ea1d624193ed5133a1b7e3c2de205f09b1e0e70c76e8301d73d2832d530dfb2af1fed738ecfd93374d99d29dfa3559915fceb3e1d7fefaabd08f38cedb764fcfb937f5a2009bb524d3351916f658c75549ecbabc4d0610abe06c152e77e0ce7b8c0129acb8341e2ab234e5b76b28a0f609c5c8c01eb6b080fde28b63ed99d1bc831f879cf2d5dcc573f7ed9f7b61f26a700f285cf7c781e8f08bc660307e94041e2d18cf52833b925e56c6ff4c0f4807ebfe2a0671087096d9f4ba73632fffb3992e2f895336f9f483942b7041244adbad96148ea1a91e3563b0a562a40ed682f92d647ae56c066cc0e5f5678dd3eb50acfa390584242a18a7090e6e3670d4cbcf01f4817ecb18ca3311f0ac60784b83cfd6c73472c88a6e51fabf63c8617076241e87a996a5debdb1bcd16fc87f4c3c75a575b04f9c8a52e9dde6e045ca0e7698c7fe9a74391044f663d7b19d7c2fb4c9a2f7240996a411560c52dd457cb90c72499a924841331d239f6c986a13d7b10ba470df6158e4499f9bad90dcc1b4af6822244afee5d6c7e91c6b7cf5bd80e6208dac04e1c42f0907b9751e4a91daa4930e39d0aa4e11bf3b9754a2beccd4b540adfcc8a19871777f6df6f9ff7fafb0195c7ebeb0ae1868776f20277d59811336afb0c8dd90be4c5380058a660035aba9466798ea85ffaf0f0d6a8cec68cb87c0708fddac754d70cb338e6c52117c6eefab885329067b5c078cb74b0c4c4ba22cb66880725d1fe115f3b676016b761172119b8bae1a8ed80ac7941cacb57412af5092e98f9c74637031548434e5ec8444b1b7fd53df69980786ed5e755314574997291fa3f137a0e2519a36c65351d63013bfea5bf8d23575e81dee295ba37f5cee76de347a216aebb7ab0314a535e42b4ca9a3386cfe9e2dda2ce2341b57a86a2f57e01e48a180a2b1951d96f58142495f9fe8f430e1ee1613d0e7dbd2e0fb54f1c9db48a6fdfe95831833a415cfc18c011411442a594a887906d2b3d87d5aedb60e722f9740c1f90425524c8f2b4f55f465844330b6fd46f074ce95955284b7c740a09577aceadde1b712c5468890240dd29be4b15d1600529058962f90517669edca2b9b2d8ee4da80ab23c0ca32e606e72084dd2b2368322f90542c05ff79d6ff60fa6c60dc59a57da7e0ab80c9658eeff3c32d0c79576a8b3ddc2f5e1b57020766049b51cf1af364c2faa234a4c2bc5e7b6689f7a48e9ec12510524a639f3db212148cbd47f42c84635479a4f23b8fcf2c5dd5720d1643e378a3914dacc17a2ad8ce1c1f36fabc1e5af66f013c8b1d0d5ab47f2e779dea85c6deb60ce12056a6dcfd57b3ae1c36f68fd246ef96f3415cd05ba33f338ec92536f0bb9137cc1ee0a2a33ed046c6cdf25315a2761b51a0bf9b4614225ac981f8c9a467a291b0e491198c66701e8879c777358f48c78320b342e22810c3825a1005488a2c2632a5d259c6eeaab9f99f1726b95b2bda535e75e757e1215342d6c550729fff489fc56f90a3d3e49840c46a0f8755f3cf18a81e7f8cde0928279bdcdca89e995e00264800bfc18dc6be61a90cb192ed83fb5102115532b5adc85c2d227c934617e392fa3bd226877d7da39239851cb18ac700898c76f69971cab76ab3fee585ca95803369af2da924fdcdf9738bdcf12068fc029fe4b2e062192ff15caedf34df916666cd04643d6c8b625ee28e35bf863df82e5695f86c23e6b0fffcd1391c45babe7693a913e86ca156a34f04f63714feaf185548a75bb5c163f110c7ea0ab1507bbe2b3bd9f7c831de81a34f0f21e65a7d7610d95f1000084746a26ab330cfb61ecdf41055b54a0205942e50289afbeaa77dc6676ce3a5731327a076a998614e0e0f86a3603b409b8a6d9b53a832e552ec8ec6de89280da17ea53ab796af82b3c84e5eb71edb747f21b29ac8334331216a8ea2e6659331bdec3b2ec5ec854189d2a482e1f67dbd02dd5e52b023b90118be6d864ab9dc189c6e4f7f4f1339c286f7a9e3e30a2a6b8150bf1142700a300b69bcefd431c2c5d2807e07002f7fc3a9e0610304491b126ffa81e440c28c4832d07fde0db571b6c0a48d813e1f929e6e6a4aa6ee85e5e8c76c55e6668888b94976c38c29c6a6af7ea1cf2775ea0873534e565cbaf669c64f43bb4cd1c1f00e65722b17e93eaf21491c08f7bfb5dbd5afc7a392bbdd8f122e4124b11fa4c4b3f636275b066c21bc84de091b8c07dcea49288a5cfb0e36d64cc14b2e5ffb4e2c10e1063af38e63a4074a845b73daac02150b5d27b20a8fbc6a29f06b1cbf352cf52f3a40f4680b128627a3c99b7e53ee0f7700c9b9d2059fd7b58bf3b674a1ff67545a9fa9bf91a99c1a6176b61ba726f1335003e566563943088e688f5578c9815ce614babd94e52258d0b66c467bdfc8eff3481f0727f05b6b183538d4c73808eb28e8419933675a179ccd12549efabd4ad245c87cee38fc4459b2e52af37dccb6d014f7ffb719af6359d8b42ddf31e973fc7233adda6033b7ea202b4471afc0fdb40bdaacb33f83e10d4a8cef0e9b653335ac4d4e5c7837f05adf315621b36593dde0b5a7319a97e138d63dd7a9593719ebc4f9d7d8b6e6f602df4a2df6a15891f1280d0d7590e0e43dc5dcc540a2d5288f369efcd0bb1b0c0abad86753c5146985df550ceafb3755d19c1c0313562af931fa903b1da00cc7fbdcce97304a3a4824adb082d81e94e309c7eef7a78a88e3785a90593a139ca02ecf7dd3edf84fac68a8c9cbe8b7a061144498d2e7dc07f42e26be195742540910755e0170ffc9df56dd77cff4bfc08d0e9015ba1680e315210a309e8606910c4f4bf25a3305fc1e19dcff4461726420d617b4f6721844f0c93e812a93ae7df0b98cc08762633fcefbf2a4204a13387d48aa049520a21682cc32351ff3c69201f29ce07961cf8e91ce8c098f00fa3e14698dc873dbfbefac84a8bd25b6c21dd245cc0fe0e772f5c69c0bdbd950b9b72a0fae75e72bfd791c237b94c87b07d5b78173b882f9aebe207639debc6ebb9416e55bd66c149a079d5bccc3c990f96ce5a63546bcd3d6c89cc7176c0e0555a2292085ff0a31302da14ba4031f38737b8143ed9370bb736d67baf5e1a2f1329e6f27a8476fb7674aab26231e83dd8303f60cec1041197e6d80a422c930ad159cafe295701ca76bf4e6aa5745ffa3fdccd180c11ac9136ddcb336d458fd5bcaed74427787f483590a84bd80cf608e41777c6ccd3d69327f2834af526fb09d08d1a66d377c96476a78439ef661a66d4c94f2af2281235bd71ce27473d9c7c0a2ab3238febfd5c9dfde071e8a7d811a6097c409d06c01ee19258a2391cbf764fa7e5c97e86e38a12a4d0f266d53162efebd7afad3e4a6be96aaa674e1faa009ca7336f9a378ca25846d41f9f790cb95e8ac51619df58ab12763e68936086a72340aefff893b930ac57f2f79457ac370ae9a02172a3cb3292c3367d94ee3677788994dd08ea42eeaf8bfbb0d3d859df71150c7d58a58cccec318097273b150ebaa2172a5075dbda1ddab02d71a54ca461444a75e291615ae89604b85d1891f93480ee83aba2c61405be68a0c4e628d6a21b5d89b414593d6aad8b8fc36728fd2971c57bd453a635c7be264b3d630b1da8e311e9bf0b12a866448ea0fd48d602ee3222333f861768ed9803a21e1f81a0b7a4df99c31f708ef5e8879566153cebdd3e3034257e0e05dd9328933abfd44f54e7d94b1d191d1494d1224afda533f4676c13e0d5f50989fe133f8e468d91f53957b83cc6ce87933ce09bef400d67ea279d69846b0fab2b5b630e221e340b04b0f18140094f8c13c9b8731322c7282761b7747e781b88037d583793594447d140aaa74a0c3f4866e5b2f8582dd750c199360ed36732e224b5a6102cd4b5afb4fc7f36013f29b8d7a15eb466f571bb5c3d2fc33c7bf5a0771e00e426cba3f5da8ec114e952678c6814e6dbb0240911302511547a91d25670c7d39762fc4a883f2cae740459a83b3bec4d67216e0f8c978544887e5eef383be5b7ac3c6525f9da6c3bac286f6cf02094a5a14ccb159689c5baaca4caa329f7a5d7c16f53a5aa9b3df275c2ba6066f0d4f6ec70ade3e742d045d167af608e6a81407629e29bbc5c985b2b4830fb388dd0689ed11bd411bf56ef8494983b1308dd9907c17749be3cea83487dd29148f1965bc23e1d77cb339300fa1ec86a3c9dd8c72f5f44682cfa0d347b282cffe6309f4fa43030044b5d7e25f783e0531a2317ee63f8fc8569d4b91090299296ed6c97ecb6a99dd6d61262c98e978e6747f9d0690419e8189bf7042093fc9ab956725d50d0f365f276d1b6fb8d762fbc943036495f6029e35059b53aa443e90b05f63fca72613210a1c3e331391cd46507973e4b26e94ad43b59d020824c366fa866ba0c0b98ad8682cb383996cc181338f1eb6eb4d233ee4acf7f1e74965f49bcd9f576c35666b64a1ef45ce2be6c971aa51cf45c691e98b13dcbf800c5a4ca5cc8accb8b7fc2ec2aa16a84f856d2994a5fc0071bd2c2d433fc4935598eeadfb88f412f604cf409880fb81b540cdd41e8b8b8e7a66c901727bd71d55996d65f1205223ad17edf58ce6f8f8e0b8d2b121d3681b3d39d6b403c31ef56f456ea5cb8103f7714e16b4b1786c9a2b1ef07818193aaa2291da56d75081932730bef5c4a6e25b64870ca393c41b2f2692478c3512f1435b7ac3ac40d2b4e0744c43424edb2acf1b69cad28e80404e89fbdd0a1ccfc28469b207437fcb4199d708afb4611bd79a622870c93d656e0d01b0020718ca256ebf645a85d8615145ef9b8fac0be07b52e80bd9301218db451f744838abf8755ee886b5fc973a9c396dbbd21c006030312fa5dec82bac317d4611b409eeb349f86966fc1c9a7183d1f2efa78eb30f41a7ac6840106c83ae2eb276293a98be603ecf18219a9f8cf62eba192b062764a3c712a43531d33bb6667b45d409276e5bac054f2a2d08e9a5e11e51c548ce3b6b1f3b16ab51df2fd854a3a6bcd2ae1cd75d9f2c86aef3caddf2d722d10ee0b0166170db8ca681e99211e17181bb39496a00f6c6832657abb4823650b6dcaf4ac677c5c2112c14c6d4da15d91ecaae978dba96b26d03a617c387c429cc70f49ed05ded6390df56034bc5b505b264a9fd6f8c10c9b67e14b0400121fdfc23583cab024a8d0c4357af63783cfd1ecc75df7b208facfd2e8e569c87427df283e6650a5a8e0d89c0abeff70203e54a17da3381b76579cdb7cbdc806870c4c13ab82c7e817b818838275c277b095034547335a47f3715559751e99895aeaa03792b2c928ad343a1e2e8333dd76578806e3008ace68e86c122d1e190845644ead54e0ef77addee8c3455213329e64802427e837dcd199173163d87d15b4feee16dc55a58cf558c77b2f6eb55b14b4c443a4bf5e28c7ffc45bd74df0727965240114b6221721c8c6e57c3270b82db78afe6f29c433824229599fb0b83245a84f0e530cae77a3f8629d6fd7dc4eebab145f82d4cedb86564729b37aa16d422480e7d1a2ce1d05c002cddebdf9975f79751c6bf0ba56b5db331d9ea149acb39d82a77fea0c9fab132c5eb16b87358dab445cc0fbac7b028c29ba99f82e3bf90d9027f577744281dec739d6f3c01c47aa719c2f3c1369bb0e43fe300a4abc97a009faa56320d2629a6f683dba9199c433bb200610a853dadc4716fc4b2c8c0442cd91258bc67c756022a17f9577bf7b46ba09d7bb9c0b9be7f08b1df7a5e382dd2ae0dd6359ca33c10326f90b8fda12ab65b7efdbabe989f2779eda221ff0f4ad7d8aa72a264533ef5b1b26570e775374d01f874d4a2d83a8e624ec86b685f593bfceca75a7ba8855d8031b4c9ead9e4a1168e0b9e31c06e0ecd249589139ec1f7f2734d12b25401af4050d1087a96e6e16447d4cd8b43fce6a07f1112d82287093322ba3960a394b8125e020a0bed8150779f740bfb41cfa2e18bafb22c51d2daca60ed0e455cbbfe89fb33b8a9ec4b9345a8df4e83acc35a14a401de5b482f69219c87218d446a19be8dec4f013c0c20a703dc2b7d5d6bc4036d625beb90c9e3a717668b2c2969319a711b93695d891273be1688dc929f8cdd99f3a0eb0e35e24bdd22293e589024dcf0333aafcf66b70675a5d39c9cab4debcac887b87338267ae1d646189c346aaa6f45be7c7cfbc2b1110b4ae98d4399c0cedb134781e8d8b18b8d8e777f6d50996c5bee50b2b5e1561ecb989d1bc0283136cb0f29a078d377b7bf0d97e0eda98e3301ca791e049a244341f9ab638100c87e8668a330e8fb819685a297d7d6feb0df6559b39c0a78d23a15598a27e7493c4d3b0ed207bd1287fa3216a789c4065a979884a0dc017e105f3f6a8eec5ed8fabcafb2014a5c959c423cdb2535a9040476140b713033e031e8ab27dac8f430fa35b8a3412dd5d66239410cbd39beb9d88f4f22b5bebb3983742ae41b245d0510d28916e85abc87e2e2c56f20db3611cfa021862541287fb110225b4a81a5810d84c4fa6cb8fea0102f8b68bb6b2b58ac6f05614a071aa855378f8abf7791d898f67e4b4170d5c39fa27baeafd589c9ec898a8a0089306231862245a16b6af94ff1ffb7d63b295b243dbd6d3c97895c5e0bead039497e72c88fc7ccd97e6a2af9e011389a83cb48c67d3a03a1c43eeb6bfe931b18423eb6b14aabc2987c06e8d25d7bcdd287ab1a81b06112f6f2b0243dfd307fc4ad47b2e0d0712ce056b86d271f20474dedd970ee40f756d1ff29abdcc32a9fb5c4d9c0ed51712280d87aaa8d815a44e3159d38bef94f9e9f11ce3043205b9ba298f2bb92fc1c43e15834c536578903e7e43a1d7e7c5a26cc835b99ff9d883568b4781f7e4b83a5e72725e864d64e1d2d68dbbc701c2347d9d049480e840cafe270646d66deadd267e6d9ceb1bc44b64eef04041246d0f81d13d022bbe624e420aa6555d48471ab4e749f5f2604dd6e21c88b68176c7e66922b1ce45f07976fe01369a0385016967412cefede316ff9fd57ffe7de56cc2cf67d03f49ce57922e216000203d96ae05064c834680e8a0876d7f16262788454887a145e77f14012f8b6269b8d87eec6456be7489c1ff3f53fcbb01f50a1acb22732c97307f356a44c077199a13bcb9234265b3e683a6c32fb07d38e6e07190abad61938d5a6a73f2c964dfdfa48fc3cfedccba842ba85cd9b41925c727d737b5a000223f511b5c686adafade5e879ef3c520efa4f3c0a020b0a6ea9d8ccec4a33dab5c342cf3a69701407fc84672e07ea412e8502624043820e76a15fb79fd549644cc647c29bab2b70ed6a1e43678e86f21c7bfa51af5c3632644cf461b53b9388bdf065dbc9e24211dbd68d8ee91a5e5937852d5de7efd951470d4911d55ba3f1854b3805d1a8772b8f132659d28e684a94b29d5cd2e382efc26f2eb622f94a140923391c8d47c05ff66e5051029f86a1a1787b81933d12a77365298df6c1ee05c6fa70c920b5eac95b4fe6869bcf4b1caebdee339ff6dfb7b0c81864d01657afd03dff5b227515c698b4dab2c6547a8661f0d0c0c68d52ddc12768910b4e79da1aaab78ca887b80aac9b82b1027cfdd765983cdcd362493cb2c4247941bb8aa0e70f24942f38f3b8b35824fcd2b84b75f11d9fe817e4487b44727adf296f0b8a6a3718445826eebd00eb95fe5c120fba258c090685335f6ed520fc84ae0167932184ac6366ff9f9c3e5d5ddfaedeb24c2ded56036aa4cbd0500aefd2daec01bafdf1965961a654155c76eac322e252c3a5ea9a942e0b9b6fed1134ff0d7a438f77ab2902349c30c5382bf2477f6d28004b6865b57f610aedd4a4d5e3edbd3747c99dc96aa7ff7ccfe8f8aa220888478984e0105724a244d30853febb85fbae412e5b521f0ccdbbb66ceae2e1a1da24704cad9630b9dc3ce02d180580d0af5084448d175bebdcbd3b64d1402b9a39e6f35ada97e8d216e24f37d72fbf8784c91c21171af668b9427dfa06be672b8a809c3d813b91cd75600448e6663c1303902dab5f4d255f924303a88ea879b9487c8d27d67f7a7ed8669d4e2dd0a58bd052a940a1cfb7d047ce3d7c9a53dbc8f504132c9ca9735f01163e540b63d38472b1047181a027c35b1d8cbedef8e74e87b018d0a36ee3a7390748c0688151954d6242d88611eb54af0f21458a87df903992404dabc33ea1203bcf201f0acb26f2482197359ade9e2ebab042b6a3555d1af1859447d11a51c1ad8776e1c35dd7c9f1f0a90d0e01c92bc964a9646ca108cf8bc2e7f700cf99e2d9a475c800a6c2f58173ea101391fbd03b213aba8ec2d87d9dba1a6db1ec224e96cb2d81598aa81ab090e97062264b4547f8b115635cff199da97f77649a09b9a08815ac3ca7a78a72862147b0e8af0d72b6fd3ea720f1f04347661d1055c341f4401a92c924104ca8a3c1bfbf3a96e1948bbad8988a064b29667a6b941174d38e1ce21081268e82686c8b5854b7cfa3a49c92d2f21fc297416151c88ae52a4c038f47521a3ae6924a54a0adef850d7ec4213440dbc7b77df3258b969062599e6550c64285ea2ace6cfbcd03b0b8dd54ab3c0665022a2b9d0f53d15c6b736ebccff94977801bc3d3a8942b2ae4770a81b3a9debecc3151f43c0561584108f633ab1004af4d8fcb05a0964c2cdd9dd9fd23f7ec6e6e5c360edf4307e2f4f6ba68ef87feea337f156d54fd4b1a877a5739b2d12ea4d1e5d5b43d2cca635bc19cb77dec46b77d667e50de977d517e3ce40d9c183c51c1921be10bbdec568cf237914f8b8e5b6b823e2060ac38c109d626794f79e55710b86a83371433c89712429a108f2ef7812b96318b93a1c267a16cf9115b6128db252916fecb37657db6be3eb45d0a29cbb2cc5903d0ab1149f13be173b40d6dfc1129db6d26c0796368bad413038002df5483c2ee74faf4bda779eec833ae27952ffa62211447f0b7b57b26fc5132ec61c2607e5d5de00a59b7f8c717d355b05a81ab402279cc25475353b23076dfbd7e123e7e761c4283e6843aa24394aa95cb983d7cf62516304ebe90800eaf2df7cdccd6a3a462dc7b5016af8c4f5b3848a0bdc3e9a479228e47922f73cf9795d2e4429d735b3a1f246a7c8eb324cbc7436a9224f2ac5d9ce33e9c48769908c2e794e4a5213ad25d1f46c1618357cde14cd86bfab9fea5416d8466b683a992bff1c54eb885ae582638d1a682477fd6c7d2a7e7fcc9d5db5db91c1e20007940e53b57c30df6421ffa12d1b5a3c39d44e3ffb5529fc9a11beb7c9710c8b0ad183019e618908640d52c71aea12b5b79cf7630dd45a642803186cfe0264fd5737cbb8a923b6406a797bee6da33e5aa816783c142dfc2a29badeecf99e1853bcd3f88dfdeec3c563791d4e0eec43c2268b3ff03e21989b6da0a285c25ca8f75e74c024ab317d0a58846384b06f44ffd6f6048d6ed894ebd74d9bc0793ff14a8ffeb86af9d7b2fa1c79f19b035ad6694400b6e6ec50c6c843b82a2e5198cb7d7beebc44aece66ff93c982951d8ce83354f7bda99b2efdf30615c17c46095587d9f7b0ebeef2b28f6cee6afb33c5284a56679dcdacd532356996a010518fadd426c8a9349c4c69dd448397752022ae7cce5daa066e489a7f60654343b961b7c581a204b89936e4047deabb3ae6d40f3c108fad7d91ab9f81f3d4f4fbf134ff5b137dcf6850632b285cd92ad1b5a416ded1fe16d5bf8be6b35164f86f8dfdcce36a26804b85106fe11488681e28b69259e2fdb83706e74274a0b37e200857e0d27d074ef7613eb0dfe77b157a629bc328bb0e235ea6e093829811334d87f231d56b2e14369545db3a90dbfbe9afc717da97364eef306b0ddb7b7c7c243ad82cac9d5125208dbbeb1446dad30bed1992275c944073c950c47bb02061370a0c969a39a616f09f05efc4ce1d00a4e77c52b74888b190fc188c642799f5eacdaac74d2250e68a4747fcf6526bcf1d3141ebdad48930c9497e47fbb88a4cc608077d9fdc303bc4108c587827f2067646b507217f2f39607b84f5edcf3a58b307435b856f146be519e18b63f7730d6dbe4089462889474f719211bcda7d93240328d488fa1b79eaa1bd5634f4ea930ff35eee7968ae06aa42ceca924cb757839ca7f1ca85206ddbf22dc4944af0be868a2c523885273f61b82e83c9150caa206e9676ca4af8a80eebf50da00e2e04fa3bb3eb61fa19d2dc28a744e10eb288c324df51062c609ccd7b6729ac291c3dc9f77975c5dffafcd45a5d7646081acceb042f07b03414f7d455e84a1a0a5c66ae3e1aaba207b35a6f68b64f9bdd93c9c103a4f1c8e82d4f6bb14fbb2be4fb6d31f0c4b5b7ad5dea6f554ec4b34417321dab83e360a0222689ab5cf799edaed23776c5c39417e89a45f20cece57500cb7d612eadec2f481d2ef5194a917caa17c3b79204b2725452f4ce9fc348a0569a64347b937c7706e56bf5ec7db701af09c1956fd422e0cb9e5fd3c5ac0eb001d59e05d195207b92b21073912371904504e3631af10550561dac94b77de4bf440e1ae412d02015b10d496f3b57c940ab7c33c15b0f5925918493520eb65ef1e61eb13abb32902e1623ff50a89957403766204a46d92c010439599c157ee834e2d49c5ac0f91ce5223443bcf3267c7e0f2a2d98db197acfb9344cba2549156989a2961aed6be45c7f68b0acf0ca43acc27751ce2d206e2d054ec862173d0480dc643d2dde45e73662ebe21e1df2c94f826ba7a1a7dfe20c04e12dc8b2552f5322c0a47ef1a8b3249b3d1000b9143ca5ceab10bc8ce636518071d1b8372673a96b77b4f91dd2c82ade42c2bd46de6e0a4ab12c1f8c52cc71c0d5f67e457fdd240f9f0bc9081d576b8e83baf71de638e6b922942b8842b2b727936771a5e551bdf4afc6e73aa62f1d951462ad4d82d58ead250ded9917c0f278109287c10589c7192048837f8041a2dc06a1e54f49a078f1903bcf93923d3a65399f5cc20c6ca472b1ef5129f563e8ca33459ee9e0220f6d5e814e5d3d654f341fbbb4a3250a0b42a1b041352516e58604101f1df767d503f2fb5eb131fa564efbdefde3eaa84b443741de5141d3d03cff12464f3d01a7067a2b3a85129ffe6e99c70dcb66487545ef2e61b95331cb1ffd22547a2e8d0ae67e94323acc6dea2a0d368a38bc303c8705ee7db309cdc1bc8f450ae9cef629ad5ffeeac50d8615680697c4cc2e292ee81a48fa7e4dd712283de92d6df035da9a474e19babba1590b2183025cf0e52e8b52bc5d44d1124a259a19af04eff0e54ba10d7c239de93051954351d47449cc05aa5073e90e9c457333383c4c1c4a3b7cd05532a8af857dd2c20ff6b830e5424fb28107b658e0337aced060f82e5ab88f0d5ac141b741877971b7ef221bf53b3fe2f1ab10566076f17351bede18c16b4a42575d9af3204e94897995cf2b133496c06754fa3baf483e68e7b6b1a4027e3b7bd3e98ecd72725f28940c5e8c264e2e7f27da3e0a13d8366fbbbe6095553995506fe890c23ea67c287a976e3cd4a3fbea4a907bd370cb39080f560119bf1f91f41dbb77847c9dae21db3ea2b7604e069bf8545c3198fdf62b5fd12c006a4062aa2a8270af6525c26e44ce4a6bc41c7f59bc95f58f024c1b88eb16e7f33c292916f230c8484d6388344436da1320f0209aec00abf0d52a2926c624b6d66a490536d7e1ce0fe4c181124aacbd830c9853af70e16214d68c73be884ce72a5b1a29a4736f1eb827e4b95e443dfe384cbdb5a842e690a2426ae895f1777225db6912c01ad0c8f7eb0d81661f929214c16a409e3eea99bbfe5a73d6d94b04fc388534cce9a8ce63049a39933a66cde4abfdba79e7a771157c176b04564c269949ab9cbb53b57cfa2898c40654881268041a870a2da83aa7ae36df3f846bfd8439540f5f13c2a0d78a944b2be968c76f1ebd3f79fc552db8227fd0d005f01af53a0216a4c4f595fa844fbe96a6e1409ac14fb995a4841b849661d46b410e2422b59775a951eda8bf0f2d3dc040966cfe059f9cc41760559846bd653851b88662c4926d70a8672586a42ca8483beb9e0bb23e3f924f9a4c5f9c445f505248b50b52c0898560fc601d03e7e11c8b8a80613532181a079eb7946706eb90214f7bc735e0841db30de30776a06560a2654ea79ac72e962f9c19b3c80cfa1dbd000682858d13734344f749556feb72f539d0e4805bfac61cc212f090ff35da8bdda9aa679d6b1169ba091a17ec270ef9108e8abbaeeb5f959ba348dac5e2ce3d28556c07d25122c17a1025142033ad1ddaa4c7e2427e7e4582e5c8ff748b71daf59bdc263c6513d6551a22ab6a65d0317d8ceb3d254f42bff513baa96ea499d2bb53727c8a500c32f998d5173fc4a3ca0cb3e846e8f237bd7b505fa47b052e62fe27811630e6b9d43e6c1bc579a0f524142f2b43d3935967a6439d74db01ba4961ed067e6460b0b318e7004840fa764e705c03701d92885e5950e7f7ffacea6ed065757135d8d74f5c0c6800647d124c4a2e5b784541c24a62ca371aaec2beab823539225c5715b2475d1332f4930a2220fc57c55e302952f41df3dbf2cb0051a1b259063a51509b59741a3d67a088db598c1da9f1846008acf45d1ce3043313e5f93cf31a96a140bf13dc8ae2e35ddce9fdf80026c8e655697603b4b699bcc648f169a94c49e7e608af99537457bc83b986b7b7be1c37b63c7d74b209c178f43acf6b76d4d613f1ffa2e72a1955060f6f060e5c8dd3d084e86254fd2c40762d111115b704da9e8eb19d6c6d075c7cb6a073ab720215627524f56e38d40e8ccc473980e08f2f733a581bdbe0b4073771f4d0f778923165ce88780b0754a10eae961cf0143b74b0e5f8ad4e7258c6d92c80330273777ec257cf6dc7b452de81da090a766ad0081b8a4a0179077f897c60c13289002755834df691ffd58a66a8c3833335a22c6d4f2dc2753ef16d513262b82f5386102c44793015d5224d62488f5328a15917251c59c5611fd5d5adac5523d03b8ba573660f352f33b9be65f63b4c9873f83b599ea3d9a862690cc9a8fe96ee6d4c91a00632d9fffb9875cf9b28f8ffb9054ba8acbda8d91b6f48447fe70782bfc59feaf64798dddfd561a86ec7afe7f7df74210f8792ec8afcefb97d6d75d87b0a66da1e12254038dba560a3780947447f985ced40b79a126b2e60d8b2870d204fccc3ec2dcdf5287c5036c71a08552c52fa0458e937f68a7678213bee8d1f627b74b1576b79ba7777c23bb111b0d08e67871e85605c421d17b968606cef453294316be68c697f427fb56a6744dc0682b918966dcd4c1b052db6858406c2e035ea52d5dd6102484a8d47e162edee52f9d721937971af335fb8eb6952bb542e31e426e46413c360b71739f620b783dd60de703f2635120a0b3167cf0949f4bc2f2f80af1d9bef335e52f6914094e96a07af061a3b6487579dab2e34d58bea61989e614332ea972f85d95629b2d28e64253f9212426518c47313bf25fe104aaeda9c50a3dd669c031cdbebaa5cc8fb1be463c18e2f1848017bb9c9afd55f169b592a80096dece5a0e414ed148ccd72b370452b760f22cabbe4f519d4450c7b98e44348e67149a8bf9bf69462e127bb122a180591628709ccadbad5896a7e0357a0be89b244ad0eee8090fdf18dfc331db7ff08ca5dbc5829e7bd1755cb72c8b7a158195eae83197056b311d6fb18301cf353e115b77af9722e0d104c7fb182d74bc861e163b6819f6f0f7c267e6d1e78e7aa92d00ea67964d4468b2d355a44de3a58585c6630c300b63571783f0969e3bd1f309d49865c7807f9a82892f39ce33c7e8f9ecde88c1c960c595a09b05b24e66f421e470d244bc2759dd48a976f836c35c2c8307ef36f3eec4f1cdc3b107bbfc15f50ef0578180ae5779aceb2391c79890221ea38954b6a82b761008c942649693f14363da13e69b3eb7f6ec82b9d09a30d404de7ebbab29c8df78cde619ef615567a045e20de9fa0c7b874d04bde8879a2a2c78bc96f7e6953ba6c2624fb6b678db1292d65752fdac12561b8a33d76c043ba59f96d9730c8c41cad594872f7c93f36cccaf99833b3daa5afa80839cc00d61e19fcac2168db84206a5552b9883abbf9036b12223967e3e34ba6025110325716c5bfcefb34a49faf1aa379ea590e06eadfdeef3ed5b1a77516a9142872f93030547ed52790a1697d4190892730e6f30196b7350e63c95d2c75e195657b08dc6f1e5899f2f4e829c5e104358b9f97edb7c5aee0fb56781986ff021f5ff0f32f6ad81d6a980b339635dc46f760ad68530a8ffc98e75638c214ca0c70fd3a2f3fec8fd5b44cd4fac539cbb29bc2f8ea2accd7d61026515367fc2d178a241328f02eb3ad9e6572576ff170a745c468aba2f335072330af16699286e8d5af97fee3c4402e087e17e16b01e0ee8c7fe8ddb500af2bd870bfc358321e5fcb107276d55568b6aa06f0e0ce0d8a86fc56b981aaf598523526110cea345e32c3559787f8060ea2ecf4effe8b6e64aaed3d9e54045871969dba4ad4b069198b24e078da1cfbb9ce70738bde3b5c5a415719ac6721d887a69d4e5039c60e93108825c243ef68e2802e82c4fc9662f55808106f085bac56ccab198f2f86a50d0253ecce2001b77f9a626665947bd1168e28c613f953791fed3574fc715342ce3cc1b0cc0ee224e67ca1a214a311b69cae648a90aa201cd824b070a66dfe3cd296bf38d20efbc52b7e6d066c374acb7c48f1e5213a0accc199c9cbaa0d5176ac46ac993b8ec10855760fa887bac2c8b7fe2e3b42ce950e4ed43ad67782f68dd12fe6ab9cd9ed03df84ff79f426380aa6467e5225231ee1d4ab3d4d5b360cee974ba59b70482ff212e9e5327c7011bafcb5378136cf2c0be47670b3db6a1cc90b4c397aebe627ab9e4b6bd3b66d6bad1b85541d1f07b1e6f76d7aa764414624079604e197425caac5dce6bd17a1248705f52c38197b4c061f7a265a182a0e3032008e8c81f88b440f3412bab2913bbee8518c9122fa24fe7b606872649adf4333f75d52e9da21771131929ca87ee32e25d36f397d87ca30f97ae78ec92146262f15ef6ab229071ee65062c370bda4796a95a4f5e888a4d54617138f14b2b3ca8cf133d8a679b226e885a61c5db2740d23acb8d3aaa1427158d1fc377aec8c6ea17092adef108d0bf69f39d8ae2884e5660069e980bae9102eaa15fa90cbeba0358203b7579bd633016e2fe6e86e596be50d4588f9fac43eee593b1f15eb58237bfd982b6bb27f348ad329435cebf26374ba5af02130653b47ea6f7c1e335c8065c1e978184df48519927b14740319815f9f246bb6d433ff21d2c1346fba6ccff578b9e27439f772891915689cd422bc84e11c66695d0b47838407828dc736140ea3170a7b4e37681d29c1eec024c23be397886cb4f6eb872544bfb0ad43b9867bf8b1a9658c6cd82055786b63da2e05f83fd4c72b138cca01e5de11050bf1bc85f35563feb534ce33dbded7403ddb218a3b516e7acecb2c898a62079693d595713634fff29f14a05aa716469eb29a1d9a61d63f0f652e5521066a359a3f1efc24c84077f032b2e6d7a17be622abf3d7acfdd32e63ed3589ae3f3917e1741fee16a978ba1a03bf60f80cf03dbdb497b946de52b6697a3e1f7295c9d8f0e76a93b592f17874b211bc57949a97846bb94d3067df26666f1d1313ebd6905b5fd0ffe91b96556c71da4f74a8c4dca8dd5c59e031f5aea520e614bee9e36281fd5a15dfa5a2094102ef460c5e9db54c7f358e9a6cec981c7a67626e9cd6efd792ac321c644bdc4eeee93ab49f3a8bb80d8e89401f9d8f9eb4d472e88f2591ca76bea2b861ad2dd8f064251bb9f5812d8c5800d16d50abea15760f09f6f1c25b7dfabd7eef1a91b99d675bda8bc545eda9fd0daaa8a1f9dac90e60b96fff7edf5392f577f90d8b9cfba4178ccf36da841857b8ec5a07d54d4bf7929dc95a52b1ff641f8eb182ef6c53a3e7aba5c7956b8643eef123458ebcc1d8bb948c5a5eac76730f318b3e2c6bf1b22a8814298d14f763e807b22aac2f79a3d9807bee78d209073eba7dd4041ea08b52117141d10a60a206b20ecb16d99b30496d06622870773d9a8629656adf7255824e1b086d745db4c91bfc60d5b3ee0dcfc8d9b7a129b123a2d7b13dd2579df6ab2c69630b580e16b85236227e44bf4efdfa15988dab71aee6fea7dc47aaea618731bf88c762b6795c42af6f2cfee6ff40863ef4042f85640ece3227e9d98c0e57c76e4d9f470eca55165ccdbe57e5e49ae3d7262e4e23f1e28af2f430f712e1b4a0758e47aa47a768f4001a231693fd669086a07074e6d0e26b7d803141b60af5fcd215aea9cf1fc67618f0d04e4c3cf772a020bb252181ac3f1ab8dc0ec94fbd9682dac4c033dc0093554121c19a39f7b19d261907f2b07d5c43b851e555cbe1ae266fca65ee6583485210323733af531afdc1ad1b12b35edc3c8ff7b956a4d923126cb7a0bd1a7290e3874394f19e7d1cc0c57ec2cf3fc8c343f140063a266018307ebafee7a37bdbd614a78f1576de31c26266f59f2b1711137ba8ba55526552472fbfe5b4d1214517f4ea9cebc00fe4e81500e7c15d21f0499af20190cbcd185e857d3224fdee3097fc8150c34decdc61da8ed189612534dcdbb454516e951f081673ea1c6645e5f69117e6e62ca1ae0892027011788ef9571ea5d81c83760f11928682b6512b9c536199af111835115146e06f27e500003334d9233a181ade5632b0822dea94b9f1a40b84523934c0ba1ecc35d255aaa392c529cc5a2bebabdb0417181fbe90afb80e075d65f7af9b7b7a4ea052f6e28e88c20b1ae1edf85d5f470aed6b8571bd91a1f80df62c60144e31db58ba2bde2223168487157df3cde6d498e880bfa198a606c16506a2790130ccc9abd1de6cbcf9e9a52d6fb6140da1cced1b85e00eb9e647826046261200e3d8b8841c0dc45e31f063d502ade765f8560b530bf5c1a85c13400ca0ef2ede28abf799f1a7b0b18cf95c1bb4be2bd899007eb018f49d54d1be515ab9e765a3f1fa676e72d5f7bd86617da3a6bd17c5cd1cf486f7990db27f211e8d7f1a1f8ea7303b082a9f9510a9a1df892a897e6341efb4d9e3528a02be5d72d3b822b7658883c2def2bb569b8d6db68c660595acf1a372a5d928bb0d87b0adcb04a09e5d135231e0e6513c805c9c02602f18430a2ce2c3aa0e5644796acf81ea99765ef8676093b4b0ff1b56b3349f5be6210f4d90169c60873f33c61bdc0134e3b6af2682ddea3f65fdbff61ec70bc5e837e145c845c9f78341be576caaa15d647f310e7550fbb5a8ec4677571eae4f35d8b664b56aeea85765a38c76dff706844c6e727ad97fde336a060822f5f6ed9c5f503e56b17138fef8ef54f612651be6f5575a3d676f2ef0c58056db961ffe1532f16fd23c55b9fd4feae7304df7e204a130f1b49585f9a21860bab610b307f0a514304c48f179710ad1ec5d7bce9042cd342099e8bc4722eed8c09d7a19c9de56950084ea8998086cbb0a8a489e1cbb73f02d3c84a3daacb0182968ad28a8eeb2f43d14ea6d509380d28510fd35e6bebc47360138c90e1ef5d06e49a7233732217d1d2a66ae04139712cfea8269313864d9c9e154f401a687eb6738ad1fa1a986cd21be3635ed08545f4cf5f199c2619ee30d0e0e56045e9e6f8fc5055817f85c8ea9040d944f235cb6744c450e2f3e773d1cc2d33d31207a673a88d8530e8c642a57fecc71ea3da15a1526a3dd0a16876f1e61bab873fd63b27d452cfec26fa52dbb8646bc758e8f7cd0b605309f40ac771adafd9d686519c6e38aa3b0715711a6498270a79b11c439380b7ab5a7b8f9e472189484a8435f0266051068d50d7cbc91cd4006a911569c15b480fdb6fea3856146d5f4e3b2ece842a8178f771fba0ef4fad5fa2e8566d4af25e47aacbb945f44440f73767cb93dc9fa191e53ad6bc26163947e4e65fabfb77424cc115e18f70d71527ef3172aa28bb39fa217f57ccbd14039ed5533a25bada8cf6145e66753558a71eceee7b0d12e50735039b35e2d0c1c094d05d6c459458ffccb58a2789f6faf7ede955a5ae239a6ecef1e6ab04ddf93e49c072660e2ef97b9d09dbded313cb61d21de838354642a1765830a59d2ad7166333e8558ceba7e006d60542e64760c6c7ecfa07c174e3fc4538068e1eb1d89c672f1996634e34c7b082375d5b0fc748d93be54151d8403cadaef39eed88d959467d030ebf7312dd018469d8f5b991f92afec98c1f759fa3ffd6d120d25fc1d371aa910f1ef433b75668caec0d606ad7113bdccfe23c58bdb28b7916735ae8dcf44a69a653bbba004e5bd490e8a12f33b37791fc65b0f7cd4261ccb0c53793795f7879cf288918e60a06f3f1fee276d47fc514f5edd659b3e601a9d00795954ead49e95e5afe1af8a934c2ff2bcd8f09fe30abdf60f5b76179cfedd63d19551d5e140ec58e3d633c07855cb04716f0ec2f579b8423aad7fd5c31c93dab3a419d2985230284a059bcaf43148f5fed1bc32432397eb5005ff71e3b8070a27b0bbe9315fb33fcd80c8873d1bb88baa59a09de05b9528aea379104ff6f238922e208a3ae04499ca6448102ba21cbc01eb77fabebe63f9ebdd2623ed0182fcd613406461e0478bc6031f438914fc2a60944376d0d1d72864edf7a40ba0deb6353b6934775ea11552bf0f3fe41b00730d2aa5953691b04a479697219af97e6f77f282648b59fab3f525d56f1bd4c6e2617b1e6637f978f39f39ebb564d7cf5b01a0695ab5bf27500d499bc49818f5b06885bbb0bc146d63dfbe6404d531408f1d1552dc157ec690bed78f46696961aa54a34749d57d4d85aadac86eea460a5146538fd97bccabbea5cc356ed92707d2f9150c19552d9754b2a8beace7741e3dc35480b386fc312b91fb330391e2bfae8eb6283e8aac0daa3c49e5b81074a3d7718c937fd881d56be37e162741272ac6e2255f778bcbe6e2cf56f05ee34c0e347e050048c44f3ecdddbe49b4920a689cffe3be11871843a16f038db8bedf61a9099a447435ad380d0a4190d3bd2fd8eaf44547ee7eb6d33bcb0d8ccaecad8cbc72778e600f1ae716f57b1e9f8176c4a78f3a822f3b4843d9a19bb75d639a5242b723f5cdc97965f81abae67f95d5ceccee545335460c57af8861b4f747d8094534cc575dfd13b4698fc51b0c816b9338bd8e54830af7d9f2d755231badcd2be90000a0e7a614449696c6690c09d606a9c7d19d342881b5102d2732deca9de15ceb01e0aad82138b7a75193ca3e7567a802f9c4492b2d30108ffc771df2d4572cc2ab97d70b56c03d6489136791f5f1ce690fa92907f9771e2f925725fc46870cf8f6d4e9fadccfd7b4814b1b1e9d78114e9659727b87583a75b94b5178152a05fc0f08ec790750e08654aaad6b8e3c081e2519a35a27f9638272d76655fd32cfdf464c9fcd05d5353f1a590cbdcb4d677d4e0995e9c1c0393e4d11abb68ed7020bdc24d17a295cd62faa204abd4029d2d8bc860276ea75e042e47618aa3ea536b88634069f0a45e427cc2cfad6404af6746674cb20dacd891be6f2efa97be6859798e28b91c37c487a5ed5e4f72e59c5ee652242616cf8eac3d1a52da6ad4cb1147ff21fbb540f3727635c5b2a5d974d69401f34bed9a2911d9cf5225af6aed3b969e81e1090512dc64aa84eb97d45ae56c6417fa85a5545ae65b41c9cab78bc8600c20c24e186f35975a0a64749465c349d7b166c811b1c5b36b5b7e0559e23d9e5d854ebe53fa46896cd06e53159e59336673db64047c962cc11d70dc9cd9ed849c41c5740ca4db8c6c4eb911cfa09a311178c5a9e5c35acfaaea17f2cabdbac8bdf4e8e762905924d3f5246fe6a9eac4da5d482dd19373ef37d46c081dda11723a45430c31f87d9a21bdd07ad6739143b047664fc1a68508da55f5b38fd05ff5d8f83de475f673ab8a4a66489b969d35599b057d18de476b205ae11287fe1d04acacdbf4614b5b5b20d743f671dd6bc6b338ff5eebcc8ad481222b3b0bf02c24607fcd075d07a9169fa49ac58da67b2909ed41b2fb0db8486bf0ee14986db3a489be3fc1c2bce4936fbd2c4c73021f09b38aedd442bc8d70e6beccc0bd701f2f12755fa11f3ad61f72bcbd6965ce2a9f90441db95389401c59c79d6fd686c72f7c151f7415811ec60664e74a02b93ea83b28e63948ab7cc9976dc1e163d364b9b74fd84788702bde2ac1523daa5f99cf95129ecdfa3d3b8288aa0896f5d758d2cda5cde5b2a44956b95792598e862fa46b179048fc872b354c84df5f4f7eeca9907ac9cddcbac6167a1f9cfc6c3d616f19d5eb20f9b78b2f513176a14cd7788f5df616ebed9a8401e6b7dbfd663efbc4cea41cf99dfaed1f4dbb8d3928820be40beea054631c09a7fcd3cecda3684f4ba2567a32c8a1fc1203d39cfc5ba069f1bdda328fd056209c09fcf365473f035e7de85a322b6ab51e01591148523573806cb39dd8aa3b1f18ea377bc077cff3ac78cfd953f0989a849601de9a8b0cf7c575ba5bddcd0ba86def4c4890339d3b0c67c013940e4d11e4c153da962b7f47899a516b0b99171b9897e66a277617d6c1720c1ed048475cbe18cc1caab874dbf58d9a83af067a85283e978d05151626dff6a4d7e65ab6ff433786d173e9f4fb359fc3c99b6f7eb6f795d8e240ea8b0518cc1a3b8822b7920b0203c6fe290892d51c7c3d36ca24e511d99c67b9b214a62cad3788e0f30da66c8b6a0d285e72d10818116fe170019dbdbc8d1a157ec68afabc2fd0204cca322c7b7a52314d80bc0f6cd42db0b080aaf7b463b5d76c813aadb42af26acbc870141bf98a0ff25a5c8ab6f72f8de11835ac8905a0ea5f1688f85e2688fc86b98bb9a8d2cc50ed74143517f6c43f226be790d8c415e81863109c2a7c1c9bbecfe224e000172b999b6137853d799a726827c40f629d0862affab416e23455a4ac3dbaf375edaa14ba9b29ae6d55156faa8bbb1b1dc03161074385ff9f864801cf2a62123f1d09ed73ac98785341aa662478d4227e803060137396516f62e233b20ccabbe63d98687223a4e95690b6ad6422b58b9cf648162d595e1ae58a8315b9acc51f9c7de9d435e3a3119bcdc5d086640ea226dbc2ba426d5ec282fa918cc7e2dcef87653379b0977a7a4d3b175d5e43a6e0f1f005e114f012f28b3884aecae8bc8dbf5089c1fa4a27f928ea1f188b02b9dccf541eb6756f1ec4b7dd726c1097ab0c9624084fdf51dc305004f040457dc29225b3922f2fa3d99bc83ce2edaffa56313fb0e463a08dfd7cf8461a533491ab24025b5dab74f04d795244de5dd34429fbd9728f645edfcc65b2c772ae007c98c4689bb21aa8aec246de992d7b2e01546c69beae50893a56437f003ee804e6dac4123a158bd4d55c2e9e3b3be749cb25cd5f39f1a12f10add9e498cb845c913a292b07a3b468dbcb3a912d11179b8a19663931a9278cd9ece8fbb851e4430577f126f51551475b11286091ff16762fb6329610d61e0d1021fa9afd472b827ff6109d58278804c06a602b369f0c0c12f4b1c7fbfb9ed96978598fc0b184c1f51645201c95a2a5b40ca7c6036bc67c65f461e991e8f6e3b53615750e0f8b4ecdd73dd235c684f2cd9ce961ff8c41ed870fdd75a9e5a176bd5e96854b2c4c76bacc02ede9a786ecd9b22cb2f380c350f0dc16bd74238a60321d6a9ea6e025f7a1b870c0647a9280c437241b942c229b96ea90e98ffc13dfd461a6a4e9000e361a1bd513f80ffc99e7ad751f5debe337a5aadac041900210cd1b9056a386a56c2e3666d548eeafa2c43940aba5316dd6dd8c9c09fba77578830d8db40805a5301d0f6f5655baf0f58aa9710d570f6f3cd771a4f980fd0435ab7d8ed9ba4b3627a707cf78de22c48ef61bd6fe2e3b9f34cda0fdd6c56586510c66b8ddd3d1032b01da0bf30eaaa1f734160c5ffaccc2e7532c5ca64916675bf77dd3e87d95cbf2365d39f0608351dcc56a47d8d62a301cec71ac09232afcb20e7fe507f07324aab22aeaa4345ad276717e524449eed580b329da39dd62dedd3abdaed8d84247c88d8609894de25772e0be81c6f0c6b9eea8fc239a64b2a3d8b68ce8b7bef4524f467de82ba77075617dcd917b36e1c1f3ab4aa39fcf07bda08ebacbaf43c0bfafd283ceb152d4e23e4baaeda8c69b788d2b7aa1b64894933d05179c23105dc094e7640653e883c85ab6ded38585a597226ea549e2f605c2099ae93a82fec463b9264fb9521be56cfc5733a8030de453a25572c9b036691586e6aaf5c09588d48fce8ac31b3f9d07b845c8e2faec84364719e3d25bbedf7dcbd2ac9846c58c6f3c9dfb1f1c2678cb5105fb00f6cc6460e63bf25ec97cfdeae6e42005b31cf4dae2635e7e491739d8c2b82d240f8202688225d0995d3fa0dda451374d25bb190ab5afb87378d833658bc06124af2d8493c21681ef61aee4ed2cee1654043e2c7b5a4d964bb9609884f237863181964a3250c23560b87043b18677f8b77460ae2a905b6907ad956b2391725d18828f84d63823886a766223951d8641a328cf2e9ccc091f38ad5e6ab67eca7e05c80e82c2099110f6799c8a75f6d49c2fe473fae45a4df166480b490cd7041a949ee17458d25e1df30fba79d6bcf1bde3ab0c9a83d9c43862179cf890830382610575b99325afe97e9704c750c6eea719649f1f8d8e0eea85cc1d98797f562dface4573c6ddedd7c51d9e3b898ab0dd7a56a4f7392649adf1a5e0aea0e0e293e93754b93b7cc23c2a30f28d10d5abae9da47a15b70b2139a487a2e9849687a8945a38bb99686e35ea26765f9f3b9a355f77e235841cdb3af15e2e515cb56c0bcb65d7759d964025657c7d04108e318505d1a3138db38d505e5700c6fe970e568e88f1f6301c26273966d4986095b8e4cbc374b225b8b957ff0e1151462549fbdea59c85053824a116a96af422a206b23dc379377e71e905dad7ad6c2b1a43b3688cb9bb602cf80b7e0204d9d7e4f9d55f9af884c2689636819cc36ee093e07d52373f3117c04e70e69e4fb7a11b1c75b933adf2009561d01a8d987e99de1a513f21b8586c87ed0576d5013f72f0ce0efc25237404c8a586f8fed9d96fa0baadba8ef97fe84e70112d40e4b13b6491955f95d3ee2ff125cca9d8c1ac650f65290bb714363a842d116c9f5c25a77c39ac3f95049f6309ffb50c3175d731bbc32c583a4cb15fa20506d2129d51ca25ed9fe53f185082e993730bff05b98f844f2d393f9e5b82d3dd25a79916a3dba507b09e0ec755edb733b4acf5285db58c9026473572187ae94ce20d65e395561f4f80c4fee7759b8b236fec0e1347230dc47cac9a67fc5ce8a5daeaffb8dd73e596288c25f03600dee4b5d32c23de4d613925796602a35ec2a47ecd830b5e2710f54ea3e59e335390c3d784b90020bbe5d027899e7a6092b7ca3f35174f8d2eb163fa61198e24ec873d3aa61c5ca3e5933b17d5f0ed2cc8db20c04630d2c8fe726b298ee0a4ed032c35964c9dfa586d0220e60e2a90ff443cc373c13fe9bd489fbc97e4c440f558cce5b10b7481afe2eee609ac16ee4b6d4d5539a120d9bc348d8e0e69c15e970dba3f3e182c7d2e1184f76a4d3cdc5b6ffe5fa9c5e2dee05e5c03f15773881b3d5d85d8b65882e0b654945e506644f5ffb5a307caeb3be15bb80d474fe9f572c2444d28b1e4634fc9419cb636b34569f28b4e558f2b0e0e551e247b197f5a70c0b172fb4f267dca8f7dc13addcb448d81040b92c1ce6f621636219c4f42aea42ff647d74036c529b48c26011f382bfd804967e268c5595ca8c224cd56d8d889a84684d158b230b832116aa2fb5efc98d0fdfb5daccb97207eef943bd1e58d01648cf11d7b6f52d779df50d9e1647704180b4ab6153e88090642afff45dafa68988b2a91c2fe523dced62b20b0aa46d65161cc473148c5a3f22d3b4dd7b7084c78f45a0a6ee5bd2e6c561f7b4d2ab91b8d6876905a4f96a1bb2570fa5a320112fc36262194ee8254cbb7911ee191f1d56940dfa22975c8b22c7e99cc56a741ac9c492ca8a5489741d0844a424602c7bf35314cf38b0718311e9770a0f094da7b531bc1f4880a8a6931b91fad16411293eafc2019c18e7ad0c74b61d945036a0d8dfbb9cdf74e73e704d6d0d95baec858008997346ac09ff0560b6bf94158a7382b5eb8487de924dcfa6c0435a1e9e9f10d5399ba4ac6926970aefafc07dfee6afc04521a15ba04eb904e819d6ce39beddf2a57cc0dc8a100cae39ec9607d820a15d8802863543d1e1807e124e236f293b0acf20e05b47f6d06406e70443cc72a9cd503341804cfd04b8f3ffec6ae766acb52ecd9abd6187a107e5f4d0298a2c434ab51ba6815b6e17373334dc4bd78aa3b6fa7292ab8b21ff85ffc6e4cf6934407f35e177bb9da8202da403387f8dcec3dc5b7303a202be081c222366178577be97b4e48598a57b18426d60109ed3d03a778630690cfece50706433acd14be81dcf2ad77a353f525a1169c76daed4db7e8b2fbbe21ef1f62918de56a6104aa46a3a8d5a2a1af19feeb5be669863f44b3972ea8c76d93e5f531094a4a89c419538c9983aa76bd134349c26649226cd63d9d32006ab5e634065eb0a3b21a267f9c9bee385bfe50baff763168b0b507ab298b593143d6346120ac11761fa9c3db00299be18a8201642b7b0311e24b2594c73a8a680680adb3c1a6ba097bdba5f1e03f9ac5ff92ad6854168ede5cb3997210a5d0f972c08bae980e5158c1905a1274a04fee76730f578032a42c5d51105b4cf60dafebd66185a0c3bf4ec7f8b6297ae0eff2af9df10b42b487afcf981bb115f169b5deb85dc1d2ed1f0d3bca6fa95b6584eba40eb0ae3fdc76afb084a1dee014c15892d8bd33d3e1fbd231577247f4e878b6f584d46742c2bccbf4cee4b31b7487c897ad8e12d3142257e16c7856630e024b6b152054078f39f48e6d1fb9e4f0727dbba769b36e33dfdcf3b2d2e88418b91ad0f103050232a6d9d7d86bff736761531ac0bbe01b170d2e46878011e43e2e4423e9b2caf5738862a3b09e83031c39eb9b05e8767212302fd0a373d35af5631bee5ea9bde51bd2a3e57e85444da85c6bb7958c0a020e85fc5d31b319a1a4ecc64960bfd5d71e3f604ebe2d04d2f6f0dd5f094a5ec2772aa40dfb83648becc06426d2e1474aa63dcb97faf1a5a6b468582bd74866d8fa291b81512a036d1e997f9adec006ceaaf692c3ac5b31aa8b4697aa753643932eae342b7557ef1e387c604d5096d9e6e04f45d36733e9d6dbfbe465eeb82521e836c7bc12b48bc48679b2cf4acebe9a7fc536cd7848fad884e41d30220e5a67cd24424dc81fd5c31c8b3b228d190c4a45748fa6e54d6614cc31034a95f1a0d0ad7b6c21abe301d75d4b1521841619ceeffb476152cd59d37c92d773284eb0276f6fef09e5c7054f08f44e944420aa1cb10bef303716495f722a93d661f058ee3445a1fe0c68e5564b6b867babde142fdeafa442ce23f3c985017bc68469f4e1ebf9377d06c9111a4cbad305aefa3563cd38748d6ac61b065e2662e2178f06b8a5bf82c0ad4615ff60c53b9cccebed11952e83976fb10cf1b16d6f7d769db2f46e30494a9db3d63d42b2947652c011720fd224cf5427f5b4c4c758d44c45888c288ee7eaa6ea11df0dc26c2a6fb991c0df729d39354066194206df1659f51e0c45ed4fcd19ad8a5195f73c5a8d9a8ed0d36f9d740a4b82a7145a2ccad7f9266b739ac6e24c20b0fc488e519f6524b6143a48f1c4cdc6e48e20dfb28bfe1faa05f4b6b08a63b463c31747641708fc58e4bc89b9aab8cb3ae69bf8fc558a6743c317af8a482a9be99151dbb9385b35cfb78d5449fcb1a942e5df383d03ad491399224d6ff5668b27ef5c0a1186e79549b9d50cd2ec935d4582cd664f5b42076eb5fe3dbc0399da1852eae535e010ac233d6b8eb70815849db20a044c4e4495b49519bfee440e699b3020e8d03d3f660944ce229a0144e7cafac9c04c76d4bb7598dce4d07facea3bb380bfb1cc9865b0d6e80153561bd69a7bc1df7dfcb26d750fa08fe040e8b7492856fb7d0e8d36679822e32cd15d1f3c5f4663674091de692e76dad6e85d0ca47e763ae5c256b54a35ac5f81d9d7b720fb5742fb06f0abef6d1e4e39145cdc5b80859a5c6cca7724ad946599576501496b8a57d61931dc0df621dbd55e196c191b381ac2f59da11f54a0d131fa0ecb6d677e7fbf13fa8fe4af3074090c0cea5787e946e1f15f5cc7de960fd999c41b01cc4734f2f578ec82305889832b0106eb6c9122ffbd8ecb31b6b2e910913fd782ad8c0afdb96e54e1a6b14c5ad499b7897b657ae261ab00305bee76a3841d6a7a1af222c20e6b4510b7f079f223e1df833fb8ae5e3af28abf0bbc85049c000d536a1528973e24cd7d08dad0e37fd239f25171d080ad50bd1144fa9419ff4113cc21b5c5efe679b61b26a4e7f111d3a9acf1fcbe10e80cecc994abb1fbcb36bfeda4339b896be21c290f78bf76452321390204ad056609399bb334496fc67e87f8de14e8ada12099d93c6ccd220e39ece5af4d2bea39b08034f3f64ef8c9748db00f87b1507c91f5e2203ac191863a45789ac438f3b3fb1a24eecab567ddddff1e038917cda80e15195ee09c7dd2fe67fb464d17c337c8f86ee3089df677c8a212c2c04f028cae5c0658ee74a1e30b27ca84584efd896ecd9d4f614be0e537a0ec9ffc0d251bde1fd14ead6145db89ae38768970344779bf1a64b409c82d72abfcc177cf0f10a442bb8af5695399f5a276827156d98bfecaff603765e443f4323cbc97e6474d05f9a6ecc390913cb2b93d5ff3b56378bc3045c6a41977bc645a072750e51e60f6163b264d1d0e3868cc1c4751c1549954f197ff76c6ca2e7f9a91f02c2bb92de4f757a2db8fe494f5450d7a3314d8b8f2f6fb7ec0c6c03191b2f05d0efd28dc2dd5ed8daafc545c84ae6db7fb8eca5f1e6930d1ba07f910df3f2cccba5e7010ceb8c735fdd8b4ae06abd43d916233c06913712cd0bf03c3008755ef8b856fa8edfe97941e8ff05e3eaf61ba0212954a869fc0fb658b7f4c0e5cf32a7e4a4fd2c409fd7c1c3edeb99b64719fce447b33546316716d9cc28c7b1ecdd7bb2b2f92c5b3daee9268bfbab55546404d3727a09e5021dfa8222fe04b28f4af4eca4196b7a2c02e637bb897efa9909b92c443dcae7836a81dbd6541f10b3edaf3032f9b4e0238ec2faaedfec5dd70c39638f7e253bd51557e1104fcd66886331e09bbf4a9393909c2ef138b41c35c5fd7191e876f2feab9f0ec6124fb2e945f1bccddd55361e83a2297e92a56a8efc4023936fc8b171e61871a4d574330138f5ffe9f466a464a1eb18103f530f009a432b5681ad4e5ebfab61baf4a4e515d05d4e6d2ef3fe87b5da20120a16c39e8218f02959123a3cc3b55f9b92a56ef71d623546f09827ce8a3277dd4d8394a6288aeac5292696f1b3505abdb256c8c040bea8cd3f047bc4b7633e566f164cc4b6975bd060d4dda4d9a191500981530c9837c5a4be68cda5b54b1700a1fa0637897ffaa1f7a9209ff9035839d38c57cfdcf36324743f704d914b85f82721f8fbb43b434d010a88e44c171b1455423bb32988c64b69f9872fddbca9e03e7991a4b4982e70dcd93d6a5d806810d22ad19726c02a3e39dfbfdc052a233c0578753aa9e4e2ac5c9965536057daac855825ae48577fa719ee43e28fce7772ed04006be7cc20bb321b0fdd92992046903b0bb335065d58220c185f733f62230add29209c8d6800ac0509889bed35da5cfa1634e6f5f042a0b1b49409666b6a43e0294c53cac54662aad4a0addda4f48f039fbb59dba9d6c7b5f13e9c03c2bfa13cc95420dc885cb1c957127b2626dcd521c7a7a2f106134b7134f6ac84133289dfcdb71480a80261890638271ddd7b85a311bcc4123970d4727e9e24f64e96dd19829af242024149972e54cfa2c28e2105e67c0000e676f1e3b05479a1c7ed5215cb86716153d581e360c86be03548f0b6cfde81e406d35d9bac3cd94da3739baa99611aad5415b038284c7f6765498ac8c4da79dd04895cfb93c87e0ce8e4ce311297932811130121d957c812022f56c3e04c0a2f89ff96bffa73f03337e7702c52bec20d563039a389288a97860266f320d91831c8d575bfbf363457f3f5434be5c33b59be01e36b5d7ead3239c4e0332f124f374de8b66a83cf45ea7c508fcdbf40aeb66ad52b7692811bc5395f8016ff320107f46617c61ec5a6ab9a289008576632d8c4d6959182933622f413e6be8de1bac4a53227560c3a0ca03805fdd01c04518dfcb01825b21f20003e59efab610965990d4536a83d9b9903faf9677a1d2b8678669084f05238d09b65a88976dedc4d434ac4e12db7895ef70bdcfed9891975bf636c5d9f21c4b8651b8b63bf549fa7aa2e9cf971f28dc8c20278cf9c8c5d0a0c6cc22b5e5582c451ac9204802ea2aa0b050e4d594e6fbe624315e8e1d7ef4935e7ed96a4d1e6c96eeb9e7981e26830fa96cca02555b4c6f0f74b168557ed92cf475d04e7df7a5901fcc8821897037d018019e87e6edf4c55e00689dfee9ba0ec0bb01474cf6252671e984dd2385a45619d1506b336bf171289a744784b67134bb8eae350fee0ca2289e5b7c7b56966166dd495ed9b69b72293ad4ec57f6d3d83c209f2e570a0fffc67b37838c784561285058d0396e540858ef90c55e314666920e91221dc3ae542578112947fe5665d1b2b5e0142868f0a04856d2e5851764a4042b1e4e9048b23870f36857a08451240a9e9d0dfff4d94f64d6eea5334dc783822c71a098b08e8a9529bcd9e15098ed07e1912c2ee34b9acee24f9bb3898b7b09a51fdf137eda013fbb187b4eb439ac0a4a79d69f36e59a11c7fd643b90946cdb2b1c8f45721d23d3fa0c9d04bbb902053779224aea696b6da5c55af38247f66fed583d50acc046d07e6d8d213ac85e331fcb45d6a87b93ac0f4552bdca492b81887c2bbac2565de6a9a55f1730e847e39b88d710a2b665b97f210958a18f6852f214e8e1cfbbf1e83623a66eb10202851a310b7ed0ef6e55fb1310eb71be7a6ec875bfc0330d819a50deb8088fb452cf5b48504fb08abb1934c955e1b4bca9ce476c9033d32e2959208819e43c3359966451ff933e5007d1acaf346dc71320fcc9e2a99b63a937679324d7cc4083603606bfcbdefb9755571b2389214dc76f3778d7965256fa1dfce5409d91cfbf8383a5121cbf8aa9bb8474583e932ba6c933275d7f66934869f9410bb919e7af7850230cc481f5ea86d0864c015235841fcdc91e625b13de3deb9656f68ef8919b88740964c68182712e7330d33531c7ac5f52a835e4b2c78da4b60b14247c0180f230585ab5f8a7db87fed902b631fa69f4081605f5606a3d849a0d6bf3e3dedf72dbb9e618be570ef6a480c3afe0891e3d820b09b0cde41c68982439718cc319f01da2d4ef962e7fd8112ff0bb336ab57fa288864388bc1975dba6b9adcc4a1f1c651eaade8251ec37e4718a17baab7adcabfeca65669207c1db7f97d96240f91eebd88bd3741df2951c90c6657c201903dab6f130bca0f54de2af06fd2f2839d516458fc31774c2719793cfdcc504db4b1a4033d46464d6ab9442303d97d7ce1f585a16360d03f7ce776f798cd4e70dd92b8d23dbd87818e130b1bf01aae05119e623814e4cfc06e6d3e9698f54d3273c3507e5c8d31cd588863ded372842a8df799d8bf57c1c6b43cfc9a3ba57f782e174992c84cfbf0118c2c09148f80ee82d3926ec3739eff0eb02c54013d9026b1cb76115e2f40d50df318258007589118427b5a5be46bc4b0bc48d8eec77c7c6925bef156809ca6b04be5c9027aadede974e810aec98810a16106c879a9d3ca6ed2f92633c899124f2b89812dbc8ec5f4c23c2fb2329572b02a3f840b2093d79f46c4da2a4473d46c3eca30a5201e5018e59186c2edf698295b72476829a504b45765be695b21e923363796acc5865802f2abf647034dd450cc9e527cfa7976facc841ce2672804a7d623855dd00a2b308688e714e90ba1e6e57ec88b8f55eab07c7673e48ea3e1ba0da56c83d3bb7eb82f6ee2f56b4fdc4109b30df3451b5cf33ce013224d73a48dff330a709dadba38cddb257ba487d9f0c01a5f1260bd4d6250ebb6712dadb76d88fb329df3353bfb07d751fe6a4ec77ced51c973fed8dbb75d26faa0d3c9525c0a225343b2f8f9c43aff3816643bcf42efbc22d0c286afbf97b6b1321c7883ec397db210d56c710b01b257ed7d7f883340c6e9617995421e1e101764918e93f2d38f68ffb0cbd95825dbf3866e831fbd2e7259c438fdbe2aa1403bf379c5241611a6d0f2d39f95eff74f646a5e806db03ca7800114c1e4e5cbedcc226a8ab249d317fa1429b66770cbcfd050edc7d655c967719ed81aeb3c99b4ca9e997efce266afc3ddcea42563116524ed06fe2ce00f5b29a9b850554347df189daa2916b30087309d344ccdbd21317bf8ca66af78c43f41d398a463caa5f1b0014d1762491a706c8ab7fcc80e91d9dacdbae0ea9651dff0d2914ffea0333a213f32a05f9dd1a97f078aeef992b933461e89ce7a9a16007cd1fe24bcbfe874b9e98978ab43599fabe4c6667a5684b5623d47e008a844c317a5e904d7b098a213bbfd34d5123cb02b341fd53c086deaa70fcb6960bd9d2c7859031d52dc9eaf08298742e420138f168f7bdf97cd271e485f93ace092c3d82c213fc4b5cda4d09b01c89ca2e1b338522dbe083bc491487d1ab765b607b135aaff8b4db1d91fc0a002f4f1f3b9d11d92723297f66d82ec0d94241656f4473157197dc2b307033cd523bdb33491d808829f826f83a49281cab7ccbd9fd8b4e6214a17d42e45ec53810a585750fbff9bd255d2f10d834b5bf6d593a2d04fb163c9266ef103dfaf2336f9a95bad02769af4e05e062c63d48bba44543ce90f7988920820f97d8d3dc1997118b2ad0a3081133a19a13b891f7e7accf7dd7c2b35816353ba6cd69df27c0aa907eaaeebe69b80253a91bcbf65337e612029568ea4aa8c4bcb58d9d818bdaf9c691f3d0e12c1f31d81cf58d69f131f81088005e8373b3e29d266a3fa350d177c1e1b4b069802a1fa6b9f90d3722e60515df15175ef1151ea4adb3db20c90a812e148e7b9d07c15cae917274df74f31feba151bb696e197b7fa356cf40c18d37b92534d9d371de91fb7874ad228decfcd33e91d9836430c2e3c795e27489adabf88b78e88aebfcbbfe34aa239c8f1d6a92643b42a4852877237eebf070eb4ba7425ee2beaa5f40795a44b61a2e938b8d27e19319e4fb6992c1179793e4004c709566a0c9591d3d7402419547732e12c6302f2d10b2a4190c630fbf40043255e68c197728194a162ae5c1c0e00dba0b6780696a871f046962bdde5e22c9f2229be0be607a16dc7baf94d409404caab63b8c7aa2e1dc540032c68afba033583bf673f74078a5c6625431ff4a45be709042398609cd9f878239df9ed3afeeeff21001a45f6256f7aeb3a2199d61471a445ae11b91f95c3a1a374666159450f6e630754be8626afad8cb389e7ce1bd34533b3b7ff795b3b173ee7b7bf3847188959085f974a036c4c7d61f71b877538f497411be2b15ade084b56ac048fc311d26db34ea5e5d202d97be29b201ae0c35b2e7d804179b74f079079aba45ec9360c85fa880068ba4c481b2a3dc47e5b95e0fb0c2674f924337aa2451a99f54964db1f3e213e2b46bb997b1f7dbb0694e2ed3aa2f7203204591570386c54f8ebec10b9082acd8073952db6de8de3266d5c87e47c6de6f1af389c834ca487914dbd33df98556a59b1991eec664eed8173201213570f594767155122ede9bd15106c51b3bfb980da32c0eb65de39632c3d5ac0d200a28d7ac43ccc3be614b5a328a5ee77647cbd9b3be5540bf31f5b00f2cc42a83bb36b0808f0b01f27a55bae197d74ca7b0448f6718456026a9d0359fbde9b0f03a0aefa568f63b2ac362b2687586f23f8abf63f266e73236156ac17b91706723658a421163694db1c892223cb015f50cfd617a13eabf6b1046c8d05b53361ff31f4b6ac0498dd59e07f13a30cee314e31236fef0d95c1858d18027d4caab5e5ff510275e1ad9d9829eb053a2c444b0c3187065bc58ac2f327d95bae96bd5117df7be91c53defaf6a9e640389b08c8d10f0b10ca3b15698d5f8f4f71e4ccf73baad98e1ddd29a942580d7a65ae5c9c14092ff258c8c57b2f90f7ecf6455385550c9b0511977f44812640176aa1bee39ef1ee9de3d720ca7e1503d6d8a8ac1582eaa8582a3da6d1b4ca2d968ae964b91b025d533b8c69e5f9b520575674d6d494b312becc75566ed8ad8f494db59ab879ef087a1fd36f6d392ec7d347d99bc7dbdf8b7e74793bec20de7c86223f2716ed67ccd4899d2bfb77bc21d2ce3a57759b0003129314e03b9f94d2210d77a3e77265221f20fdba89add66e39e300e5c9d4ca795eda6eb882ec69641f662d03d9a817f7e6dcb6ec859eca9cc9c00acd5114f1dd3292204fb36098967707068a8dc37532a681b29daa6699053d6d3065414976270ecf01bbe06afa82fb6ce604754fc0d26f716303c89d198c99e1ce5649435ddbe27306fda0e3d512910e563c079dbda258ef907791adffb832d123f7ba563a3202b808c473b144295a0a1c02fdfdcfa11b90e18e7c25a69071a314d1ee64ed82c6ef27bbe4d1dbfec2c3b2456df2f45abf80f77f4318aa092871384ac7687a4eafa8e61712e67b41e4546f91e74c99efde947b6fbb57d40c4cafecaecbdde47c87bec9d3a63467f191801b5262d41fef6c3ddf4dcb13f5d8e429a22791d754f9505c2c55d93266d2d9db9eb457ab2aac5e8bfdd5074d2c87ee6d7192f715b22a2515efe9ce293501ca236a8afa476463f42a8ace8d561925c75f3b91bd7eb9ef3ca8beb6b52507f8b03c2eb6aa417612013957e7143ac69a92d75dd192ae795b3d3965afc67f7816fd8c27cd9b47a97f1bfd2b35ae451905a933d0732c25becff5cf02e6e51f594bd3430bcf07a85337359f1cad1cda6705eed1b578df315f36d951adcf220a3f8732cfde8f2dc5f4cfca04356af56403879fea587a8a1b451dbbafa4a3230cf71e52be16fc876a4dfc76becc6743226de47cd1864bff8e1612281603760098142afe41f30abd36bd27482cfe06c72463e02ebf52c1dfd2e53243243137254b51476d0b004bfaa8817a7c18b935f89e17d3e2a2aac715f276a2923179adb1853e8c5f28f83eaf76c0af4f9af9a7e507b5424167b5fc0f80a2be0e826f481d799732e1eb9a5314f967bfc8f88e08badcc33e523093d7434b6278961d6a8ee75a7086d80c98ec2aa95c50ddd7081e597f9a9224b416322d49bead8df82b1f629ec22f2f172c83774ab39877c6b0ec5f5900b6dda909635d700267713141a949d50d1106d042b5389f77a6d5399e628b9cdd331922076dfcc1e7917444d59d0c674905978a29362e55fc7d08c2f4f36979c6953651b6e3e28c39ca1a9ca7352b0401275bf6788518a4010c36a8c799ab9090bcb84773def5238aaa664e943693d7835b206121997a4d066aaf4731f4d83d9147104f2d3306333ca7080904a03671d6afe9359a37ce8c7c17793a3a9927f63ebb32073a1aa6b5a8d03ee4f18a6f923241c36993aa1a2032fdb1b55cf48d9550bad3f7f604ca35cfb18dfe12bc68fe88b2c84b6c9054a096e1e7e72d65d48276cff3e2c34430c53652a652e1c762555d75fdc21e180cacb1ae33c7afeb177a0389518cc2210644812b019bef27b7b8735bed3a1412d580359ade85f1d1fbaafc42d50133d6b03bb862f78fa4b1361b8a49d2a9bb577c4625df18f6b8fedb61a83ac08800f7162b6a3373795f7dcc95ef4b4ccb24ae6a8da41be6113c481e774186b6072f5a18061e3dd4e37bf8c48bb20cf291d7fed2cc560775b3e94b2a0412ee53d179de4ff7533b2c9bc84c8467b04d92c4991b34d7375827a61e9d2affc915d6466ef561ebf58210c35e19295a801331caf6bbd5435553fb1e6edf96dc78b96ce171040c8d2d43eee98a37ade2d7848425097fd3b4cc6d205f817b91da6527e62edcca2855874401c7351ba8ec4149348aa64af3712743cf85bc2beff22202f50a6aebc4f43382340031779743f3e0b34bb8f72a1a0841fcf1d9709ad095c3c165c544dc5fb1a2366120b4d6b0c898f0e0ac4ca10cffae2a32ec91d179fdc1487601f15b779d9a676580d76b04883b4b46edb6ac7cf12b71b0b510118f97e065c0e477b4e5a0038f6830e7e72b9b8da0d0a15d59b49f96258fe74d4ac9f639de16baf011f7cb553abd034086263b35f4422bce25331be7ee6d653448e20844b578041d96dfef0327c490e7ae2bf92ce2dfd4c73da01220aedaac71737254bdba85f300087fddf51dbed388d7b16c2a3425ac2f5ae64b616fd586646fa1021e293fb14305279e85a7211bfdc0f8814fb6a6b50d7b748c409a3e07ea345eb90a29c940e3d7bc8278022c39b471739eb073b6136fc5139ce20a3a206f8e7483310070176904d32b5a7e4dad532adc1e38356f4685fe9c829a62c9ea3471e37081e55d468c9660973e1f12e2f0d2aedbcbac565635167fb0a39cecde6cb837441c0bfda4645cd85d67b87d19e31bd2c7a7930c7eb3a543670af974bb5068555c8fc21849dda62e32e4d33e3836ee4963a3fe90a25694edc33540cc35f767c9af5d7ae2f2e8e2936f6e35017bbe09bdd3e78f1d06e1542ed0c7da59f2ff606ba71a35ca2f9468c0053ad369b553377d7c18cb29f6033a24c4c98780c86a8aaa58d66c8f402e2f72f6887e8ba6c45a5438360011709bc6822c9697753863518135371ca3e0d4fa67b714b21e60e9fcec1d9ec38926e862bf54f45594bd9259467386cbaa83864c37978cae12e943ba132bf6aaeec6f5f900860b36a901b0add311eff4c56fa203726b16166eb68dfb183509c85fd0fcd073fd77112f4481543a63fedddb92ce3ed1639958fdeea92b0dd20b5ab1b16fb6945a37c4a7fe00bb22bd69789fcbbeb84a854e93a0d3840bf19d48c5cc416fd06315618102810b101f6c1840a4dba2f7018093a62ed8b3dbc6330803590a6bb07584cae92971efbc244221f348ff7c52e8143a94cdcc2762697dadc7a432633b7bb5124d6f1b579bcb7c67e6e17e02f1695ece58d3fe2ea37702bb857ab2e4e669904eb2a812dcb2d3690e3db4dac076c4da0832762f2616926a306df911feb6b0c90a852a6ba6285900b133a21528612456ae151e00b3923e7610c162028458e31c80937fbf59033a080e01fb4690da5e37d5276f4d490af52ea8cfa71ff50ac1dcbab59be7913d3903af63e8fb9480f30d009e965b53ae845641407aa83efc9e7ed9265ebb6220df86f6c0a4917635a7b9ad792c0ba6b927c116b585393943c3022544933bc38721d8cc296e60844aa7e7604692dfc9cd4744617a8d4f10d1d0306e097b3ff0e345450f9d7bba1d2ccaa1b4d77f952380dd5ffc63c6337fd3999661eee77be683eb9e3aed6aa071b52132648edf8cbf227b5fdca41866afbb381a347ef984fdc3f11ca54bef7d7e8df264e9c831e7841bd49497dbffe6ac991b4912c4843ec9313664e3327fff4a8c76a09b6b4c7d5c03271c04c3aea7e08bd838b0c996f158eee345539a50a313efa7df5d28d7a17ac17710a7e91dc7b0461e2ed6507c6c1805cdd256e163b7b7c586e2b9514a8efb4f38551c05a130a2379a8c8fb8f5283584e2d9aeadfe0523dade006b0a64c3ffa58245f16d145538fff701966389c2f76a29f5f5d89b700cbc243f6a92205610026b05116779c500c9898f07dbc50fc938f1d4480dd1a290baab9fa1e737220416bd7a8eb9d2e69471b6002640f79b75671529a9e1d4988506ae1df3ac7a6d260904daf6c06fcceaaef6781d74c213c3049c042455a0ba5151dd479d411e3c6306ecde862b1f385c17eec3dcb622e776c956fada0636d2477d57b1c1880d238367e9fc16281fedb547e002cb89caa3e374ff5cdc2e33f33f0a772d6b841be22380ea4a69e98c53ea3cbffc3ebbf6cd99a62dfbf304deae7a5e2fafead359f425a7de181c16bffab5c55be30391e3ae07cd1523691f3e4ee757511de1a604b6db9f0225f2daab8ad7cb90368fc7d777d04c3d0e06c31333dff3e11f217e51ce1c248268c23c6cafcfcb6656f99d695e2902c990698af1142497419a27e4116daf1c426d5553c827ed05a26f438c8836d864557a5f03b6ac3080acfe51bccee76123d1f410bc928c68b92bdba74818c951291903a96d5a7b3c8dd1b2a60ac3d6b0af848f91d5c418b5ff8cf50dfe4f61b681a54a0c35f5c176c174d9ee8739e8b9a1ef5f952704d0e02083a1154900be46e1186d31f2e917f099d8e80930a9a72560f20b312c9ab7d2ce769fdec7335e7e33e319c19f9587c2e1e78c38e8cb13295cefcf85290a6e038f3c0d88fe0a659ac778cbc82ab0e018dad3d3b0ceb5aaf66596714c846090abbe027f2f559e20eb31841770b76367f5c4a011ed39cd11c1741edd140ec24877fa99f2c0f590c67d958be16fe30df2c823feb17ec5b2fb13f73b4fbef854d6012ebce3aaa787eb3b32d0b61dd299ce5eb6cbaf27f56e23ce4b1a0fd9c3944670bc49f52eeac37335f27963665b8c73d56d1ceefceabb4e44c0c57effc0292798f1169b49aaa474e5d59dc89a7c59c583b04cd0497fc728d4e61cc60db076fe5dac58e97cab0336df9fa1a6956d6f1df37caee87b39006aec33a3a0cf7f5dedaef93ffc6b8e873eb1001a92b23b1d32c6a46b8dfa6005970ddd002f9172b2150bb0317beb6d928dea4ff5c0d2f380acf07d3868351e09303190a1cecfc9f5dfa09d3baee8e15566950370a7111094e0c7b3ef9e71b0dd892823c2e4d2e665fe520a39a5c4e32d08cfb7aa2c81d09e5f7203bee0a5fc89de3a3d3296db8475ca21714e37076b2c3f8584eae063a0cb33b9c158368dab7ed05a47d1596d14a915b89916d0f44a1c38c7f0bbb24cd7a02a30b320129838b00170b1c6b299091c22695d97c5da1dd1fa7973f9a5f14b0d3eb6f8f3404415ad8fbb198bce4d5f99013c8cbf1f91d934fd2bc20796c01201a818ff2ed2efb1e71a3b6ef7332fec5cce92388056bea122151f4e1843c2d79b1b41f09daca04056e820f5a1ab057b67192663e7efa3a1df3a5c1c9162b8196b303c8e9116e62acd35d5da8d5725d6229561f9797b9806806c86f9105fd169adb9328e7b10dfa7d13f9ae7ddeb9a459f5f07f76be8e232ca3024aba112d599120b2f11d19c5605e956019246c6e87d6eff3ca6bd3898ff631f22349dfa184a0aa49dec41114fb2c634d10303e0fd92ab5091abdbb5e0adcedf70a0e990c839a069f18a7f739f5034ed232b6897136e480e4c0737f809c2189cb1ee71c9c9d34b4a2d7075be171aec5a2f01c99162c1aa65f7bb9e0a907022ae9c4c720a835ecfd5d11541fdd4f6c29c434d466c97749b3ee1563fb81a2c91ad2c92da75c66760f5d5ebb4ebc23fced6214631a2720d5b01c949e25dd1503b7031e9e36204694bfc35b0334f68db42c7b316e39fa97b74dba4639d8a543f26c1cd0c7e45a171940e98265b22cb676d56def07a280438cae2affeaf7559413ba0771bbf8cb403d75527b25401b88e2ebcc4f373dc19aa4d0e6aeecb8ee18fff41713b60c2a342476df2dc5f23a0a96d4e27c017ef75006fb3eea53f80a92acd14185fea8168704dc3831f19659009b322421ac637a8413055ccf74de406fad45a4057ae70430a2720d0ac3478a33ad16f93c317ce213564c82974f94c396640819012510c3ee5c031b53c64ebf3d118567799bfeb95918061339050c62c385058061434ff1e6630d86817ee05f62f02849b44eb6d0afcfecab7b3df2c2372865f5a0338de554fb879a1edeae193a183147b7080467973fb7eb55f6593d073c74ab3488bc296e4eb7277dd7e2396156e4d8614c264716b293e037bfc96da4ada8a9da6de62fa0ace055f47a5a5b1c7e32dd4638d445275645e6d65711a854e449f1d5eedaadd73a2cb182296c80e59b0c433b214dfa72f8a071200396244bb64c01bcbbf0964a2738b8007e8873a4a5b555a56814b80b4b3e36c461d823bcaccfd94855069f17707d9cdaf3970cff6537f054f5db8760aee535ae8f3aae76f514ce971b4121481035043f6cfd1e7f44fa40eed98af9d53e1e39e603b8c608f04eab6a0408e0be113ba13565b461971dc1668af3be95ff72ac1dd2d0af6c71ddde50be1b5dd73b69d2fae9a85dc71dd617a418f193edf031b90e0a3d46e7543976cf21984f2c7acc7b8d53c126607b5b2ef5294c41607e18eb23b41377b6fcf21184473f973c842c559f34d229711b8572f975010650946758dd0e4987c62847fd3e87e839a1ac85fefed80257c2ed2b232a2268fab2ad57091ef72d836b2ceaaecb0a542e344d5de3dd00b2823e329daee1ffd51e3f88ef39a2589e8d20349f71a924bf132dcd472aa3a9deb8dca5b041c310094eabe77e1961a7ecca3ad8e6d4152eaaa09ff7dae195cfe88900570d8bfb74756382500171ddf394d05212e06e56922fbd20cd99a50c91d9ffbcfeff63c8009949e3f7b9e1890472aa1d8af3e600c0f2a9de2479138bd3736d5d01a584f9cfe256e29f42289c09534be96b0ebe4a1f98173349040b8a1cbbcd3bb2ce6349bdace1f48c34a72586d3e1867e1618dd79b2dc14675f4e38336b497c289a4bdad90f3dc5ee516c03aba08236cb51f226f328e09f4aea4cd408f2a87dd92ae53f3ddbc7c8a3483a2b7792ecb5268d524aa2db72c364467eae08d5a4631e038cf396a46d9ab1c012c8a1673cf748315035b3e9b546707c6fba2be3a289fc0cb08279b31eb1eb0521b7d166f1dbd4eb6bb20b6f12c7d410185018d112f074b234b8a3205845825393cc5f74735bd67153ed40a7b4c72268aa28956f08e30e5bb404fb6e70b8d19ef8533ad0543de2c6ba3251c431ca078f5327386a07982067bfb43c16349a0be33174d26100943f7cf639598784c98f070d2a6ede028db7a6bd18a9fe4f5245e4b0cc5b47aae45e3fe267e34863d6b8f65112f1ddb6581e15ac890244d45d074b192e2f7a301461003b71f60775557f1ef718360e6b819516ad516f0ec68d1d2e80fc270c8da97f158916615505a34b4895fdc22e16e790cb2757855e5f8db28f94592b1a65472f0a89ac2edb5d8302ba46331e7df70e3c54463df0c8d1e64bf09524e3287de9b3bc00dd9b64a1cf10670421d5c5e6bbcb2c5d3a7e44e9affbe6442f9509bdb0d5ae4043cf1663e68d95c3522a531ec861ba2e2aaf75dbab4b4336f1d6bcf07ac71bbfd07017822a1121ef3cdfc2f8fcd4263c64718534063c8ab91bfbfe2d0d03f053b3594a025d286634bbbcc095aef4b3c6731272419971ae7043230a8d888899fbdf8cde2618e7c4e070cf3ee137e73965b70ea2161c451b6b2cb9ce91e161bfd13acecbcd12f53482f65b92ed6fc521d54b5426c4e0e418904a1610e4ac2e576f23d48cf3cf71759ad823fe8b19ae5a3986ebcf1e2d11c745bf5a9721551cec3dd6ce4b6baf609b205f29314c7330e9eee3c1818b89f45b2ccf8c4f7641780da97972ac35df084139bafb5fc2485a0b4438ca782934c0c6790ff3c09bdb42ae16f6136485233dce2fe101be68b462abea7fb4b1ff932b1817061a5dc691ed2786ac2cb31250942a2e76d3dadacd3f71af41e929b109ef9956c3926613d0c88ff582daa9a29c53eea34a06b1abb26877f99d50d0d275c92ddb3d8dafcdfe503f399c29b4af56c17d169ec450258b88ce3979cf4aa4e9b15d0f72c36d6dfac1e16043585e6da34398837572bb55e4c344e13e58f09e6521efbc695353c0aee9c0a47a553fa1850da02a72eaebc3cb970502652e743edac81814e0be9505b19e39cd00945925bd605ec049c8bbfca01c87d43e6575fee39563b4ac1b83f691284590318fb19b903ea26d33d0da337f2039d9845d311bc2650247d358223458f798df9cfae98d03daa559e726efedd3bd1990c407ac56e7f80432727079e2b59cc723fe87d8823a43b450679c587f12ceffaa8158ded403c3d00a6771fd7c482986bc9c39285e88d69ed139f27e59ca59e02c8bcaf381ebaff049e2572339efc880c997191a9f095716d6f4ede1c513be3b6fc22e86aa472e43e4fa01b9258b3087fc589c911fabe991b2c970968477473421cd1b24638c3a9acf8bd3250a0179feee70b07e1654213aca708492c8ee93cdfc309416c6fb7692fe96a47827cc7b4adfdb2ca885732289dea11c1c02d93d83a3a7e44e982bcdf5a817c1e25db8ed3084f2a70ba9e1a71a9fee5086654aff7553db28a21972f255afd0d8ef392717643b5ddb60cdee6984b88b2afecec813526e3d942f0ebff44100176634cbfd5e7b4515fd514456f5a57328a832519d99b010260692f886ac7b8e3864dc2f4ecb5df4a7815522a82f949c0c0967e057b7c341b78257d22701b181162c3c662a83a3dcfd67052dd78364f2efbe3eda27d530092ef820a225050a2633e21e4130261e4e71a95fa35dfeee6d170ed8ea28b3f66a69d0d6af10b92dd49d8debf351a6058517c3fca22918e0287237465061c73cc6a887adb9d46ba4788ba55ed41fc0037c53c5439833fb80f837228d0db873786b29af449e83219994f9f3223cd8571a65d2fb0e5e8d3cef967102bf297067378db0475571fc4914b2c08e177c56eecab315544e644d33aca5058432b1b0c8555a9435aed71391878b211a5a9d5646dbccbb7ecf69db3fb492e2903a212f03374ec4a43ed03cb3af30d719fcab579c0ea781a644f2ce1df23fd932a784a4752228af1dbe349961b3186d89e34091c4c933eef9609b7bf9b65021d70ec183776eff7072fb4b5619c4f40b0fa2d6a9b1d2fd5893b0c2d75e991af51f8c5df1e7a28457ef04911c333ef5ae3b871bd54f0b7b1c1e63cfd47820ea0779e1102118147b241d9720cbe766f7e0b753a8485a718a92a1b2bc46758a563841bf2f834731825e9a61c13517a2e81f12dbfd371f514d0560484a5907e3a41aef22843a0bed4dd39641f0cb78ab096539faf7f7ac444782ab8290f3091c2cebf1f21168243dd6a4b71bb37e2b8a9d50f5a5a06c14e6a2249a98e571dcf00ff1687e14455b9d0f5b5f33831f559e09afc02b3cc6661b116ec98a7ee453bf761c0eda511ce35fca113486a6a8961f9d53811e3bbd</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">Here&#39;s something encrypted, password is required to continue reading.</summary>
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="数据库" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MYSQL" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/"/>
    
    
    <category term="mysql" scheme="https://zhuansunpengcheng.gitee.io/tags/mysql/"/>
    
    <category term="binlog" scheme="https://zhuansunpengcheng.gitee.io/tags/binlog/"/>
    
    <category term="redolog" scheme="https://zhuansunpengcheng.gitee.io/tags/redolog/"/>
    
  </entry>
  
  <entry>
    <title>mysql的数据宽度与数据长度</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AE%BD%E5%BA%A6%E4%B8%8E%E6%95%B0%E6%8D%AE%E9%95%BF%E5%BA%A6/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AE%BD%E5%BA%A6%E4%B8%8E%E6%95%B0%E6%8D%AE%E9%95%BF%E5%BA%A6/</id>
    <published>2022-10-31T10:57:46.459Z</published>
    <updated>2022-10-31T10:57:46.459Z</updated>
    
    <content type="html"><![CDATA[<h1 id="mysql的数据宽度与数据长度"><a href="#mysql的数据宽度与数据长度" class="headerlink" title="mysql的数据宽度与数据长度"></a>mysql的数据宽度与数据长度</h1><hr><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在mysql的表定义中</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>ag_aging_warn_clean<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">BIGINT</span> <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>status_code<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'状态code'</span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>money<span class="token punctuation">`</span></span> <span class="token keyword">float</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>ag_aging_warn_clean<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>status_code<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">INNODB</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">66</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span> <span class="token operator">=</span> utf8mb4<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>会有字段长度的定义，比如下面这种</p><ul><li>bigint(20)</li><li>varchar(255)</li><li>float(5,2)</li></ul><p>括号外面的我们知道是数据类型，括号里面的是什么意思呢？</p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>说到这个，就要说到mysql的数据类型了，跟着我一步一步走，在mysql中数据类型大致分为五类（下面列的比较全）：</p><h3 id="mysql中数据类型"><a href="#mysql中数据类型" class="headerlink" title="mysql中数据类型"></a>mysql中数据类型</h3><ul><li>整数类型：BIT、BOOL、TINY INT、SMALL INT、MEDIUM INT、 INT、 BIG INT</li><li>浮点数类型：FLOAT、DOUBLE、DECIMAL</li><li>字符串类型：CHAR、VARCHAR、TINY TEXT、TEXT、MEDIUM TEXT、LONGTEXT、TINY BLOB、BLOB、MEDIUM BLOB、LONG BLOB</li><li>日期类型：Date、DateTime、TimeStamp、Time、Year</li><li>其他数据类型：BINARY、VARBINARY、ENUM、SET、Geometry、Point、MultiPoint、LineString、MultiLineString、Polygon、GeometryCollection等</li></ul><p>然后针对每一个数据类型，它的长度和范围是不一样的（只列出常用的数据类型，全的可以参考 ： <a href="https://m.php.cn/article/460317.html%EF%BC%89">https://m.php.cn/article/460317.html）</a></p><h3 id="mysql中各数据类型及字节长度"><a href="#mysql中各数据类型及字节长度" class="headerlink" title="mysql中各数据类型及字节长度"></a>mysql中各数据类型及字节长度</h3><table><thead><tr><th>数据类型</th><th>字节长度</th><th>范围或用法</th></tr></thead><tbody><tr><td>Bit</td><td>1</td><td>无符号[0,255]，有符号[-128,127]，<strong>备注</strong>：BIT和BOOL布尔型都占用1字节</td></tr><tr><td>TinyInt</td><td>1</td><td>整数[0,255]</td></tr><tr><td>SmallInt</td><td>2</td><td>无符号[0,65535]，有符号[-32768,32767]</td></tr><tr><td>MediumInt</td><td>3</td><td>无符号[0,2^24-1]，有符号[-2^23,2^23-1]]</td></tr><tr><td>Int</td><td>4</td><td>无符号[0,2^32-1]，有符号[-2^31,2^31-1]</td></tr><tr><td>BigInt</td><td>8</td><td>无符号[0,2^64-1]，有符号[-2^63 ,2^63 -1]</td></tr><tr><td>Float(M,D)</td><td>4</td><td>单精度浮点数。<strong>备注</strong>：这里的D是精度，如果D&lt;&#x3D;24则为默认的FLOAT，如果D&gt;24则会自动被转换为DOUBLE型。</td></tr><tr><td>Double(M,D)</td><td>8</td><td>双精度浮点。<strong>备注</strong>：关于精度可以参考：<a href="%E5%8D%95%E7%B2%BE%E5%BA%A6%E4%B8%8E%E5%8F%8C%E7%B2%BE%E5%BA%A6%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB.md">单精度与双精度是什么意思有什么区别.md</a></td></tr><tr><td>Decimal(M,D)</td><td>M+1或M+2</td><td>未打包的浮点数，用法类似于FLOAT和DOUBLE，天缘博客提醒您如果在ASP中使用到Decimal数据类型，直接从数据库读出来的Decimal可能需要先转换成Float或Double类型后再进行运算。</td></tr><tr><td>Date</td><td>3</td><td>以YYYY-MM-DD的格式显示，比如：2009-07-19</td></tr><tr><td>Date Time</td><td>8</td><td>以YYYY-MM-DD HH:MM:SS的格式显示，比如：2009-07-19 11：22：30</td></tr><tr><td>TimeStamp</td><td>4</td><td>以YYYY-MM-DD的格式显示，比如：2009-07-19</td></tr><tr><td>Time</td><td>3</td><td>以HH:MM:SS的格式显示。比如：11：22：30</td></tr><tr><td>Year</td><td>1</td><td>以YYYY的格式显示。比如：2009</td></tr><tr><td>Char(M)</td><td>M</td><td>定长字符串。</td></tr><tr><td>VarChar(M)</td><td>M</td><td>变长字符串，要求M&lt;&#x3D;255</td></tr><tr><td>Binary(M)</td><td>M</td><td>类似Char的二进制存储，特点是插入定长不足补0</td></tr><tr><td>VarBinary(M)</td><td>M</td><td>类似VarChar的变长二进制存储，特点是定长不补0</td></tr><tr><td>Tiny Text</td><td>Max:255</td><td>大小写不敏感</td></tr><tr><td>Text</td><td>Max:64K</td><td>大小写不敏感</td></tr><tr><td>Medium Text</td><td>Max:16M</td><td>大小写不敏感</td></tr><tr><td>Long Text</td><td>Max:4G</td><td>大小写不敏感</td></tr><tr><td>TinyBlob</td><td>Max:255</td><td>大小写敏感</td></tr><tr><td>Blob</td><td>Max:64K</td><td>大小写敏感</td></tr><tr><td>MediumBlob</td><td>Max:16M</td><td>大小写敏感</td></tr><tr><td>LongBlob</td><td>Max:4G</td><td>大小写敏感</td></tr><tr><td>Enum</td><td>1或2</td><td>最大可达65535个不同的枚举值</td></tr><tr><td>Set</td><td>可达8</td><td>最大可达64个不同的值</td></tr></tbody></table><h3 id="整数型的可选属性"><a href="#整数型的可选属性" class="headerlink" title="整数型的可选属性"></a>整数型的可选属性</h3><p>观察第三列【范围或用法】，可以看到，整数型根据数据类型的不同，存储的数值大小也不同，而且还有<code>无符号</code>的概念，那么这俩是什么意思呢？</p><p>其实在mysql中，整数型的可选属性有三个：</p><ul><li>M   ： 宽度(在0填充的时候才有意义，否则不需要指定)</li><li>unsigned   ： 无符号类型(非负)</li><li>zerofill   ：  0填充,(如果某列是zerofill，那么默认就是无符号)，如果指定了zerofill只是表示不够M位时，用0在左边填充，如果超过M位，只要不超过数据存储范围即可</li></ul><p>那么这三个有什么用的？我们来一个一个看：</p><p>当我们设置了<code>bigint(5)</code>的时候，数据库中存储了 -1,-12,-123,-12345,-123456,1,12,123,12345,123456，分别是什么效果？</p><p>要分设置了 zerofill（0填充）的情况，和不设置 zerofill（0填充） 的情况</p><ul><li>不设置zerofill（0填充）的情况，如下图</li></ul><img src="mysql的数据宽度与数据长度.assets/image-20220902144000573.png" alt="image-20220902144000573" style="zoom:80%;" /><ul><li>设置了zerofill（0填充）的情况，如下图<ul><li>当使用<em>zerofill</em> 时，默认会自动加unsigned（无符号）属性</li></ul></li></ul><img src="mysql的数据宽度与数据长度.assets/image-20220902144158868.png" alt="image-20220902144158868" style="zoom:80%;" /><p>看完了 zerofill（零填充）的效果之后，我们接着来看 unsigned （无符号）</p><ul><li>无符号没什么可以说的，以bigint为例</li><li>无符号[0,2^64-1]，有符号[-2^63 ,2^63 -1]</li><li>设置无符号之后，负数是无法插入的，网上一些傻逼博客说可以插入，只不过展示0，全是放屁</li></ul><img src="mysql的数据宽度与数据长度.assets/image-20220902153330878.png" alt="image-20220902153330878" style="zoom:80%;" /><p>问：bigint(5)和bigint(20)有什么区别？</p><ul><li>在数据插入方面，没有任何区别；两者占用的空间都是8字节；</li><li>只不过展示方面不一样，见上</li></ul><h3 id="字符串型的宽度"><a href="#字符串型的宽度" class="headerlink" title="字符串型的宽度"></a>字符串型的宽度</h3><p>上面了解了 整数型 的【宽度】，引出了无符号和零填充的概念；那么针对字符串呢？</p><ul><li>字符串不支持【无符号】和【零填充】</li><li>但是字符串支持【宽度】</li></ul><p>比如下面这种： varchar(255)，其中的255表示什么含义呢？</p><ul><li>表示这个列只能存储255个字节，是真正的长度限制。</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;mysql的数据宽度与数据长度&quot;&gt;&lt;a href=&quot;#mysql的数据宽度与数据长度&quot; class=&quot;headerlink&quot; title=&quot;mysql的数据宽度与数据长度&quot;&gt;&lt;/a&gt;mysql的数据宽度与数据长度&lt;/h1&gt;&lt;hr&gt;
&lt;h2 id=&quot;前言&quot;&gt;&lt;a h</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="数据库" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MYSQL" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/"/>
    
    
    <category term="单精度" scheme="https://zhuansunpengcheng.gitee.io/tags/%E5%8D%95%E7%B2%BE%E5%BA%A6/"/>
    
    <category term="双精度" scheme="https://zhuansunpengcheng.gitee.io/tags/%E5%8F%8C%E7%B2%BE%E5%BA%A6/"/>
    
  </entry>
  
  <entry>
    <title>mysql的性能调优</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%9A%84%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%9A%84%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/</id>
    <published>2022-10-31T10:57:46.455Z</published>
    <updated>2022-10-31T10:57:46.455Z</updated>
    
    <content type="html"><![CDATA[<p>在出现IO瓶颈的时候，可以将sync_binglog设置为100-1000内的值，表示累计多少个事务之后才会刷盘，默认是1表示每一个事务都会刷盘写binlog；</p><p>在出现IO瓶颈的时候，可以设置binlog_group_commit_sync_delay 和 binlog_group_commit_sync_no_delay_count，表示提升binlog的组提交的效果，但是会增加sql的响应时间</p><p>写多读少的场景，由于 change buffer 的优化机制，因此如果业务可以接受，从性能角度出发我建议你优先考虑普通索引。</p><p>mysql要调优，就要知道它为什么慢，哪里慢</p><p>在低版本：show profiles</p><p>在高版本：performance schema</p><p>以上有什么用？</p><ul><li>比如在实际环境中，有一个sql，非常慢</li><li>sql本身没有问题，看执行计划也比较慢，这个时候就可以用到上面的</li><li>可以更加详细的看到，这个sql到底是哪里慢</li></ul><p>process list 可以查看mysql的连接数量，顺丰云上的回话连接是不是？</p><p>不过一般有druid，不用太关注这个。但是呢，druid是什么，要去看看github上面的官网了。了解一下它的优点</p><p>字符集和字符编码的区别</p><p>大表拆分，将不常用的数据从表里拆出去，表小了之后，每个数据页存的数据就会多，查询的时候，就会减少磁盘IO</p><p>优化：</p><ul><li>不同的数据选择对应的mysql自建数据类型，比如数字就用数字类型，不要用字符串，时间就用时间类型，不要用字符串；用错了数据类型，对业务可能没影响，但是对mysql来说，内部多了一层转换，sql执行会比较慢</li><li>事件类型，建议用date，而不是timestamp，date类型</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;在出现IO瓶颈的时候，可以将sync_binglog设置为100-1000内的值，表示累计多少个事务之后才会刷盘，默认是1表示每一个事务都会刷盘写binlog；&lt;/p&gt;
&lt;p&gt;在出现IO瓶颈的时候，可以设置binlog_group_commit_sync_delay 和 b</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="数据库" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MYSQL" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/"/>
    
    
    <category term="mysql" scheme="https://zhuansunpengcheng.gitee.io/tags/mysql/"/>
    
    <category term="性能" scheme="https://zhuansunpengcheng.gitee.io/tags/%E6%80%A7%E8%83%BD/"/>
    
    <category term="调优" scheme="https://zhuansunpengcheng.gitee.io/tags/%E8%B0%83%E4%BC%98/"/>
    
  </entry>
  
  <entry>
    <title>mysql的学习网站</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99/</id>
    <published>2022-10-31T10:57:46.454Z</published>
    <updated>2022-10-31T10:57:46.454Z</updated>
    
    <content type="html"><![CDATA[<p>数据库内核报告： <a href="http://mysql.taobao.org/monthly/">http://mysql.taobao.org/monthly/</a></p><img src="mysql的学习网站.assets/image-20220901193533934.png" alt="image-20220901193533934" style="zoom:50%;" />]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;数据库内核报告： &lt;a href=&quot;http://mysql.taobao.org/monthly/&quot;&gt;http://mysql.taobao.org/monthly/&lt;/a&gt;&lt;/p&gt;
&lt;img src=&quot;mysql的学习网站.assets/image-2022090119</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="数据库" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MYSQL" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/"/>
    
    
    <category term="mysql" scheme="https://zhuansunpengcheng.gitee.io/tags/mysql/"/>
    
    <category term="学习" scheme="https://zhuansunpengcheng.gitee.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="网站" scheme="https://zhuansunpengcheng.gitee.io/tags/%E7%BD%91%E7%AB%99/"/>
    
  </entry>
  
  <entry>
    <title>mysql排序字段相同导致结果不一致</title>
    <link href="https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E6%8E%92%E5%BA%8F%E5%AD%97%E6%AE%B5%E7%9B%B8%E5%90%8C%E5%AF%BC%E8%87%B4%E7%BB%93%E6%9E%9C%E4%B8%8D%E4%B8%80%E8%87%B4/"/>
    <id>https://zhuansunpengcheng.gitee.io/note/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/mysql%E6%8E%92%E5%BA%8F%E5%AD%97%E6%AE%B5%E7%9B%B8%E5%90%8C%E5%AF%BC%E8%87%B4%E7%BB%93%E6%9E%9C%E4%B8%8D%E4%B8%80%E8%87%B4/</id>
    <published>2022-10-31T10:57:46.454Z</published>
    <updated>2022-10-31T10:57:46.454Z</updated>
    
    <content type="html"><![CDATA[<h2 id="mysql排序字段相同导致结果不一致"><a href="#mysql排序字段相同导致结果不一致" class="headerlink" title="mysql排序字段相同导致结果不一致"></a>mysql排序字段相同导致结果不一致</h2><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>最近公司业务有这么一个功能：对5000条数据进行批量导入，然后通过表格的形式展示在前端，需要根据创建时间进行排序。</p><p>所以，很简单的我们会想到</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">ORDER BY gmt_create DESC;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>但是在实际的使用中，我发现一个问题，就是当时间相同的时候，这个排序是不确定的，是随机的。</p><p>我们看一个例子：</p><ul><li>首先这两条sql语句是一样的，只不过一个查询 <code>*</code> 一个只查询<code>id</code>。那么理所当然的：他们的结果应该是一样的。</li></ul><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT * FROM customer WHERE employee_id&#x3D;39 AND assigned&#x3D;1 and status&#x3D;0 ORDER BY gmt_last_transfer DESC ;SELECT id FROM customer WHERE employee_id&#x3D;39 AND assigned&#x3D;1 and status&#x3D;0 ORDER BY gmt_last_transfer DESC ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><img src="mysql排序字段相同导致结果不一致.assets/image-20220831203859308.png" alt="image-20220831203859308" style="zoom:50%;" /><img src="mysql排序字段相同导致结果不一致.assets/image-20220831203918310.png" alt="image-20220831203918310" style="zoom:50%;" /><p>我们可以看到两次的查询结果是不一样的。</p><h3 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h3><h3 id="为什么结果不一样"><a href="#为什么结果不一样" class="headerlink" title="为什么结果不一样"></a>为什么结果不一样</h3><p>查阅了Goole和相关资料，大概总结了这种情况的原因。其实发生这种现象是“故意”设计的。</p><p>如果没有指定ORDER BY语句，则SQL Server（或任何RDBMS）不保证以特定顺序返回结果。</p><p>有些人认为，如果没有指定order by子句，行总是以聚簇索引顺序或物理磁盘顺序返回。</p><p>然而，这是不正确的，因为在查询处理期间可以改变行顺序的许多因素，例如并行的HASH连接是更改行顺序的操作符的一个很好的例子。</p><p>如果指定ORDER BY语句，SQL Server将对行进行排序，并按请求的顺序返回。</p><p>但是，如果该顺序不是确定性的，即可能有重复的值，则在每个具有相同值的组中，由于与上述相同的原因，该顺序是“随机的”。</p><h3 id="那么怎么保证顺序唯一呢？"><a href="#那么怎么保证顺序唯一呢？" class="headerlink" title="那么怎么保证顺序唯一呢？"></a>那么怎么保证顺序唯一呢？</h3><ul><li><p>不使用可能重复的字段进行排序，即不用时间排序，而使用主键进行排序。</p></li><li><p>但是在某些必须使用时间排序，应该怎么办呢？</p></li><li><p>这个时候就需要使用多字段排序的功能。</p></li><li><p>所谓的多字段排序，其实也很简单。</p></li></ul><p>mysql多个字段排序：</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select * from table order by id desc,name desc;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>多字字段排序只需要添加多个排序条件，并且每个排序的条件之前用逗号分开。</p><blockquote><p>order by id desc,name desc; </p></blockquote><p>表示先按照id降序排序，再按照name降序排序。</p><p>同理：</p><blockquote><p>order by id desc,name asc;</p></blockquote><p> 表示先按照id降序排序，再按照name升序排序。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;mysql排序字段相同导致结果不一致&quot;&gt;&lt;a href=&quot;#mysql排序字段相同导致结果不一致&quot; class=&quot;headerlink&quot; title=&quot;mysql排序字段相同导致结果不一致&quot;&gt;&lt;/a&gt;mysql排序字段相同导致结果不一致&lt;/h2&gt;&lt;h3 id=&quot;前</summary>
      
    
    
    
    <category term="JAVA" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/"/>
    
    <category term="数据库" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MYSQL" scheme="https://zhuansunpengcheng.gitee.io/categories/JAVA/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL/"/>
    
    
    <category term="mysql" scheme="https://zhuansunpengcheng.gitee.io/tags/mysql/"/>
    
  </entry>
  
</feed>
